(()=>{var e={258:e=>{!function(t){e.exports=t;var r="listeners",n={on:function(e,t){return a(this,e).push(t),this},once:function(e,t){var r=this;return n.originalListener=t,a(r,e).push(n),r;function n(){i.call(r,e,n),t.apply(this,arguments)}},off:i,emit:function(e,t){var r=this,n=a(r,e,!0);if(!n)return!1;var o=arguments.length;if(1===o)n.forEach((function(e){e.call(r)}));else if(2===o)n.forEach((function(e){e.call(r,t)}));else{var i=Array.prototype.slice.call(arguments,1);n.forEach((function(e){e.apply(r,i)}))}return!!n.length}};function o(e){for(var t in n)e[t]=n[t];return e}function i(e,t){var n,o=this;if(arguments.length){if(t){if(n=a(o,e,!0)){if(!(n=n.filter((function(e){return e!==t&&e.originalListener!==t}))).length)return i.call(o,e);o[r][e]=n}}else if((n=o[r])&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[r];return o}function a(e,t,n){if(!n||e[r]){var o=e[r]||(e[r]={});return o[t]||(o[t]=[])}}o(t.prototype),t.mixin=o}((function e(){if(!(this instanceof e))return new e}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e={VK:"vk",OK:"ok",YANDEX:"yandex",CRAZY_GAMES:"crazy_games",ABSOLUTE_GAMES:"absolute_games",GAME_DISTRIBUTION:"game_distribution",PLAYGAMA:"playgama",PLAYDECK:"playdeck",TELEGRAM:"telegram",Y8:"y8",LAGGED:"lagged",FACEBOOK:"facebook",POKI:"poki",MOCK:"mock",QA_TOOL:"qa_tool",MSN:"msn",HUAWEI:"huawei",BITQUEST:"bitquest",GAMEPUSH:"gamepush",DISCORD:"discord",JIO_GAMES:"jio_games",YOUTUBE:"youtube",PORTAL:"portal",REDDIT:"reddit"},t={PLATFORM:"platform",PLAYER:"player",GAME:"game",STORAGE:"storage",ADVERTISEMENT:"advertisement",SOCIAL:"social",DEVICE:"device",LEADERBOARDS:"leaderboards",PAYMENTS:"payments",REMOTE_CONFIG:"remote_config",CLIPBOARD:"clipboard",ACHIEVEMENTS:"achievements"},n={INTERSTITIAL_STATE_CHANGED:"interstitial_state_changed",REWARDED_STATE_CHANGED:"rewarded_state_changed",BANNER_STATE_CHANGED:"banner_state_changed",VISIBILITY_STATE_CHANGED:"visibility_state_changed",AUDIO_STATE_CHANGED:"audio_state_changed",PAUSE_STATE_CHANGED:"pause_state_changed"},o={VISIBLE:"visible",HIDDEN:"hidden"},i={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed"},a={LOADING:"loading",OPENED:"opened",CLOSED:"closed",FAILED:"failed",REWARDED:"rewarded"},s={LOADING:"loading",SHOWN:"shown",HIDDEN:"hidden",FAILED:"failed"},c="banner-container",u="interstitial-container",l="rewarded-container",f={LOCAL_STORAGE:"local_storage",PLATFORM_INTERNAL:"platform_internal"},p={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",TV:"tv"},d={GAME_READY:"game_ready",IN_GAME_LOADING_STARTED:"in_game_loading_started",IN_GAME_LOADING_STOPPED:"in_game_loading_stopped",GAMEPLAY_STARTED:"gameplay_started",GAMEPLAY_STOPPED:"gameplay_stopped",PLAYER_GOT_ACHIEVEMENT:"player_got_achievement",GAME_OVER:"game_over"},h="not_available",y="in_game",m="native",v={INITIALIZE:"initialize",AUTHORIZE_PLAYER:"authorize_player",SHARE:"share",INVITE_FRIENDS:"invite_friends",JOIN_COMMUNITY:"join_community",CREATE_POST:"create_post",ADD_TO_HOME_SCREEN:"add_to_home_screen",ADD_TO_FAVORITES:"add_to_favorites",RATE:"rate",LEADERBOARDS_SET_SCORE:"leaderboards_set_score",LEADERBOARDS_GET_ENTRIES:"leaderboards_get_entries",LEADERBOARDS_SHOW_NATIVE_POPUP:"leaderboards_show_native_popup",GET_PURCHASES:"get_purchases",GET_CATALOG:"get_catalog",PURCHASE:"purchase",CONSUME_PURCHASE:"consume_purchase",GET_REMOTE_CONFIG:"get_remote_config",GET_STORAGE_DATA:"get_storage_data",SET_STORAGE_DATA:"set_storage_data",DELETE_STORAGE_DATA:"delete_storage_data",CLIPBOARD_WRITE:"clipboard_write",ADBLOCK_DETECT:"adblock_detect",SET_INTERSTITIAL_STATE:"set_interstitial_state",SET_REWARDED_STATE:"set_rewarded_state",SHOW_INTERSTITIAL:"show_interstitial",SHOW_REWARDED:"show_rewarded"},_={message:"Before using the SDK you must initialize it"},g={message:"Storage not supported"},S={message:"Storage not available"},b={message:"GameDistribution Game ID is undefined"},E={message:"Y8 Game params are not found"},P={message:"OK Game params are not found"},w={message:"Lagged Game params are not found"},A={message:"Huawei Game params are not found"},O={message:"GamePush Game params are not found"},T={message:"Message is too long"},k={message:"Discord Game params are not found"},D={message:"JioGames Game params are not found"};function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:String(t)}function j(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function C(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,G(e,t,"set"),r),r}function N(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,G(e,t,"get"))}function G(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var B=new WeakMap,M=new WeakMap,H=new WeakMap;const F=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,B,{writable:!0,value:void 0}),j(this,M,{writable:!0,value:void 0}),j(this,H,{writable:!0,value:void 0}),C(this,B,new Promise((function(e,r){C(t,M,e),C(t,H,r)})))}var t,r;return t=e,(r=[{key:"promise",get:function(){return N(this,B)}},{key:"resolve",value:function(e){N(this,M).call(this,e)}},{key:"reject",value:function(e){N(this,H).call(this,e)}}])&&R(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();var x=r(258),U=r.n(x);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z(n.key),n)}}function z(e,t,r){return t&&W(e.prototype,t),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:String(t)}const Y=z((function e(t){var r,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=this,o=void 0,(n=Z(n="_platformBridge"))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this._platformBridge=t})),J=JSON.parse('{"i8":"1.26.0-preview.1"}');function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function X(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=K(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==K(t)?t:String(t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function re(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var ne=new WeakMap,oe=new WeakSet,ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(o);if(i){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(this,e)});function s(e){var t,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),te(r=$(t=a.call(this,e)),o=oe),o.add(r),function(e,t,r){te(e,t),t.set(e,{writable:!0,value:!1})}($(t),ne),t._platformBridge.on(n.AUDIO_STATE_CHANGED,(function(e){return t.emit(n.AUDIO_STATE_CHANGED,e)})),t._platformBridge.on(n.PAUSE_STATE_CHANGED,(function(e){return t.emit(n.PAUSE_STATE_CHANGED,e)})),t}return t=s,(r=[{key:"id",get:function(){return this._platformBridge.platformId}},{key:"sdk",get:function(){return this._platformBridge.platformSdk}},{key:"language",get:function(){return this._platformBridge.platformLanguage}},{key:"payload",get:function(){return this._platformBridge.platformPayload}},{key:"tld",get:function(){return this._platformBridge.platformTld}},{key:"isGetAllGamesSupported",get:function(){return this._platformBridge.isPlatformGetAllGamesSupported}},{key:"isGetGameByIdSupported",get:function(){return this._platformBridge.isPlatformGetGameByIdSupported}},{key:"isAudioEnabled",get:function(){return this._platformBridge.isPlatformAudioEnabled}},{key:"isPaused",get:function(){return this._platformBridge.isPlatformPaused}},{key:"sendMessage",value:function(e){if(e===d.GAME_READY){if(function(e,t){return t.get?t.get.call(e):t.value}(this,re(this,ne,"get")))return Promise.reject();(function(e,t,r){(function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}})(e,re(e,t,"set"),r)})(this,ne,!0),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,oe,ae).call(this);var t=document.getElementById("loading-overlay");t&&t.remove()}return this._platformBridge.sendMessage(e)}},{key:"getServerTime",value:function(){return this._platformBridge.getServerTime()}},{key:"getAllGames",value:function(){return this._platformBridge.getAllGames()}},{key:"getGameById",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getGameById(t)}return this._platformBridge.getGameById(e)}}])&&q(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Y);function ae(){var e,t=null===(e=this._platformBridge.options)||void 0===e?void 0:e.sendAnalyticsEvents,r=window.location.href;if(!(r.startsWith("file://")||r.includes("localhost")||r.includes("127.0.0.1"))&&!1!==t){var n="https://playgama.com/api/v1/events";"discord"===this._platformBridge.platformId&&(n="/playgama/api/v1/events"),fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventName:"game_ready",pageName:"".concat(this._platformBridge.platformId,":").concat(this._platformBridge.engine),userId:"bridge:".concat(J.i8),clid:window.location.href})}).then((function(e){if(!e.ok)throw new Error("Network response was not ok: ".concat(e.status))})).catch((function(e){console.error("Error sending event:",e)}))}}U().mixin(ie.prototype);const se=ie;function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,le(n.key),n)}}function le(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:String(t)}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pe(e)}const de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(n);if(o){var r=pe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ce(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isAuthorizationSupported",get:function(){return this._platformBridge.isPlayerAuthorizationSupported}},{key:"isAuthorized",get:function(){return this._platformBridge.isPlayerAuthorized}},{key:"id",get:function(){return this._platformBridge.playerId}},{key:"name",get:function(){return this._platformBridge.playerName}},{key:"photos",get:function(){return this._platformBridge.playerPhotos}},{key:"extra",get:function(){return this._platformBridge.playerExtra}},{key:"authorize",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.authorize(t)}return this._platformBridge.authorizePlayer(e)}}])&&ue(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e,t,r){var n;return n=function(e,t){if("object"!=he(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==he(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _e=function(e){return new Promise((function(t){var r=document.createElement("script");r.src=e,r.addEventListener("load",t),document.head.appendChild(r)}))};function ge(e){var t=document.createElement("div");return t.id=c,t.style.position="absolute",document.body.appendChild(t),"top"===e?(t.style.top="0px",t.style.height="90px",t.style.width="100%"):(t.style.bottom="0px",t.style.height="90px",t.style.width="100%"),t}function Se(e){var t=document.createElement("div");return t.id=e,t.style.position="fixed",t.style.inset="0",t.style.zIndex="9999999",document.body.appendChild(t),t}var be=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length<=0?Promise.resolve():new Promise((function(e){var r=setInterval((function(){for(var n=window,o=0;o<t.length;o++){var i=n[t[o]];if(!i)return;n=i}e(),clearInterval(r)}),100)}))},Ee=function(e){return/^data:image\/(png|jpeg|jpg|gif|bmp|webp|svg\+xml);base64,[A-Za-z0-9+/]+={0,2}$/.test(e)},Pe=function(e,t){return void 0===e[t]?null:e[t]};function we(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Array.isArray(e)?e.reduce((function(e,n,o){if(e[o]=Pe(t,n),r)try{e[o]=JSON.parse(e[o])}catch(e){}return e}),new Array(e.length)):Pe(t,e)}function Ae(e,t){for(var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),n=Object.keys(t),o=0;o<n.length;o++){var i=n[o];i in e&&t[i]instanceof Object&&e[i]instanceof Object?r[i]=Ae(e[i],t[i]):r[i]=t[i]}return r}function Oe(e){return Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oe(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Le(n.key),n)}}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}function Re(e,t,r){return(t=Le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Oe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Oe(t)?t:String(t)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(s,e);var t,r,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ie(o);if(i){var r=Ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return De(e)}(this,e)});function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),Re(De(t=a.call(this,e)),"_currentLoadingProgress",null),Re(De(t),"_loadingProcessCompleted",!1),t._platformBridge.on(n.VISIBILITY_STATE_CHANGED,(function(e){return t.emit(n.VISIBILITY_STATE_CHANGED,e)})),t._platformBridge.options.disableLoadingLogo||function(e){var t=document.createElement("style");t.textContent="\n        .fullscreen {\n            background: #242424;\n            width: 100vw;\n            height: 100vh;\n            position: absolute;\n            top: 0px;\n            left: 0px;\n        }\n\n        #loading-overlay {\n            font-size: 20px;\n            z-index: 1;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n            align-items: center;\n        }\n\n        #logo {\n            width: 10%;\n            max-width: 300px;\n            min-width: 120px;\n            overflow: visible;\n        }\n\n        .fill-rect {\n            transform: translateY(100%);\n            transition: transform 0.3s ease-out;\n        }\n\n        #gradientMover {\n            display: none;\n        }\n\n        .gradient-mover {\n            animation: moveGradient 0.4s linear;\n        }\n\n        @keyframes moveGradient {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(-250%); }\n        }\n\n        .logo-fade-out {\n            animation: logoFadeOut 1s linear;\n        }\n\n        .logo-fade-out path {\n            fill: white;\n            stroke: white;\n        }\n\n        @keyframes logoFadeOut {\n            0% { opacity: 1; }\n            50% { opacity: 0; }\n            100% { opacity: 0; }\n        }\n    ",document.head.appendChild(t);var r=document.createElement("div");r.id="loading-overlay",r.className="fullscreen",document.body.appendChild(r);var n=!1===e?{viewBox:"0 0 633 819",paths:["M632 1V632H1V1H632ZM350 125.586V507.414L380.586 538H546V451H478.599L478.308 451.278L454.598 474H443.406L450.944 452.328L451 452.169V187.459L457.369 182H546V95H380.586L350 125.586ZM283 125.586L252.414 95H87V182H175.631L182 187.459V445.54L175.631 451H87V538H252.414L283 507.414V125.586Z","M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]}:{viewBox:"0 0 633 918",paths:["M633 687V660H548V687H560V791H548V819H633V792H601L592 801H587L590 792V752H627V725H590V687H633Z","M533 718V675L518 660H450L435 675V802L450 819H518L533 804V734H482V761H503V788L499 792H476L467 801H462L465 792V691L469 687H499L503 691V718H533Z","M612 847H564V894H579V861H591V894H606V861H612C615 861 617 864 617 867V894H633V868C633 856 623 847 612 847Z","M533 846C519 846 508 857 508 870C508 884 519 895 533 895C546 895 557 884 557 870C557 857 546 846 533 846ZM533 880C528 880 524 875 524 870C524 865 528 861 533 861C538 861 542 865 542 870C542 875 538 880 533 880Z","M402 660H310V687H322V792H310V819H402L417 804V675L402 660ZM387 788L383 792H363L354 801H349L352 792V687H383L387 691V788Z","M484 861H502V847H482C469 847 459 858 459 871C459 884 469 894 482 894H502V880H484C478 880 474 876 474 871C474 865 478 861 484 861Z","M444 875C438 875 434 879 434 885C434 890 438 895 444 895C449 895 454 890 454 885C454 879 449 875 444 875Z","M402 847C389 847 378 857 378 870C378 883 389 894 402 894H425V847H402ZM410 880H403C398 880 394 876 394 870C394 865 398 861 403 861H410V880Z","M295 687V660H239V687H251V792H239V819H295V792H283V687H295Z","M350 847H303V894H318V861H329V894H345V861H350C353 861 356 864 356 867V894H371V868C371 856 362 847 350 847Z","M215 791L200 760H209L224 745V675L209 660H121V687H132V792H121V819H162V760H166L193 819H227V791H215ZM194 729L190 733H173L164 742H159L162 733V687H190L194 691V729Z","M269 847C256 847 247 857 247 870C247 883 256 894 269 894H293V847H269ZM277 880H271C265 880 261 876 261 870C261 865 265 861 271 861H277V880Z","M214 847C201 847 190 857 190 870C190 883 201 894 214 894H224V895C224 900 220 903 215 903H195V918H216C229 918 239 908 239 895V847H214ZM224 880H215C210 880 206 876 206 870C206 865 210 861 215 861H224V880Z","M106 724V675L91 660H0V687H12V792H0V819H91L106 804V749L89 744V728L106 724ZM73 788L69 792H53L44 801H39L42 792V752H73V788ZM73 725H53L44 734H39L42 725V687H69L73 691V725Z","M167 847V880H153V847H137V894H167V895C167 900 163 904 157 904H137V918H158C172 918 182 909 182 896V847H167Z","M104 847C91 847 80 857 80 870C80 883 91 894 104 894H127V847H104ZM112 880H105C100 880 96 876 96 870C96 865 100 861 105 861H112V880Z","M56 833V894H72V833H56Z","M25 847H2V908H17V894H25C38 894 49 883 49 870C49 857 38 847 25 847ZM24 880H17V861H24C29 861 33 865 33 870C33 876 29 880 24 880Z","M0 0V633H633V0H0ZM451 452L443 475H456L480 452H546V537H382L352 507V126L382 96H546V181H458L451 187V452ZM252 96L282 126V507L252 537H88V452H176L183 446V187L176 181H88V96H252Z"],fillColor:"#aa76ff",strokeColor:"#aa76ff",gradientStops:[{offset:"0.235577",color:"#aa76ff"},{offset:"0.240685",color:"white"},{offset:"0.659749",color:"#aa76ff"}]};n.gradientWidthMultiplier=4;var o,i,a=(o=n.viewBox.split(/[ ,]+/),i=4,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(o,i)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ve(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[2],c=a[3],u=Number(s),l=Number(c),f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("id","logo"),f.setAttribute("viewBox",n.viewBox),f.setAttribute("fill","none"),f.setAttribute("xmlns","http://www.w3.org/2000/svg");var p=document.createElementNS(f.namespaceURI,"defs"),d=document.createElementNS(f.namespaceURI,"mask");d.setAttribute("id","logo-mask");var h=document.createElementNS(f.namespaceURI,"rect");h.setAttribute("x","0"),h.setAttribute("y","0"),h.setAttribute("width","100%"),h.setAttribute("height","100%"),h.setAttribute("fill","black"),d.appendChild(h),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("fill","white"),d.appendChild(t)})),p.appendChild(d);var y=document.createElementNS(f.namespaceURI,"linearGradient");y.setAttribute("id","shineGradient"),y.setAttribute("x1","1233"),y.setAttribute("y1","0"),y.setAttribute("x2","1866"),y.setAttribute("y2","633"),y.setAttribute("gradientUnits","userSpaceOnUse"),n.gradientStops.forEach((function(e){var t=e.offset,r=e.color,n=document.createElementNS(f.namespaceURI,"stop");n.setAttribute("offset",t),n.setAttribute("stop-color",r),y.appendChild(n)})),p.appendChild(y),f.appendChild(p);var m=document.createElementNS(f.namespaceURI,"g");m.setAttribute("mask","url(#logo-mask)");var v=document.createElementNS(f.namespaceURI,"rect");v.setAttribute("id","gradientMover"),v.setAttribute("x","0"),v.setAttribute("y","0"),v.setAttribute("width",String(u*n.gradientWidthMultiplier)),v.setAttribute("height",String(l)),v.setAttribute("fill","url(#shineGradient)"),v.style.transform="translateX(0)",m.appendChild(v),f.appendChild(m);var _=document.createElementNS(f.namespaceURI,"g");_.setAttribute("mask","url(#logo-mask)");var g=document.createElementNS(f.namespaceURI,"rect");g.setAttribute("id","fillRect"),g.setAttribute("class","fill-rect"),g.setAttribute("x","0"),g.setAttribute("y","0"),g.setAttribute("width","100%"),g.setAttribute("height",String(l)),g.setAttribute("fill",n.fillColor),_.appendChild(g),f.appendChild(_),n.paths.forEach((function(e){var t=document.createElementNS(f.namespaceURI,"path");t.setAttribute("d",e),t.setAttribute("stroke",n.strokeColor),t.setAttribute("stroke-width","3"),f.appendChild(t)})),r.appendChild(f)}(t._platformBridge.options.showFullLoadingLogo),t}return t=s,r=[{key:"visibilityState",get:function(){return this._platformBridge.visibilityState}},{key:"setLoadingProgress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(this._loadingProcessCompleted||t&&null!==this._currentLoadingProgress)){var r=document.getElementById("fillRect"),n=document.getElementById("gradientMover"),o=document.getElementById("logo"),i=document.getElementById("loading-overlay");if(r&&n&&o&&i){this._currentLoadingProgress=e;var a=Math.max(0,Math.min(100,e)),s=100-a;r.style.transform="translateY(".concat(s,"%)"),100===a?(this._loadingProcessCompleted=!0,setTimeout((function(){r.style.display="none",n.style.display="block",n.classList.add("gradient-mover")}),400),setTimeout((function(){return o.classList.add("logo-fade-out")}),900),setTimeout((function(){return i.remove()}),1400)):n.classList.remove("gradient-mover")}}}}],r&&Te(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(Y);U().mixin(je.prototype);const Ce=je;function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function Ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Be(n.key),n)}}function Be(e){var t=function(e,t){if("object"!=Ne(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ne(t)?t:String(t)}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}const Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(n);if(o){var r=He(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,r=[{key:"defaultType",get:function(){return this._platformBridge.defaultStorageType}},{key:"isSupported",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageSupported(e)}},{key:"isAvailable",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.isSupported(t)}return this._platformBridge.isStorageAvailable(e)}},{key:"get",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t){var n=t[this._platformBridge.platformId];if(n)return this.get(e,n,r)}var o=t;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.getDataFromStorage(e,o,r):Promise.reject()}},{key:"set",value:function(e,t,r){if(r){var n=r[this._platformBridge.platformId];if(n)return this.set(e,t,n)}var o=r;return o||(o=this.defaultType),this._platformBridge.isStorageAvailable(o)?this._platformBridge.setDataToStorage(e,t,o):Promise.reject()}},{key:"delete",value:function(e,t){if(t){var r=t[this._platformBridge.platformId];if(r)return this.delete(e,r)}var n=t;return n||(n=this.defaultType),this._platformBridge.isStorageAvailable(n)?this._platformBridge.deleteDataFromStorage(e,n):Promise.reject()}}],r&&Ge(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function Ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ve(n.key),n)}}function Ve(e){var t=function(e,t){if("object"!=xe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==xe(t)?t:String(t)}function We(e,t){Ze(e,t),t.add(e)}function ze(e,t,r){Ze(e,t),t.set(e,r)}function Ze(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ye(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Je(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,qe(e,t,"set"),r),r}function Ke(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,qe(e,t,"get"))}function qe(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Xe="started",Qe=new WeakMap,$e=new WeakMap,et=new WeakMap,tt=new WeakMap,rt=new WeakSet,nt=new WeakSet,ot=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),We(this,nt),We(this,rt),ze(this,Qe,{writable:!0,value:0}),ze(this,$e,{writable:!0,value:0}),ze(this,et,{writable:!0,value:"created"}),ze(this,tt,{writable:!0,value:0}),Je(this,Qe,t)}var t,r;return t=e,(r=[{key:"state",get:function(){return Ke(this,et)}},{key:"start",value:function(){var e=this;Ke(this,et)!==Xe&&(Je(this,$e,Ke(this,Qe)),Ye(this,rt,it).call(this,Xe),Je(this,tt,setInterval((function(){Je(e,$e,Ke(e,$e)-1),e.emit("time_left_changed",Ke(e,$e)),Ke(e,$e)<=0&&(Ye(e,nt,at).call(e),Ye(e,rt,it).call(e,"completed"))}),1e3)))}},{key:"stop",value:function(){Ye(this,nt,at).call(this),Ke(this,et)===Xe&&Ye(this,rt,it).call(this,"stopped")}}])&&Ue(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function it(e){Je(this,et,e),this.emit("state_changed",Ke(this,et))}function at(){clearInterval(Ke(this,tt)),Je(this,$e,0)}U().mixin(ot.prototype);const st=ot;function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lt(n.key),n)}}function lt(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ct(t)?t:String(t)}function ft(e,t){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ft(e,t)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function ht(e,t){mt(e,t),t.add(e)}function yt(e,t,r){mt(e,t),t.set(e,r)}function mt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function vt(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,St(e,t,"set"),r),r}function _t(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function gt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,St(e,t,"get"))}function St(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var bt=new WeakMap,Et=new WeakMap,Pt=new WeakMap,wt=new WeakMap,At=new WeakMap,Ot=new WeakMap,Tt=new WeakSet,kt=new WeakSet,Dt=new WeakSet,It=new WeakSet,Rt=new WeakSet,Lt=new WeakSet,jt=new WeakSet,Ct=new WeakSet,Nt=new WeakSet,Gt=new WeakSet,Bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ft(e,t)}(l,e);var t,r,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(o);if(c){var r=dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ct(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ht(pt(t=u.call(this,e)),Gt),ht(pt(t),Nt),ht(pt(t),Ct),ht(pt(t),jt),ht(pt(t),Lt),ht(pt(t),Rt),ht(pt(t),It),ht(pt(t),Dt),ht(pt(t),kt),ht(pt(t),Tt),yt(pt(t),bt,{writable:!0,value:s.HIDDEN}),yt(pt(t),Et,{writable:!0,value:i.CLOSED}),yt(pt(t),Pt,{writable:!0,value:void 0}),yt(pt(t),wt,{writable:!0,value:60}),yt(pt(t),At,{writable:!0,value:a.CLOSED}),yt(pt(t),Ot,{writable:!0,value:null}),t._platformBridge.on(n.BANNER_STATE_CHANGED,(function(e){return _t(pt(t),jt,Wt).call(pt(t),e)})),t._platformBridge.on(n.INTERSTITIAL_STATE_CHANGED,(function(e){e===i.CLOSED&&_t(pt(t),Rt,Ut).call(pt(t)),_t(pt(t),Ct,zt).call(pt(t),e)})),t._platformBridge.on(n.REWARDED_STATE_CHANGED,(function(e){return _t(pt(t),Nt,Zt).call(pt(t),e)})),_t(pt(t),Dt,Ft).call(pt(t)),t}return t=l,r=[{key:"isBannerSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.disable)&&this._platformBridge.isBannerSupported}},{key:"bannerState",get:function(){return gt(this,bt)}},{key:"isInterstitialSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.disable)&&this._platformBridge.isInterstitialSupported}},{key:"interstitialState",get:function(){return gt(this,Et)}},{key:"isRewardedSupported",get:function(){var e;return!0!==(null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.disable)&&this._platformBridge.isRewardedSupported}},{key:"rewardedPlacement",get:function(){return gt(this,Ot)}},{key:"rewardedState",get:function(){return gt(this,At)}},{key:"minimumDelayBetweenInterstitial",get:function(){return gt(this,wt)}},{key:"setMinimumDelayBetweenInterstitial",value:function(e){if(null===_t(this,kt,Ht).call(this,_t(this,It,xt).call(this))){var t=_t(this,kt,Ht).call(this,e);null!==t&&_t(this,Tt,Mt).call(this,t)}}},{key:"showBanner",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bottom",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.bannerState!==s.LOADING&&this.bannerState!==s.SHOWN)if(_t(this,jt,Wt).call(this,s.LOADING),this.isBannerSupported){var n,o=r;o||null!==(n=this._platformBridge.options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.banner)&&void 0!==n&&n.placementFallback&&(o=this._platformBridge.options.advertisement.banner.placementFallback);var i=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.banner)||void 0===e?void 0:e.placements,a=_t(this,Gt,Yt).call(this,o,i);this._platformBridge.showBanner(t,a)}else _t(this,jt,Wt).call(this,s.FAILED)}},{key:"hideBanner",value:function(){this.bannerState!==s.LOADING&&this.bannerState!==s.HIDDEN&&this.isBannerSupported&&this._platformBridge.hideBanner()}},{key:"preloadInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isInterstitialSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,i=_t(this,Gt,Yt).call(this,n,o);this._platformBridge.preloadInterstitial(i)}}},{key:"showInterstitial",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!_t(this,Lt,Vt).call(this))if(_t(this,Ct,zt).call(this,i.LOADING),this.isInterstitialSupported)if(this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&gt(this,Pt)&&gt(this,Pt).state===Xe)_t(this,Ct,zt).call(this,i.FAILED);else{var r,n=t;n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.interstitial)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.interstitial.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.interstitial)||void 0===e?void 0:e.placements,a=_t(this,Gt,Yt).call(this,n,o);this._platformBridge.showInterstitial(a)}else _t(this,Ct,zt).call(this,i.FAILED)}},{key:"preloadRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.isRewardedSupported){var r,n=t;n&&"string"==typeof n||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&(n=this._platformBridge.options.advertisement.rewarded.placementFallback);var o=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,i=_t(this,Gt,Yt).call(this,n,o);this._platformBridge.preloadRewarded(i)}}},{key:"showRewarded",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!_t(this,Lt,Vt).call(this)){var r;vt(this,Ot,t),gt(this,Ot)||null!==(r=this._platformBridge.options)&&void 0!==r&&null!==(r=r.advertisement)&&void 0!==r&&null!==(r=r.rewarded)&&void 0!==r&&r.placementFallback&&vt(this,Ot,this._platformBridge.options.advertisement.rewarded.placementFallback);var n=null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e||null===(e=e.rewarded)||void 0===e?void 0:e.placements,o=_t(this,Gt,Yt).call(this,gt(this,Ot),n);_t(this,Nt,Zt).call(this,a.LOADING),this.isRewardedSupported?this._platformBridge.showRewarded(o):_t(this,Nt,Zt).call(this,a.FAILED)}}},{key:"checkAdBlock",value:function(){return this._platformBridge.checkAdBlock()}}],r&&ut(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(Y);function Mt(e){vt(this,wt,e),gt(this,Pt)&&(gt(this,Pt).stop(),_t(this,Rt,Ut).call(this))}function Ht(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseInt(e,10);return Number.isNaN(t)?null:t}return null}function Ft(){var e=_t(this,It,xt).call(this);if(void 0!==e){var t=_t(this,kt,Ht).call(this,e);null!==t&&_t(this,Tt,Mt).call(this,t)}}function xt(){var e;return null===(e=this._platformBridge.options)||void 0===e||null===(e=e.advertisement)||void 0===e?void 0:e.minimumDelayBetweenInterstitial}function Ut(){gt(this,wt)>0&&this._platformBridge.isMinimumDelayBetweenInterstitialEnabled&&(vt(this,Pt,new st(gt(this,wt))),gt(this,Pt).start())}function Vt(){var e=[i.LOADING,i.OPENED].includes(gt(this,Et)),t=[a.LOADING,a.OPENED,a.REWARDED].includes(gt(this,At));return e||t}function Wt(e){gt(this,bt)!==e&&(vt(this,bt,e),this.emit(n.BANNER_STATE_CHANGED,gt(this,bt)))}function zt(e){gt(this,Et)!==e&&(vt(this,Et,e),this.emit(n.INTERSTITIAL_STATE_CHANGED,gt(this,Et)))}function Zt(e){gt(this,At)!==e&&(vt(this,At,e),this.emit(n.REWARDED_STATE_CHANGED,gt(this,At)))}function Yt(e,t){if(!e)return e;if(!t)return e;var r=t.find((function(t){return t.id===e}));return r&&r[this._platformBridge.platformId]?r[this._platformBridge.platformId]:e}U().mixin(Bt.prototype);const Jt=Bt;function Kt(e){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(e)}function qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Xt(n.key),n)}}function Xt(e){var t=function(e,t){if("object"!=Kt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kt(t)?t:String(t)}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qt(e,t)}function $t(e){return $t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$t(e)}const er=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$t(n);if(o){var r=$t(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isInviteFriendsSupported",get:function(){return this._platformBridge.isInviteFriendsSupported}},{key:"isJoinCommunitySupported",get:function(){return this._platformBridge.isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._platformBridge.isShareSupported}},{key:"isCreatePostSupported",get:function(){return this._platformBridge.isCreatePostSupported}},{key:"isAddToHomeScreenSupported",get:function(){return this._platformBridge.isAddToHomeScreenSupported}},{key:"isAddToFavoritesSupported",get:function(){return this._platformBridge.isAddToFavoritesSupported}},{key:"isRateSupported",get:function(){return this._platformBridge.isRateSupported}},{key:"isExternalLinksAllowed",get:function(){return this._platformBridge.isExternalLinksAllowed}},{key:"inviteFriends",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.inviteFriends(t)}return this._platformBridge.inviteFriends(e)}},{key:"joinCommunity",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.joinCommunity(t)}return this._platformBridge.joinCommunity(e)}},{key:"share",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.share(t)}return this._platformBridge.share(e)}},{key:"createPost",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.createPost(t)}return this._platformBridge.createPost(e)}},{key:"addToHomeScreen",value:function(){return this._platformBridge.addToHomeScreen()}},{key:"addToFavorites",value:function(){return this._platformBridge.addToFavorites()}},{key:"rate",value:function(){return this._platformBridge.rate()}}])&&qt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function tr(e){return tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(e)}function rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nr(n.key),n)}}function nr(e){var t=function(e,t){if("object"!=tr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tr(t)?t:String(t)}function or(e,t){return or=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},or(e,t)}function ir(e){return ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ir(e)}const ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&or(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(n);if(o){var r=ir(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===tr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.deviceType}}])&&rr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function sr(e){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sr(e)}function cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ur(n.key),n)}}function ur(e){var t=function(e,t){if("object"!=sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sr(t)?t:String(t)}function lr(e,t){return lr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lr(e,t)}function fr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}function dr(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function hr(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var yr=new WeakSet,mr=new WeakSet;function vr(e){var t;if(!e)return e;var r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return e;var n=r.find((function(t){return t.id===e}));return n&&n[this._platformBridge.platformId]?n[this._platformBridge.platformId]:e}function _r(e){var t,r=null===(t=this._platformBridge.options)||void 0===t?void 0:t.leaderboards;if(!r)return!1;var n=r.find((function(t){return t.id===e}));return!!n&&!0===n.isMain}const gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pr(n);if(o){var r=pr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return fr(e)}(this,e)});function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return dr(fr(e=i.call.apply(i,[this].concat(r))),mr),dr(fr(e),yr),e}return t=a,(r=[{key:"type",get:function(){return this._platformBridge.leaderboardsType}},{key:"setScore",value:function(e,t){var r=hr(this,yr,vr).call(this,e),n=hr(this,mr,_r).call(this,e);return this._platformBridge.leaderboardsSetScore(r,t,n)}},{key:"getEntries",value:function(e){var t=hr(this,yr,vr).call(this,e);return this._platformBridge.leaderboardsGetEntries(t)}},{key:"showNativePopup",value:function(e){var t=hr(this,yr,vr).call(this,e);return this._platformBridge.leaderboardsShowNativePopup(t)}}])&&cr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function br(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Er(n.key),n)}}function Er(e){var t=function(e,t){if("object"!=Sr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Sr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Sr(t)?t:String(t)}function Pr(e,t){return Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pr(e,t)}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wr(e)}const Ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wr(n);if(o){var r=wr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isPaymentsSupported}},{key:"purchase",value:function(e,t){return this._platformBridge.paymentsPurchase(e,t)}},{key:"getPurchases",value:function(){return this._platformBridge.paymentsGetPurchases()}},{key:"getCatalog",value:function(){return this._platformBridge.paymentsGetCatalog()}},{key:"consumePurchase",value:function(e){return this._platformBridge.paymentsConsumePurchase(e)}}])&&br(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Or(e){return Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Or(e)}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kr(n.key),n)}}function kr(e){var t=function(e,t){if("object"!=Or(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Or(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Or(t)?t:String(t)}function Dr(e,t){return Dr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Dr(e,t)}function Ir(e){return Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ir(e)}const Rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Dr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ir(n);if(o){var r=Ir(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isRemoteConfigSupported}},{key:"get",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.get(t)}return this._platformBridge.getRemoteConfig(e)}}])&&Tr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function jr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cr(n.key),n)}}function Cr(e){var t=function(e,t){if("object"!=Lr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Lr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lr(t)?t:String(t)}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function Gr(e){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Gr(e)}const Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gr(n);if(o){var r=Gr(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isClipboardSupported}},{key:"read",value:function(){return this._platformBridge.clipboardRead()}},{key:"write",value:function(e){return this._platformBridge.clipboardWrite(e)}}])&&jr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Hr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fr(n.key),n)}}function Fr(e){var t=function(e,t){if("object"!=Mr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mr(t)?t:String(t)}function xr(e,t){return xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xr(e,t)}function Ur(e){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ur(e)}const Vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ur(n);if(o){var r=Ur(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"isSupported",get:function(){return this._platformBridge.isAchievementsSupported}},{key:"isGetListSupported",get:function(){return this._platformBridge.isGetAchievementsListSupported}},{key:"isNativePopupSupported",get:function(){return this._platformBridge.isAchievementsNativePopupSupported}},{key:"unlock",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.unlock(t)}return this._platformBridge.unlockAchievement(e)}},{key:"getList",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.getList(t)}return this._platformBridge.getAchievementsList(e)}},{key:"showNativePopup",value:function(e){if(e){var t=e[this._platformBridge.platformId];if(t)return this.showNativePopup(t)}return this._platformBridge.showAchievementsNativePopup(e)}}])&&Hr(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(Y);function Wr(e){return Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(e)}function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(r),!0).forEach((function(t){Jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kr(n.key),n)}}function Jr(e,t,r){return(t=Kr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kr(e){var t=function(e,t){if("object"!=Wr(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Wr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wr(t)?t:String(t)}function qr(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var Xr=new WeakMap,Qr=function(){function t(e){var r,n,i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jr(this,"_isInitialized",!1),Jr(this,"_platformSdk",null),Jr(this,"_isPlayerAuthorized",!1),Jr(this,"_playerId",null),Jr(this,"_playerName",null),Jr(this,"_playerPhotos",[]),Jr(this,"_playerExtra",{}),Jr(this,"_visibilityState",null),Jr(this,"_localStorage",null),Jr(this,"_defaultStorageType",f.LOCAL_STORAGE),Jr(this,"_platformStorageCachedData",null),Jr(this,"_isBannerSupported",!1),Jr(this,"_paymentsPurchases",[]),i={writable:!0,value:{}},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,n=Xr),n.set(r,i);try{this._localStorage=window.localStorage}catch(e){}this._visibilityState=document.visibilityState,document.addEventListener("visibilitychange",(function(){a._setVisibilityState(document.visibilityState)})),window.addEventListener("blur",(function(){a._setVisibilityState(o.HIDDEN)})),window.addEventListener("focus",(function(){a._setVisibilityState(o.VISIBLE)})),e&&(this._options=Zr({},e))}var r,c;return r=t,(c=[{key:"options",get:function(){return this._options}},{key:"platformId",get:function(){return e.MOCK}},{key:"platformSdk",get:function(){return this._platformSdk}},{key:"platformLanguage",get:function(){var e=navigator.language;return"string"==typeof e?e.substring(0,2).toLowerCase():"en"}},{key:"platformPayload",get:function(){return new URL(window.location.href).searchParams.get("payload")}},{key:"platformTld",get:function(){return null}},{key:"isPlatformGetAllGamesSupported",get:function(){return!1}},{key:"isPlatformGetGameByIdSupported",get:function(){return!1}},{key:"isPlatformAudioEnabled",get:function(){return!0}},{key:"isPlatformPaused",get:function(){return!1}},{key:"visibilityState",get:function(){return this._visibilityState}},{key:"isPlayerAuthorizationSupported",get:function(){return!1}},{key:"isPlayerAuthorized",get:function(){return this._isPlayerAuthorized}},{key:"playerId",get:function(){return this._playerId}},{key:"playerName",get:function(){return this._playerName}},{key:"playerPhotos",get:function(){return this._playerPhotos}},{key:"playerExtra",get:function(){return this._playerExtra}},{key:"defaultStorageType",get:function(){return this._defaultStorageType}},{key:"isBannerSupported",get:function(){return this._isBannerSupported}},{key:"isInterstitialSupported",get:function(){return!1}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!1}},{key:"isInviteFriendsSupported",get:function(){return!1}},{key:"isJoinCommunitySupported",get:function(){return!1}},{key:"isShareSupported",get:function(){return!1}},{key:"isCreatePostSupported",get:function(){return!1}},{key:"isAddToHomeScreenSupported",get:function(){return!1}},{key:"isAddToFavoritesSupported",get:function(){return!1}},{key:"isRateSupported",get:function(){return!1}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"deviceType",get:function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if(/android|webos|iphone|ipod|blackberry|iemobile|opera mini/i.test(e))return p.MOBILE;if(/ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP)))/.test(e))return p.TABLET}return p.DESKTOP}},{key:"isPaymentsSupported",get:function(){return!1}},{key:"leaderboardsType",get:function(){return h}},{key:"isRemoteConfigSupported",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!0}},{key:"isAchievementsSupported",get:function(){return!1}},{key:"isGetAchievementsListSupported",get:function(){return!1}},{key:"isAchievementsNativePopupSupported",get:function(){return!1}},{key:"initialize",value:function(){return Promise.resolve()}},{key:"sendMessage",value:function(){return Promise.resolve()}},{key:"getServerTime",value:function(){return new Promise((function(e,t){fetch("https://playgama.com/api/v1/timestamp/now").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){e(1e3*t.timestamp)})).catch((function(){t()}))}))}},{key:"getAllGames",value:function(){return Promise.reject()}},{key:"getGameById",value:function(){return Promise.reject()}},{key:"authorizePlayer",value:function(){return Promise.reject()}},{key:"isStorageSupported",value:function(e){switch(e){case f.LOCAL_STORAGE:return null!==this._localStorage;case f.PLATFORM_INTERNAL:default:return!1}}},{key:"isStorageAvailable",value:function(e){switch(e){case f.LOCAL_STORAGE:return null!==this._localStorage;case f.PLATFORM_INTERNAL:default:return!1}}},{key:"getDataFromStorage",value:function(e,t,r){if(t===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=[],o=0;o<e.length;o++)n.push(this._getDataFromLocalStorage(e[o],r));return Promise.resolve(n)}var i=this._getDataFromLocalStorage(e,r);return Promise.resolve(i)}return Promise.reject(g)}return Promise.reject(g)}},{key:"setDataToStorage",value:function(e,t,r){if(r===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var n=0;n<e.length;n++)this._setDataToLocalStorage(e[n],t[n]);return Promise.resolve()}return this._setDataToLocalStorage(e,t),Promise.resolve()}return Promise.reject(g)}return Promise.reject(g)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===f.LOCAL_STORAGE){if(this._localStorage){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this._deleteDataFromLocalStorage(e[r]);return Promise.resolve()}return this._deleteDataFromLocalStorage(e),Promise.resolve()}return Promise.reject(g)}return Promise.reject(g)}},{key:"showBanner",value:function(){this._setBannerState(s.FAILED)}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN)}},{key:"preloadInterstitial",value:function(){}},{key:"showInterstitial",value:function(){this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){}},{key:"showRewarded",value:function(){this._setRewardedState(a.FAILED)}},{key:"checkAdBlock",value:function(){var e=document.createElement("div");e.className="textads banner-ads banner_ads ad-unit ad-zone ad-space adsbox",e.style.position="absolute",e.style.left="-9999px",e.style.width="1px",e.style.height="1px",document.body.appendChild(e);var t={method:"HEAD",mode:"no-cors"};return new Promise((function(r){fetch("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t).then((function(t){t.redirected?r(t.redirected):window.setTimeout((function(){var t,n=0===e.offsetHeight||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display);r(n),e.remove()}),100)})).catch((function(){r(!0)}))}))}},{key:"inviteFriends",value:function(){return Promise.reject()}},{key:"joinCommunity",value:function(){return Promise.reject()}},{key:"share",value:function(){return Promise.reject()}},{key:"createPost",value:function(){return Promise.reject()}},{key:"addToHomeScreen",value:function(){return Promise.reject()}},{key:"addToFavorites",value:function(){return Promise.reject()}},{key:"rate",value:function(){return Promise.reject()}},{key:"leaderboardsSetScore",value:function(){return Promise.reject()}},{key:"leaderboardsGetEntries",value:function(){return Promise.reject()}},{key:"leaderboardsShowNativePopup",value:function(){return Promise.reject()}},{key:"paymentsPurchase",value:function(e){if(this.isPaymentsSupported){var t={id:e};return this._paymentsPurchases.push(t),Promise.resolve(t)}return Promise.reject()}},{key:"paymentsConsumePurchase",value:function(e){if(this.isPaymentsSupported){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));return t<0?Promise.reject():(this._paymentsPurchases.splice(t,1),Promise.resolve({id:e}))}return Promise.reject()}},{key:"paymentsGetCatalog",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsGetProductsPlatformData()):Promise.reject()}},{key:"paymentsGetPurchases",value:function(){return this.isPaymentsSupported?Promise.resolve(this._paymentsPurchases):Promise.reject()}},{key:"getRemoteConfig",value:function(){return Promise.reject()}},{key:"clipboardRead",value:function(){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.readText():Promise.reject()}},{key:"clipboardWrite",value:function(e){return window.navigator&&window.navigator.clipboard?window.navigator.clipboard.writeText(e):Promise.reject()}},{key:"unlockAchievement",value:function(){return Promise.reject()}},{key:"getAchievementsList",value:function(){return Promise.reject()}},{key:"showAchievementsNativePopup",value:function(){return Promise.reject()}},{key:"_getDataFromLocalStorage",value:function(e,t){var r=this._localStorage.getItem(e);if(t&&"string"==typeof r)try{r=JSON.parse(r)}catch(e){}return r}},{key:"_setDataToLocalStorage",value:function(e,t){this._localStorage.setItem(e,"object"===Wr(t)?JSON.stringify(t):t)}},{key:"_deleteDataFromLocalStorage",value:function(e){this._localStorage.removeItem(e)}},{key:"_setVisibilityState",value:function(e){this._visibilityState!==e&&(this._visibilityState=e,this.emit(n.VISIBILITY_STATE_CHANGED,this._visibilityState))}},{key:"_setBannerState",value:function(e){this.emit(n.BANNER_STATE_CHANGED,e)}},{key:"_setInterstitialState",value:function(e){this.emit(n.INTERSTITIAL_STATE_CHANGED,e)}},{key:"_setRewardedState",value:function(e){this.emit(n.REWARDED_STATE_CHANGED,e)}},{key:"_setAudioState",value:function(e){this.emit(n.AUDIO_STATE_CHANGED,e)}},{key:"_setPauseState",value:function(e){this.emit(n.PAUSE_STATE_CHANGED,e)}},{key:"_createPromiseDecorator",value:function(e){var t=new F;return qr(this,Xr)[e]=t,t}},{key:"_getPromiseDecorator",value:function(e){return qr(this,Xr)[e]}},{key:"_resolvePromiseDecorator",value:function(e,t){qr(this,Xr)[e]&&(qr(this,Xr)[e].resolve(t),delete qr(this,Xr)[e])}},{key:"_rejectPromiseDecorator",value:function(e,t){qr(this,Xr)[e]&&(qr(this,Xr)[e].reject(t),delete qr(this,Xr)[e])}},{key:"_paymentsGetProductsPlatformData",value:function(){var e=this;return this._options.payments?this._options.payments.map((function(t){var r=Zr({},t[e.platformId]);return r.platformProductId=r.id,r.id=t.id,r})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));if(!r)return null;var n=Zr({},r[this.platformId]);return n.platformProductId=n.id,n.id=r.id,n}},{key:"_paymentsGenerateTransactionId",value:function(e){return"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,10))}},{key:"_advertisementShowErrorPopup",value:function(e){var t,r=this;return(null===(t=this._options)||void 0===t||null===(t=t.advertisement)||void 0===t?void 0:t.useBuiltInErrorPopup)?function(e){if(!document.getElementById("bridge-info-popup-styles")){var t=document.createElement("style");t.id="bridge-info-popup-styles",t.textContent="\n            #bridge-info-popup-overlay {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background-color: rgba(0, 0, 0, 0.5);\n                z-index: 9998;\n                display: none;\n            }\n\n            #bridge-info-popup {\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n                background-color: #2E3C75;\n                color: #fff;\n                padding: 20px;\n                z-index: 9999;\n                display: none;\n                border-radius: 10px;\n                box-shadow: 0 0 10px #2E3C75;\n                font-size: 24px;\n                font-family: 'Roboto', sans-serif;\n                text-align: center;\n                min-width: 250px;\n                max-width: 30%;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n            }\n\n            #bridge-info-popup-button {\n                margin-top: 24px;\n                width: 150px;\n                background-color: rgba(255, 255, 255, 0.2);\n                color: #fff;\n                border: none;\n                font-size: 24px;\n                padding: 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                font-family: 'Roboto', sans-serif;\n                display: block;\n            }\n\n            #bridge-info-popup-button:hover {\n                background-color: rgba(255, 255, 255, 0.3);\n            }",document.head.appendChild(t)}var r=document.getElementById("bridge-info-popup-overlay");r||((r=document.createElement("div")).id="bridge-info-popup-overlay",document.body.appendChild(r));var n=document.getElementById("bridge-info-popup");n||((n=document.createElement("div")).id="bridge-info-popup"),n.innerText="Oops! It looks like you closed the ad too early, or it isn't available right now.";var o=document.getElementById("bridge-info-popup-button");return o||((o=document.createElement("button")).id="bridge-info-popup-button",o.innerText="OK",n.appendChild(o)),document.body.appendChild(n),new Promise((function(e){o.onclick=function(){n.style.display="none",r.style.display="none",e()},r.style.display="block",n.style.display="flex"}))}().then((function(){e?r._setRewardedState(a.FAILED):r._setInterstitialState(i.FAILED)})):(e?this._setRewardedState(a.FAILED):this._setInterstitialState(i.FAILED),Promise.resolve())}},{key:"_playerApplyGuestData",value:function(){var e=function(){var e,t="bridge_player_guest_id";try{e=localStorage.getItem(t)}catch(e){}if(!e){var r=Array.from({length:8},(function(){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))})).join(""),n=Date.now().toString(36);e="".concat(r).concat(n);try{localStorage.setItem(t,e)}catch(e){}}return{id:e,name:"Guest ".concat(e)}}();this._playerId=e.id,this._playerName=e.name}}])&&Yr(r.prototype,c),Object.defineProperty(r,"prototype",{writable:!1}),t}();U().mixin(Qr.prototype);const $r=Qr;function en(e){return en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(e)}function tn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cn(n.key),n)}}function rn(){return rn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=an(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},rn.apply(this,arguments)}function nn(e,t){return nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},nn(e,t)}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return an=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},an(e)}function sn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cn(e){var t=function(e,t){if("object"!=en(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=en(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==en(t)?t:String(t)}function un(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ln(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,fn(e,t,"get"))}function fn(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var pn=new WeakMap,dn=new WeakSet;function hn(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"result",i=this._getPromiseDecorator(e);return i||(i=this._createPromiseDecorator(e),this._platformSdk.send(t,n).then((function(t){t[o]?r._resolvePromiseDecorator(e):r._rejectPromiseDecorator(e)})).catch((function(t){r._rejectPromiseDecorator(e,t)}))),i.promise}const yn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nn(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=an(o);if(c){var r=an(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===en(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return on(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return sn(t=on(e=u.call.apply(u,[this].concat(o))),r=dn),r.add(t),function(e,t,r){(t=cn(t))in e?Object.defineProperty(e,t,{value:true,enumerable:!0,configurable:!0,writable:!0}):e[t]=true}(on(e),"_isBannerSupported"),function(e,t,r){sn(e,t),t.set(e,{writable:!0,value:void 0})}(on(e),pn),e}return r=l,(n=[{key:"platformId",get:function(){return e.VK}},{key:"platformLanguage",get:function(){var e=new URL(window.location.href);if(e.searchParams.has("language")){var t=e.searchParams.get("language"),r=0;try{r=parseInt(t,10)}catch(e){r=0}switch(r){case 0:default:return"ru";case 1:return"uk";case 2:return"be";case 3:return"en"}}return rn(an(l.prototype),"platformLanguage",this)}},{key:"platformPayload",get:function(){var e=new URL(window.location.href);return e.searchParams.has("hash")?e.searchParams.get("hash"):rn(an(l.prototype),"platformPayload",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(ln(this,pn)){case"html5_ios":case"html5_android":case"html5_mobile":return p.MOBILE;case"web":return p.DESKTOP;default:return rn(an(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPlayerAuthorized",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return"html5_android"===ln(this,pn)}},{key:"isAddToFavoritesSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r,n,o=this._getPromiseDecorator(v.INITIALIZE);if(!o){o=this._createPromiseDecorator(v.INITIALIZE);var i=new URL(window.location.href);i.searchParams.has("platform")&&(t=this,r=pn,n=i.searchParams.get("platform"),function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t,fn(t,r,"set"),n)),_e("https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js").then((function(){be("vkBridge").then((function(){e._platformSdk=window.vkBridge,e._platformSdk.send("VKWebAppInit").then((function(){e._platformSdk.send("VKWebAppGetUserInfo").then((function(t){t&&(e._playerId=t.id,e._playerName="".concat(t.first_name," ").concat(t.last_name),t.photo_100&&e._playerPhotos.push(t.photo_100),t.photo_200&&e._playerPhotos.push(t.photo_200),t.photo_max_orig&&e._playerPhotos.push(t.photo_max_orig))})).finally((function(){e._isInitialized=!0,e._defaultStorageType=f.PLATFORM_INTERNAL,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))}return o.promise}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||rn(an(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||rn(an(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.send("VKWebAppStorageGet",{keys:i}).then((function(n){if(Array.isArray(e)){var o=[];return i.forEach((function(e){var t=n.keys.findIndex((function(t){return t.key===e}));if(t<0)o.push(null);else if(""!==n.keys[t].value){var i=n.keys[t].value;if(r)try{i=JSON.parse(n.keys[t].value)}catch(e){}o.push(i)}else o.push(null)})),void t(o)}if(""!==n.keys[0].value){var a=n.keys[0].value;if(r)try{a=JSON.parse(n.keys[0].value)}catch(e){}t(a)}else t(null)})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?o(e.error_data.error_reason):o()}))})):rn(an(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===f.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a={key:e[i],value:t[i]};"string"!=typeof t[i]&&(a.value=JSON.stringify(t[i])),o.push(this._platformSdk.send("VKWebAppStorageSet",a))}return Promise.all(o)}var s={key:e,value:t};return"string"!=typeof t&&(s.value=JSON.stringify(t)),new Promise((function(e,t){n._platformSdk.send("VKWebAppStorageSet",s).then((function(){e()})).catch((function(e){e&&e.error_data&&e.error_data.error_reason?t(e.error_data.error_reason):t()}))}))}return rn(an(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){for(var r=[],n=0;n<e.length;n++)r.push(this.setDataToStorage(e[n],"",t));return Promise.all(r)}return this.setDataToStorage(e,"",t)}return rn(an(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this;this._platformSdk.send("VKWebAppShowBannerAd",{banner_location:e}).then((function(e){e.result?t._setBannerState(s.SHOWN):t._setBannerState(s.FAILED)})).catch((function(){t._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.send("VKWebAppHideBannerAd").then((function(t){t.result&&e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"interstitial"}).then((function(t){t.result&&e._setInterstitialState(i.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"interstitial"}).then((function(t){e._setInterstitialState(t.result?i.CLOSED:i.FAILED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.send("VKWebAppCheckNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result&&e._setRewardedState(a.OPENED)})).finally((function(){e._platformSdk.send("VKWebAppShowNativeAds",{ad_format:"reward",use_waterfall:!0}).then((function(t){t.result?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}))}},{key:"inviteFriends",value:function(){return un(this,dn,hn).call(this,v.INVITE_FRIENDS,"VKWebAppShowInviteBox",{},"success")}},{key:"joinCommunity",value:function(e){if(!e||!e.groupId)return Promise.reject();var t=e.groupId;return"string"==typeof t&&(t=parseInt(t,10),Number.isNaN(t))?Promise.reject():un(this,dn,hn).call(this,v.JOIN_COMMUNITY,"VKWebAppJoinGroup",{group_id:t}).then((function(){window.open("https://vk.com/public".concat(t))}))}},{key:"share",value:function(e){var t={};return e&&e.link&&(t.link=e.link),un(this,dn,hn).call(this,v.SHARE,"VKWebAppShare",t,"type")}},{key:"addToHomeScreen",value:function(){return this.isAddToHomeScreenSupported?un(this,dn,hn).call(this,v.ADD_TO_HOME_SCREEN,"VKWebAppAddToHomeScreen"):Promise.reject()}},{key:"addToFavorites",value:function(){return un(this,dn,hn).call(this,v.ADD_TO_FAVORITES,"VKWebAppAddToFavorites")}},{key:"clipboardWrite",value:function(e){return un(this,dn,hn).call(this,v.CLIPBOARD_WRITE,"VKWebAppCopyText",{text:e})}}])&&tn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}($r);function mn(e){return mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(e)}function vn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Sn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sn(n.key),n)}}function Sn(e){var t=function(e,t){if("object"!=mn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==mn(t)?t:String(t)}function bn(){return bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},bn.apply(this,arguments)}function En(e,t){return En=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},En(e,t)}function Pn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wn(e){return wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wn(e)}function An(e,t,r){On(e,t),t.set(e,r)}function On(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Tn(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function kn(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,In(e,t,"set"),r),r}function Dn(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,In(e,t,"get"))}function In(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Rn=new WeakMap,Ln=new WeakMap,jn=new WeakMap,Cn=new WeakMap,Nn=new WeakSet;function Gn(){var e=this;return new Promise((function(t){var r=!1;e._options&&e._options.useSignedData&&(r=e._options.useSignedData),e._platformSdk.getPlayer({signed:r}).then((function(t){e._playerId=t.getUniqueID(),e._isPlayerAuthorized=t.isAuthorized(),e._defaultStorageType=e._isPlayerAuthorized?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE;var n=t.getName();""!==n&&(e._playerName=n),e._playerPhotos=[];var o=t.getPhoto("small"),i=t.getPhoto("medium"),a=t.getPhoto("large");return o&&e._playerPhotos.push(o),i&&e._playerPhotos.push(i),a&&e._playerPhotos.push(a),e._playerExtra={payingStatus:t.getPayingStatus()},r&&(e._playerExtra.signature=t.signature),kn(e,Ln,t),t.getData()})).then((function(t){e._platformStorageCachedData=t})).finally((function(){t()}))}))}const Bn=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&En(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wn(o);if(c){var r=wn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pn(e)}(this,e)});function l(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return On(t=Pn(e=u.call.apply(u,[this].concat(o))),r=Nn),r.add(t),An(Pn(e),Rn,{writable:!0,value:!1}),An(Pn(e),Ln,{writable:!0,value:null}),An(Pn(e),jn,{writable:!0,value:null}),An(Pn(e),Cn,{writable:!0,value:null}),e}return r=l,(n=[{key:"platformId",get:function(){return e.YANDEX}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.lang.toLowerCase():bn(wn(l.prototype),"platformLanguage",this)}},{key:"platformTld",get:function(){return this._platformSdk?this._platformSdk.environment.i18n.tld.toLowerCase():bn(wn(l.prototype),"platformTld",this)}},{key:"isPlatformGetAllGamesSupported",get:function(){return!0}},{key:"isPlatformGetGameByIdSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.deviceInfo.type){case p.DESKTOP:return p.DESKTOP;case p.MOBILE:return p.MOBILE;case p.TABLET:return p.TABLET;case p.TV:return p.TV;default:return bn(wn(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isAddToHomeScreenSupported",get:function(){return Dn(this,Rn)}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return y}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isRemoteConfigSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("/sdk.js").then((function(){be("YaGames","init").then((function(){window.YaGames.init().then((function(t){var r;e._platformSdk=t,kn(e,Cn,Tn(e,Nn,Gn).call(e));var n=null===(r=e._platformSdk.features.PluginEngineDataReporterAPI)||void 0===r?void 0:r.report({engineName:"",engineVersion:"",pluginName:"playgama-bridge",pluginVersion:"1.26.0-preview.1"}),o=e._platformSdk.shortcut.canShowPrompt().then((function(t){kn(e,Rn,t.canShow)})),i=new Promise((function(e){setTimeout(e,1e3)})),a=Promise.race([o,i]),c=e._platformSdk.getPayments().then((function(t){kn(e,jn,t)}));e._isBannerSupported=!0;var u=e._platformSdk.adv.getBannerAdvStatus().then((function(t){t.stickyAdvIsShowing&&e._setBannerState(s.SHOWN)}));Promise.all([n,a,c,u]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_READY:var t;return null===(t=this._platformSdk.features.LoadingAPI)||void 0===t||t.ready(),Promise.resolve();case d.GAMEPLAY_STARTED:var r;return null===(r=this._platformSdk.features.GameplayAPI)||void 0===r||r.start(),Promise.resolve();case d.GAMEPLAY_STOPPED:var n;return null===(n=this._platformSdk.features.GameplayAPI)||void 0===n||n.stop(),Promise.resolve();default:return bn(wn(l.prototype),"sendMessage",this).call(this,e)}}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.serverTime())}))}},{key:"getAllGames",value:function(){var e=this;return new Promise((function(t,r){e._platformSdk.features.GamesAPI.getAllGames().then((function(e){var r=e.games;t(r)})).catch(r)}))}},{key:"getGameById",value:function(e){var t=this;return null!=e&&e.gameId?new Promise((function(r,n){t._platformSdk.features.GamesAPI.getGameByID(null==e?void 0:e.gameId).then((function(e){var t=e.game,n=e.isAvailable;r(_n(_n({},t),{},{isAvailable:n}))})).catch(n)})):Promise.reject(new Error("Provide gameId"))}},{key:"authorizePlayer",value:function(){var e=this,t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?(kn(this,Cn,Tn(this,Nn,Gn).call(this)),Dn(this,Cn).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))):this._platformSdk.auth.openAuthDialog().then((function(){kn(e,Cn,Tn(e,Nn,Gn).call(e)),Dn(e,Cn).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||bn(wn(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:bn(wn(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?Dn(this,Cn).then((function(){return new Promise((function(t){if(Array.isArray(e)){for(var r=[],o=0;o<e.length;o++){var i=void 0===n._platformStorageCachedData[e[o]]?null:n._platformStorageCachedData[e[o]];r.push(i)}t(r)}else t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}))})):Promise.reject():bn(wn(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?Dn(this,Cn).then((function(){return new Promise((function(r,o){var i=null!==n._platformStorageCachedData?_n({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;Dn(n,Ln).setData(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))}))})):Promise.reject():bn(wn(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?Dn(this,Cn).then((function(){return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?_n({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];Dn(r,Ln).setData(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}))})):Promise.reject():bn(wn(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(){var e=this;this._platformSdk.adv.showBannerAdv().then((function(t){t.stickyAdvIsShowing?e._setBannerState(s.SHOWN):e._setBannerState(s.FAILED)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.adv.hideBannerAdv().then((function(t){t.stickyAdvIsShowing||e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.adv.showFullscreenAdv({callbacks:{onOpen:function(){e._setInterstitialState(i.OPENED)},onClose:function(t){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)},onError:function(e){console.error(e)}}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.adv.showRewardedVideo({callbacks:{onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}}})}},{key:"checkAdBlock",value:function(){return new Promise((function(e){e(!1)}))}},{key:"addToHomeScreen",value:function(){var e=this;if(!this.isAddToHomeScreenSupported)return Promise.reject();var t=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return t||(t=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._platformSdk.shortcut.showPrompt().then((function(t){"accepted"!==t.outcome?e._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN):e._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN)})).catch((function(t){e._rejectPromiseDecorator(v.ADD_TO_HOME_SCREEN,t)}))),t.promise}},{key:"rate",value:function(){var e=this,t=this._getPromiseDecorator(v.RATE);return t||(t=this._createPromiseDecorator(v.RATE),this._platformSdk.feedback.canReview().then((function(t){t.value?e._platformSdk.feedback.requestReview().then((function(t){t.feedbackSent?e._resolvePromiseDecorator(v.RATE):e._rejectPromiseDecorator(v.RATE)})).catch((function(t){e._rejectPromiseDecorator(v.RATE,t)})):e._rejectPromiseDecorator(v.RATE,t.reason)})).catch((function(t){e._rejectPromiseDecorator(v.RATE,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);return n||(n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE),this._platformSdk.leaderboards.setScore(e,t).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))),n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={quantityTop:20};this._isPlayerAuthorized&&(n.includeUser=!0,n.quantityAround=3),this._platformSdk.leaderboards.getEntries(e,n).then((function(e){var r;r=e&&e.entries.length>0?e.entries.map((function(e){return{id:e.player.uniqueID,name:e.player.publicName,score:e.score,rank:e.rank,photo:e.player.getAvatarSrc("large")}})):[],t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this;if(!Dn(this,jn))return Promise.reject();var r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),Dn(this,jn).purchase(r).then((function(r){var n=_n({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this;if(!Dn(this,jn))return Promise.reject();var r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),Dn(this,jn).consumePurchase(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this;if(!Dn(this,jn))return Promise.reject();var t=this._paymentsGetProductsPlatformData(),r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),Dn(this,jn).getCatalog().then((function(r){var n=t.map((function(e){var t,n=r.find((function(t){return t.id===e.id}));return{id:e.id,title:n.title,description:n.description,imageURI:n.imageURI,price:n.price,priceCurrencyCode:n.priceCurrencyCode,priceValue:n.priceValue,priceCurrencyImage:null===(t=n.getPriceCurrencyImage)||void 0===t?void 0:t.call(n,"medium")}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this;if(!Dn(this,jn))return Promise.reject();var t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),Dn(this,jn).getPurchases().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=_n({id:r.find((function(t){return t.id===e.productID})).id},e.purchaseData);return delete t.productID,t})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"getRemoteConfig",value:function(e){var t=this;if(!this._platformSdk)return Promise.reject();var r=e;r||(r={}),r.clientFeatures||(r.clientFeatures=[]);var n=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);return n||(n=this._createPromiseDecorator(v.GET_REMOTE_CONFIG),this._platformSdk.getFlags(r).then((function(e){t._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,e)})).catch((function(e){t._rejectPromiseDecorator(v.GET_REMOTE_CONFIG,e)}))),n.promise}},{key:"clipboardWrite",value:function(e){var t=this,r=this._getPromiseDecorator(v.CLIPBOARD_WRITE);return r||(r=this._createPromiseDecorator(v.CLIPBOARD_WRITE),this._platformSdk.clipboard.writeText(e).then((function(){t._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0)})).catch((function(e){t._rejectPromiseDecorator(v.CLIPBOARD_WRITE,e)}))),r.promise}}])&&gn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}($r);function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function Hn(){Hn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Mn(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Mn(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Fn(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function xn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Fn(i,n,o,a,s,"next",e)}function s(e){Fn(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Un(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=zn(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Un(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zn(n.key),n)}}function zn(e){var t=function(e,t){if("object"!=Mn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Mn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Mn(t)?t:String(t)}function Zn(){return Zn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kn(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Zn.apply(this,arguments)}function Yn(e,t){return Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yn(e,t)}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kn(e){return Kn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kn(e)}function qn(e,t){Qn(e,t),t.add(e)}function Xn(e,t,r){Qn(e,t),t.set(e,r)}function Qn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $n(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function eo(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,ro(e,t,"set"),r),r}function to(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ro(e,t,"get"))}function ro(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var no="https://cdn.xsolla.net/payments-bucket-prod/embed/1.5.0/widget.min.js",oo="https://store.xsolla.com/api/v2/project/",io=new WeakMap,ao=new WeakMap,so=new WeakMap,co=new WeakSet,uo=new WeakSet,lo=new WeakSet,fo=new WeakSet;function po(){var e=this;return to(this,ao)?new Promise((function(t,r){e._platformSdk.user.getUser().then((function(n){if(!n)return e._playerApplyGuestData(),void r();e._isPlayerAuthorized=!0,n.username&&(e._playerName=n.username),n.profilePictureUrl&&(e._playerPhotos=[n.profilePictureUrl]),e._playerExtra=n,e._options.useUserToken?e._platformSdk.user.getUserToken().then((function(t){e._playerExtra.jwt=t})).finally((function(){t()})):t()})).catch((function(t){e._playerApplyGuestData(),r(t)}))})):(this._playerApplyGuestData(),Promise.reject())}function ho(){return yo.apply(this,arguments)}function yo(){return(yo=xn(Hn().mark((function e(){return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.XPayStationWidget){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_e(no);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(){return vo.apply(this,arguments)}function vo(){return(vo=xn(Hn().mark((function e(){return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._platformSdk.user.getXsollaUserToken();case 2:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function _o(e,t,r){return go.apply(this,arguments)}function go(){return(go=xn(Hn().mark((function e(t,r,n){var o;return Hn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(oo,"/").concat(t,"/order/").concat(r),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((o=e.sent).ok){e.next=5;break}throw new Error("Xsolla order HTTP ".concat(o.status));case 5:return e.abrupt("return",o.json());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const So=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yn(e,t)}(h,t);var r,n,o,u,l=(o=h,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Kn(o);if(u){var r=Kn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Mn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jn(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qn(Jn(e=l.call.apply(l,[this].concat(r))),fo),qn(Jn(e),lo),qn(Jn(e),uo),qn(Jn(e),co),Xn(Jn(e),io,{writable:!0,value:!1}),Xn(Jn(e),ao,{writable:!0,value:!1}),Xn(Jn(e),so,{writable:!0,value:{adStarted:function(){to(Jn(e),io)?e._setRewardedState(a.OPENED):e._setInterstitialState(i.OPENED)},adFinished:function(){to(Jn(e),io)?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setInterstitialState(i.CLOSED)},adError:function(){to(Jn(e),io)?e._setRewardedState(a.FAILED):e._setInterstitialState(i.FAILED)}}}),e}return r=h,(n=[{key:"platformId",get:function(){return e.CRAZY_GAMES}},{key:"platformLanguage",get:function(){return to(this,ao)?this._platformSdk.user.systemInfo.countryCode.toLowerCase():Zn(Kn(h.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return to(this,ao)}},{key:"isPaymentsSupported",get:function(){return!0===to(this,ao)}},{key:"deviceType",get:function(){if(to(this,ao)){var e=this._platformSdk.user.systemInfo.device.type.toLowerCase();if([p.DESKTOP,p.MOBILE,p.TABLET].includes(e))return e}return Zn(Kn(h.prototype),"deviceType",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://sdk.crazygames.com/crazygames-sdk-v3.js").then((function(){be("CrazyGames","SDK","init").then((function(){e._platformSdk=window.CrazyGames.SDK,e._defaultStorageType=f.PLATFORM_INTERNAL,e._isBannerSupported=!0,e._platformSdk.init().then((function(){eo(e,ao,e._platformSdk.user.isUserAccountAvailable);var t=$n(e,co,po).call(e);e.options.xsollaProjectId&&$n(e,uo,ho).call(e),Promise.all([t]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(!to(this,ao))return Promise.reject();if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.user.showAuthPrompt().then((function(){$n(e,co,po).call(e).then((function(){e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(t){e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t)}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.IN_GAME_LOADING_STARTED:return this._platformSdk.game.loadingStart(),Promise.resolve();case d.IN_GAME_LOADING_STOPPED:return this._platformSdk.game.loadingStop(),Promise.resolve();case d.GAMEPLAY_STARTED:return this._platformSdk.game.gameplayStart(),Promise.resolve();case d.GAMEPLAY_STOPPED:return this._platformSdk.game.gameplayStop(),Promise.resolve();case d.PLAYER_GOT_ACHIEVEMENT:return this._platformSdk.game.happytime(),Promise.resolve();default:return Zn(Kn(h.prototype),"sendMessage",this).call(this,e)}}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Zn(Kn(h.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Zn(Kn(h.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t){if(Array.isArray(e)){var o=[];return e.forEach((function(e){var t=n._platformSdk.data.getItem(e);if(r)try{t=JSON.parse(t)}catch(e){}o.push(t)})),void t(o)}var i=n._platformSdk.data.getItem(e);if(r)try{i=JSON.parse(i)}catch(e){}t(i)})):Zn(Kn(h.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r){if(Array.isArray(e)){for(var o=0;o<e.length;o++){var i=t[o];"string"!=typeof t[o]&&(i=JSON.stringify(t[o])),n._platformSdk.data.setItem(e[o],i)}r()}else{var a=t;"string"!=typeof t&&(a=JSON.stringify(t)),n._platformSdk.data.setItem(e,a),r()}})):Zn(Kn(h.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?Array.isArray(e)?(e.forEach((function(e){return r._platformSdk.data.removeItem(e)})),Promise.resolve()):(this._platformSdk.data.removeItem(e),Promise.resolve()):Zn(Kn(h.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(c);r||(r=ge(e)),r.style.display="block",this._platformSdk.banner.requestResponsiveBanner([c]).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(c);e&&(e.style.display="none"),this._platformSdk.banner.clearAllBanners(),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){eo(this,io,!1),this._platformSdk.ad.requestAd("midgame",to(this,so))}},{key:"showRewarded",value:function(){eo(this,io,!0),this._platformSdk.ad.requestAd("rewarded",to(this,so))}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ad.hasAdblock().then((function(e){t(e)}))}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=r.platformProductId||r.id,o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),$n(this,uo,ho).call(this).then((function(){return $n(t,lo,mo).call(t)})).then((function(e){var o=window.XPayStationWidget;if(!o)throw new Error("Xsolla Pay Station widget not loaded");o.init({access_token:e,sandbox:t.options.isSandbox||!1,childWindow:{target:"_blank"},settings:{external_id:n}});var i=!1;o.on(o.eventTypes.STATUS,(function(o,a){try{var s=a&&a.paymentInfo||{};if(s.status&&/done|charged|success/i.test(String(s.status))){var c=s.order_id||s.invoice;if(!c)return;$n(t,fo,_o).call(t,t.options.xsollaProjectId,c,e).then((function(e){t._platformSdk.analytics.trackOrder("xsolla",e);var o=Vn({id:r.id,sku:n,orderId:c},e);t._paymentsPurchases.push(o),i||(i=!0,t._resolvePromiseDecorator(v.PURCHASE,o))})).catch((function(e){i||t._rejectPromiseDecorator(v.PURCHASE,e)}))}}catch(e){i||t._rejectPromiseDecorator(v.PURCHASE,e)}})),o.on("close",(function(){i||t._rejectPromiseDecorator(v.PURCHASE,new Error("Purchase canceled/closed"))})),o.open()})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),$n(this,lo,mo).call(this).then((function(t){return fetch("".concat(oo,"/").concat(e.options.xsollaProjectId,"/items?limit=50"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla catalog HTTP ".concat(e.status));return e.json()})).then((function(r){var n=new Map((r.items||[]).map((function(e){return[e.sku,e]}))),o=t.map((function(e){var t,r,o,i,a,s,c,u,l,f,p=e.platformProductId||e.id,d=n.get(p);return{id:e.id,name:null!==(t=null!==(r=null==d?void 0:d.name)&&void 0!==r?r:e.name)&&void 0!==t?t:e.id,description:null!==(o=null!==(i=null==d?void 0:d.description)&&void 0!==i?i:e.description)&&void 0!==o?o:"",price:null!==(a=null==d||null===(s=d.price)||void 0===s?void 0:s.amount)&&void 0!==a?a:null,priceCurrencyCode:null!==(c=null==d||null===(u=d.price)||void 0===u?void 0:u.currency)&&void 0!==c?c:null,priceValue:null!==(l=null==d||null===(f=d.price)||void 0===f?void 0:f.amount)&&void 0!==l?l:null}}));e._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject(new Error("No such purchase to consume"));var r=this._getPromiseDecorator(v.CONSUME_PURCHASE);if(!r){r=this._createPromiseDecorator(v.CONSUME_PURCHASE);try{this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})}catch(e){this._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),$n(this,lo,mo).call(this).then((function(t){return fetch("".concat(oo,"/").concat(e.options.xsollaProjectId,"/user/inventory/items"),{headers:{Authorization:"Bearer ".concat(t)}})})).then((function(e){if(!e.ok)throw new Error("Xsolla inventory HTTP ".concat(e.status));return e.json()})).then((function(t){var r=e._paymentsGetProductsPlatformData()||[];e._paymentsPurchases=(t.items||[]).map((function(e){var t=r.find((function(t){return t.id===e.sku}));return t?Vn({id:t.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}}])&&Wn(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),h}($r);function bo(e){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bo(e)}function Eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Po(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Eo(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ao(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ao(n.key),n)}}function Ao(e){var t=function(e,t){if("object"!=bo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==bo(t)?t:String(t)}function Oo(){return Oo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Do(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Oo.apply(this,arguments)}function To(e,t){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},To(e,t)}function ko(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Do(e){return Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Do(e)}var Io=new WeakSet;function Ro(){var e=this;return this._playerId=this._platformSdk.options.player_id,this._isPlayerAuthorized="false"===this._platformSdk.options.guest,new Promise((function(t){e._platformSdk.getUsers([e._playerId],(function(r){if(r&&1===r.length){var n=r[0];e._playerName=n.full_name,""!==n.avatar&&(e._playerPhotos=[n.avatar])}t()}))}))}const Lo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&To(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Do(o);if(s){var r=Do(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===bo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ko(e)}(this,e)});function u(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=ko(e=c.call.apply(c,[this].concat(o))),r=Io),r.add(t),e}return r=u,(n=[{key:"platformId",get:function(){return e.ABSOLUTE_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://unpkg.com/@agru/sdk/dist/umd/index.min.js").then((function(){e._platformSdk=new window.AgRuSdk,e._platformSdk.on(window.AgRuSdkMethods.ShowCampaign,(function(t,r){"rewarded"===t.type?null===r?t.status?e._setRewardedState(a.OPENED):(t.reward&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED):null===r?t.status?e._setInterstitialState(i.OPENED):e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)}));var t=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,Io,Ro).call(e);Promise.all([t]).finally((function(){e._isInitialized=!0,e._defaultStorageType=e._isPlayerAuthorized?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE,e._resolvePromiseDecorator(v.INITIALIZE)}))}))),t.promise}},{key:"authorizePlayer",value:function(){var e=this;if(this._isPlayerAuthorized)return Promise.resolve();var t=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return t||(t=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.authorize((function(t,r){null===r?e._resolvePromiseDecorator(v.AUTHORIZE_PLAYER):e._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,r)}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Oo(Do(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:Oo(Do(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,r){if(n._platformStorageCachedData){if(Array.isArray(e)){for(var o=[],i=0;i<e.length;i++){var a=void 0===n._platformStorageCachedData[e[i]]?null:n._platformStorageCachedData[e[i]];o.push(a)}return void t(o)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else n._isPlayerAuthorized?n._platformSdk.getSaveData((function(o,i){if(null===i){if(n._platformStorageCachedData=o||{},Array.isArray(e)){for(var a=[],s=0;s<e.length;s++){var c=void 0===n._platformStorageCachedData[e[s]]?null:n._platformStorageCachedData[e[s]];a.push(c)}return void t(a)}t(void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e])}else r(i)})):r()})):Oo(Do(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){if(n._isPlayerAuthorized){var i=null!==n._platformStorageCachedData?Po({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.setSaveData(i,(function(e,t){null===t&&(n._platformStorageCachedData=i,r()),o(t)}))}else o()})):Oo(Do(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){if(r._isPlayerAuthorized){var o=null!==r._platformStorageCachedData?Po({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.setSaveData(o,(function(e,i){null===i&&(r._platformStorageCachedData=o,t()),n(i)}))}else n()})):Oo(Do(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){this._platformSdk.showCampaign("default")}},{key:"showRewarded",value:function(){this._platformSdk.showCampaign("rewarded")}}])&&wo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function jo(e){return jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jo(e)}function Co(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,No(n.key),n)}}function No(e){var t=function(e,t){if("object"!=jo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jo(t)?t:String(t)}function Go(e,t){return Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Go(e,t)}function Bo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mo(e)}function Ho(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,xo(e,t,"set"),r),r}function Fo(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,xo(e,t,"get"))}function xo(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Uo=new WeakMap;const Vo=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Go(e,t)}(p,t);var r,n,o,u,l=(o=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mo(o);if(u){var r=Mo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bo(e)}(this,e)});function p(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=Bo(e=l.call.apply(l,[this].concat(i))),n={writable:!0,value:!1},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t,r=Uo),r.set(t,n),e}return r=p,(n=[{key:"platformId",get:function(){return e.GAME_DISTRIBUTION}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isMinimumDelayBetweenInterstitialEnabled",get:function(){return!1}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);if(!e)if(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&"string"==typeof this._options.gameId){var t=this;window.GD_OPTIONS={gameId:this._options.gameId,onEvent:function(e){switch(e.name){case"SDK_READY":t._platformSdk=window.gdsdk,t._isInitialized=!0,t.showInterstitial(),t._resolvePromiseDecorator(v.INITIALIZE);break;case"SDK_GAME_START":Fo(t,Uo)?(t._setRewardedState(a.CLOSED),t._platformSdk.preloadAd("rewarded")):t._setInterstitialState(i.CLOSED);break;case"SDK_GAME_PAUSE":Fo(t,Uo)?t._setRewardedState(a.OPENED):t._setInterstitialState(i.OPENED);break;case"SDK_REWARDED_WATCH_COMPLETE":t._setRewardedState(a.REWARDED)}}},this._defaultStorageType=f.LOCAL_STORAGE,this._isBannerSupported=!0,_e("https://html5.api.gamedistribution.com/main.min.js")}else this._rejectPromiseDecorator(v.INITIALIZE,b);return e.promise}},{key:"showBanner",value:function(e){var t=this,r=document.getElementById(c);r||(r=ge(e)),r.style.display="block",this._platformSdk.showAd("display",{containerId:c}).then((function(){t._setBannerState(s.SHOWN)})).catch((function(){t._setBannerState(s.FAILED),r.style.display="none"}))}},{key:"hideBanner",value:function(){var e=document.getElementById(c);e&&(e.style.display="none"),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(){var e=this;Ho(this,Uo,!1),this._platformSdk?this._platformSdk.showAd().catch((function(){e._setInterstitialState(i.FAILED)})):this._setInterstitialState(i.FAILED)}},{key:"preloadRewarded",value:function(){this._platformSdk.preloadAd("rewarded")}},{key:"showRewarded",value:function(){var e=this;Ho(this,Uo,!0),this._platformSdk?this._platformSdk.showAd("rewarded").catch((function(){e._setRewardedState(a.FAILED)})):this._setRewardedState(a.FAILED)}}])&&Co(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),p}($r);function Wo(e){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wo(e)}function zo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ei(n.key),n)}}function Zo(){return Zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ko(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Zo.apply(this,arguments)}function Yo(e,t){return Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Yo(e,t)}function Jo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ko(e)}function qo(e,t){Qo(e,t),t.add(e)}function Xo(e,t,r){Qo(e,t),t.set(e,r)}function Qo(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $o(e,t,r){return(t=ei(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ei(e){var t=function(e,t){if("object"!=Wo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Wo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Wo(t)?t:String(t)}function ti(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function ri(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ni(e,t,"get"))}function ni(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var oi="AUTHORIZED",ii={VALUABLE_ACCESS:"VALUABLE_ACCESS",PHOTO_CONTENT:"PHOTO_CONTENT"},ai=new WeakMap,si=new WeakMap,ci=new WeakMap,ui=new WeakMap,li=new WeakSet,fi=new WeakSet,pi=new WeakSet,di=new WeakSet,hi=new WeakSet,yi=new WeakSet,mi=new WeakSet,vi=new WeakSet,_i=new WeakSet,gi=new WeakSet,Si=new WeakSet,bi=new WeakSet,Ei=new WeakSet,Pi=new WeakSet,wi=new WeakSet,Ai=new WeakSet;function Oi(){return{userProfile:{fields:"uid,name,pic50x50,pic128x128,pic_base",method:"users.getCurrentUser"},hasAppPermission:function(e){return{method:"users.hasAppPermission",ext_perm:e}}}}function Ti(){var e=this;return{userProfileCallback:function(t,r,n){return ti(e,li,Di).call(e,t,r,n)},hasValueAccessCallback:function(t,r,n){return ti(e,pi,Ri).call(e,r,n)}}}function ki(){var e=this;return{showPermissions:function(){return ti(e,di,Li).call(e)},loadAd:function(t){return ti(e,hi,ji).call(e,t)},showLoadedAd:function(t,r){return ti(e,yi,Ci).call(e,r)},showAd:function(t,r){return ti(e,mi,Ni).call(e,r)},requestBannerAds:function(t,r){return ti(e,vi,Gi).call(e,t,r)},showBannerAds:function(t,r){return ti(e,gi,Mi).call(e,r)},hideBannerAds:function(t,r){return ti(e,_i,Bi).call(e,r)},setBannerFormat:function(t){return ti(e,Si,Hi).call(e,t)},showInvite:function(t){return ti(e,bi,Fi).call(e,t)},showRatingDialog:function(t,r){return ti(e,Ei,xi).call(e,t,r)},joinGroup:function(t,r){return ti(e,Pi,Ui).call(e,t,r)},showLoginSuggestion:function(t,r){return ti(e,fi,Ii).call(e,t,r)},postMediatopic:function(t,r){return ti(e,wi,Vi).call(e,t,r)},isAdBlockEnabled:function(t,r){return ti(e,Ai,Wi).call(e,t,r)}}}function Di(e,t){"ok"===e&&(this._playerId=t.uid,this._playerName=t.name,this._playerPhotos=[t.pic50x50,t.pic128x128,t.pic_base]),this._isInitialized=!0,this._platformSdk.Client.call(ri(this,si).hasAppPermission(ii.VALUABLE_ACCESS),ri(this,ci).hasValueAccessCallback)}function Ii(e,t){if("error"===e)return this._isPlayerAuthorized=!1,void this._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,t);this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}function Ri(e){if(this._hasValuableAccessPermission=!!e,this._defaultStorageType=this._hasValuableAccessPermission?f.PLATFORM_INTERNAL:f.LOCAL_STORAGE,this._hasValuableAccessPermission||this._hasValuableAccessPermissionShowed)this._resolvePromiseDecorator(v.INITIALIZE);else{var t=Object.values(ii).map((function(e){return'"'.concat(e,'"')})).join(",");this._platformSdk.UI.showPermissions("[".concat(t,"]"))}}function Li(){this._hasValuableAccessPermissionShowed=!0,this._platformSdk.Client.call(ri(this,si).hasAppPermission(ii.VALUABLE_ACCESS),ri(this,ci).hasValueAccessCallback)}function ji(e){"error"===e?this._setRewardedState(a.FAILED):(this._setRewardedState(a.OPENED),this._platformSdk.UI.showLoadedAd())}function Ci(e){switch(e){case"complete":this._setRewardedState(a.REWARDED),this._setRewardedState(a.CLOSED);break;case"skip":this._setRewardedState(a.CLOSED);break;default:this._setRewardedState(a.FAILED)}}function Ni(e){switch(e){case"ready":case"ad_prepared":break;case"ad_shown":this._setInterstitialState(i.OPENED),this._setInterstitialState(i.CLOSED);break;default:this._setInterstitialState(i.FAILED)}}function Gi(e,t){if("error"!==e)switch(t){case"ad_loaded":this._platformSdk.invokeUIMethod("showBannerAds",ri(this,ai));break;case"banner_shown":case"ad_shown":this._setBannerState(s.SHOWN);break;case"hidden_by_user":this._setBannerState(s.HIDDEN)}else this._setBannerState(s.FAILED)}function Bi(e){e?this._setBannerState(s.HIDDEN):this._setBannerState(s.FAILED)}function Mi(e){e||this._setBannerState(s.FAILED)}function Hi(e){"error"===e?this._setBannerState(s.FAILED):this.showBanner(this._platformBannerOptions)}function Fi(e){"error"===e?this._rejectPromiseDecorator(v.INVITE_FRIENDS):this._resolvePromiseDecorator(v.INVITE_FRIENDS)}function xi(e,t){"error"===e?this._rejectPromiseDecorator(v.RATE,t):this._resolvePromiseDecorator(v.RATE)}function Ui(e,t){"error"===e?this._rejectPromiseDecorator(v.JOIN_COMMUNITY,t):this._resolvePromiseDecorator(v.JOIN_COMMUNITY)}function Vi(e,t){"error"===e?this._rejectPromiseDecorator(v.CREATE_POST,t):this._resolvePromiseDecorator(v.CREATE_POST)}function Wi(e,t){"ok"===e?this._resolvePromiseDecorator(v.ADBLOCK_DETECT,"true"===t):this._rejectPromiseDecorator(v.ADBLOCK_DETECT)}const zi=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yo(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ko(o);if(s){var r=Ko(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Wo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Jo(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return qo(Jo(e=c.call.apply(c,[this].concat(r))),Ai),qo(Jo(e),wi),qo(Jo(e),Pi),qo(Jo(e),Ei),qo(Jo(e),bi),qo(Jo(e),Si),qo(Jo(e),gi),qo(Jo(e),_i),qo(Jo(e),vi),qo(Jo(e),mi),qo(Jo(e),yi),qo(Jo(e),hi),qo(Jo(e),di),qo(Jo(e),pi),qo(Jo(e),fi),qo(Jo(e),li),Xo(Jo(e),ui,{get:ki,set:void 0}),Xo(Jo(e),ci,{get:Ti,set:void 0}),Xo(Jo(e),si,{get:Oi,set:void 0}),$o(Jo(e),"_hasValuableAccessPermission",!1),$o(Jo(e),"_hasValuableAccessPermissionShowed",!1),$o(Jo(e),"_platformBannerOptions",{}),Xo(Jo(e),ai,{writable:!0,value:null}),e}return r=u,(n=[{key:"platformId",get:function(){return e.OK}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"isRateSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("//api.ok.ru/js/fapi5.js").then((function(){be("FAPI").then((function(){e._platformSdk=window.FAPI,window.API_callback=function(t,r,n){return ri(e,ui)[t](r,n)};var t=e._platformSdk.Util.getRequestParameters()||{};t.api_server&&t.apiconnection?e._platformSdk.init(t.api_server,t.apiconnection,(function(){var t,r=null===(t=e._platformSdk)||void 0===t?void 0:t.saved_state;e._isPlayerAuthorized=!r||r===oi,e._isPlayerAuthorized?e._platformSdk.Client.call(ri(e,si).userProfile,ri(e,ci).userProfileCallback):(e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE))}),(function(){e._rejectPromiseDecorator(v.INITIALIZE)})):e._rejectPromiseDecorator(v.INITIALIZE,P)}))}))),t.promise}},{key:"authorizePlayer",value:function(){if(this._isPlayerAuthorized)return Promise.resolve();var e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.UI.showLoginSuggestion(oi)),e.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Zo(Ko(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._hasValuableAccessPermission:Zo(Ko(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?this._hasValuableAccessPermission?new Promise((function(t,o){var i=Array.isArray(e)?e:[e],a={method:"storage.get",keys:i,scope:"CUSTOM"};n._platformSdk.Client.call(a,(function(n,a,s){if(a){var c=a.data||{};if(Array.isArray(e)){var u=[];return i.forEach((function(e){if(""!==c[e]&&void 0!==c[e]){var t=c[e];if(r)try{t=JSON.parse(c[e])}catch(e){}u.push(t)}else u.push(null)})),void t(u)}if(""===c[e]||void 0===c[e])return void t(null);var l=c[e];if(r)try{l=JSON.parse(c[e])}catch(e){}t(l)}else o(s)}))})):Promise.reject(S):Zo(Ko(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===f.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(S);for(var o=Array.isArray(e)?e:[e],i=Array.isArray(e)?t:[t],a=[],s=function(){var e=o[c],t=i[c];"string"!=typeof t&&(t=JSON.stringify(t));var r={method:"storage.set",key:e,value:t},s=new Promise((function(e,t){n._platformSdk.Client.call(r,(function(r,n){n?e():t()}))}));a.push(s)},c=0;c<o.length;c++)s();return Promise.all(a)}return Zo(Ko(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===f.PLATFORM_INTERNAL){if(!this._hasValuableAccessPermission)return Promise.reject(S);for(var n=Array.isArray(e)?e:[e],o=[],i=function(){var e={method:"storage.set",key:n[a]},t=new Promise((function(t,n){r._platformSdk.Client.call(e,(function(e,r){r?t():n()}))}));o.push(t)},a=0;a<n.length;a++)i();return Promise.all(o)}return Zo(Ko(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){try{this._platformSdk.UI.showAd()}catch(e){this._setInterstitialState(i.FAILED)}}},{key:"showRewarded",value:function(){try{this._platformSdk.UI.loadAd()}catch(e){this._setRewardedState(a.FAILED)}}},{key:"showBanner",value:function(e){var t,r;r=e,function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(t=this,ni(t,ai,"set"),r),this._platformSdk.invokeUIMethod("requestBannerAds")}},{key:"hideBanner",value:function(){this._platformSdk.invokeUIMethod("hideBannerAds")}},{key:"checkAdBlock",value:function(){var e=this._getPromiseDecorator(v.ADBLOCK_DETECT);return e||(e=this._createPromiseDecorator(v.ADBLOCK_DETECT),this._platformSdk.invokeUIMethod("isAdBlockEnabled")),e.promise}},{key:"inviteFriends",value:function(e){var t=(e||{}).text;if(!e||"string"!=typeof t)return Promise.reject();var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),t.length>120?this._rejectPromiseDecorator(v.INVITE_FRIENDS,T):this._platformSdk.UI.showInvite(t)),r.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(v.RATE);return e||(e=this._createPromiseDecorator(v.RATE),this._platformSdk.UI.showRatingDialog()),e.promise}},{key:"createPost",value:function(e){if(!e||null==e||!e.media)return Promise.reject();var t,r=this._getPromiseDecorator(v.CREATE_POST);return r||(r=this._createPromiseDecorator(v.CREATE_POST),this._platformSdk.UI.postMediatopic(e,null!==(t=e.status)&&void 0!==t&&t)),r.promise}},{key:"joinCommunity",value:function(e){if(!e||null==e||!e.groupId)return Promise.reject();var t,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._platformSdk.UI.joinGroup(e.groupId,null!==(t=e.enableMessages)&&void 0!==t&&t)),r.promise}}])&&zo(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function Zi(e){return Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(e)}function Yi(){Yi=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Zi(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Zi(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Ji(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Qi(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qi(n.key),n)}}function Qi(e){var t=function(e,t){if("object"!=Zi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zi(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zi(t)?t:String(t)}function $i(){return $i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ra(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},$i.apply(this,arguments)}function ea(e,t){return ea=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ea(e,t)}function ta(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ra(e){return ra=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ra(e)}function na(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function oa(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var ia=new WeakSet,aa=new WeakSet;function sa(){var e=this;return new Promise((function(t){e._platformSdk.userService.getUser().then((function(t){return t.isAuthorized?(e._isPlayerAuthorized=!0,e._playerId=t.id,e._playerName=t.name,e._playerPhotos=t.photos,e._playerExtra=t,e._defaultStorageType=f.PLATFORM_INTERNAL,oa(e,aa,ca).call(e,[])):(e._playerApplyGuestData(),Promise.resolve())})).catch((function(){e._playerApplyGuestData()})).finally((function(){t()}))}))}function ca(e){return ua.apply(this,arguments)}function ua(){var e;return e=Yi().mark((function e(t){var r,n=arguments;return Yi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]&&n[1],this._platformStorageCachedData){e.next=5;break}return e.next=4,this.platformSdk.cloudSaveApi.getState();case 4:this._platformStorageCachedData=e.sent;case 5:return e.abrupt("return",we(t,this._platformStorageCachedData,r));case 6:case"end":return e.stop()}}),e,this)})),ua=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ji(i,n,o,a,s,"next",e)}function s(e){Ji(i,n,o,a,s,"throw",e)}a(void 0)}))},ua.apply(this,arguments)}const la=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ea(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ra(o);if(s){var r=ra(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zi(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ta(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return na(ta(e=c.call.apply(c,[this].concat(r))),aa),na(ta(e),ia),e}return r=u,(n=[{key:"platformId",get:function(){return e.PLAYGAMA}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.platformService.getLanguage()||$i(ra(u.prototype),"platformLanguage",this)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://developer.playgama.com/sdk/v1.js").then((function(){be("PLAYGAMA_SDK").then((function(){e._platformSdk=window.PLAYGAMA_SDK,oa(e,ia,sa).call(e).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||$i(ra(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:$i(ra(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===f.PLATFORM_INTERNAL?this._isPlayerAuthorized?oa(this,aa,ca).call(this,e,r):Promise.reject():$i(ra(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;switch(r){case f.PLATFORM_INTERNAL:return this._isPlayerAuthorized?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?qi({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n.platformSdk.cloudSaveApi.setItems(i).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Promise.reject();case f.LOCAL_STORAGE:var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]="string"!=typeof t[i]?JSON.stringify(t[i]):t[i];else o[e]="string"!=typeof t?JSON.stringify(t):t;return this._platformSdk.storageApi.setItems(o),$i(ra(u.prototype),"setDataToStorage",this).call(this,e,t,r);default:return Promise.reject(g)}}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;switch(t){case f.PLATFORM_INTERNAL:return new Promise((function(t,n){var o=null!==r._platformStorageCachedData?qi({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r.platformSdk.cloudSaveApi.setItems(o).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))}));case f.LOCAL_STORAGE:return this._platformSdk.storageApi.deleteItems(Array.isArray(e)?e:[e]),$i(ra(u.prototype),"deleteDataFromStorage",this).call(this,e,t);default:return Promise.reject(g)}}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.advService.showInterstitial({onOpen:function(){e._setInterstitialState(i.OPENED)},onEmpty:function(){e._setInterstitialState(i.FAILED)},onClose:function(){e._setInterstitialState(i.CLOSED)},onError:function(){e._setInterstitialState(i.FAILED)}})}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.advService.showRewarded({onOpen:function(){e._setRewardedState(a.OPENED)},onRewarded:function(){e._setRewardedState(a.REWARDED)},onEmpty:function(){e._setRewardedState(a.FAILED)},onClose:function(){e._setRewardedState(a.CLOSED)},onError:function(){e._setRewardedState(a.FAILED)}})}},{key:"authorizePlayer",value:function(e){var t=this,r=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return r||(r=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._isPlayerAuthorized?oa(this,ia,sa).call(this,e).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)})):this._platformSdk.userService.authorizeUser().then((function(){oa(t,ia,sa).call(t,e).then((function(){t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}))})).catch((function(e){t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e)}))),r.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.inGamePaymentsApi.purchase(n).then((function(t){if("PAID"===t.status){var n=qi({id:e},t);r._paymentsPurchases.push(n),r._resolvePromiseDecorator(v.PURCHASE,n)}else r._rejectPromiseDecorator(v.PURCHASE,t.error)})).catch((function(e){r._rejectPromiseDecorator(v.PURCHASE,e)}))),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));return Promise.resolve(t)}}])&&Xi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function fa(e){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fa(e)}function pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ga(n.key),n)}}function ha(){return ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=va(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ha.apply(this,arguments)}function ya(e,t){return ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ya(e,t)}function ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function va(e){return va=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},va(e)}function _a(e,t,r){return(t=ga(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ga(e){var t=function(e,t){if("object"!=fa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==fa(t)?t:String(t)}function Sa(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function ba(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Pa(e,t,"set"),r),r}function Ea(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Pa(e,t,"get"))}function Pa(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var wa=new WeakMap,Aa=new WeakMap;const Oa=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ya(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=va(o);if(s){var r=va(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===fa(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ma(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Sa(ma(e=c.call.apply(c,[this].concat(r))),wa,{writable:!0,value:void 0}),Sa(ma(e),Aa,{writable:!0,value:void 0}),_a(ma(e),"_defaultStorageType",f.PLATFORM_INTERNAL),_a(ma(e),"_isPlayerAuthorized",!0),e}return r=u,n=[{key:"platformId",get:function(){return e.PLAYDECK}},{key:"platformLanguage",get:function(){return Ea(this,wa)?Ea(this,wa):ha(va(u.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),window.addEventListener("message",(function t(r){var n=r.data;if(n&&n.playdeck){var o=n.playdeck;if("getUserProfile"===o.method){var i=o.value;e._playerId=i.telegramId,e._playerPhotos=[i.avatar],e._playerName=i.username,ba(e,wa,i.locale),ba(e,Aa,i.params),window.removeEventListener("message",t),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}}})),window.parent.postMessage({playdeck:{method:"getUserProfile"}},"*")),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_OVER:return window.parent.postMessage({playdeck:{method:"gameEnd"}},"*"),Promise.resolve();case d.GAME_READY:return window.parent.postMessage({playdeck:{method:"loading",value:100}},"*"),Promise.resolve();default:return ha(va(u.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setInterstitialState(i.OPENED);break;case"rewardedAd":case"skipAd":e._setInterstitialState(i.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setInterstitialState(i.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"showRewarded",value:function(){var e=this;window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;if(o)switch(o.method){case"startAd":e._setRewardedState(a.OPENED);break;case"rewardedAd":e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"skipAd":e._setRewardedState(a.CLOSED),window.removeEventListener("message",t);break;case"errAd":case"notFoundAd":e._setRewardedState(a.FAILED),window.removeEventListener("message",t)}})),window.parent.postMessage({playdeck:{method:"showAd"}},"*")}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||ha(va(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||ha(va(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){return t===f.PLATFORM_INTERNAL?new Promise((function(t){var r={},n=Array.isArray(e)?e:[e];window.addEventListener("message",(function o(i){var a=i.data;if(a&&a.playdeck&&"getData"===a.playdeck.method&&n.includes(a.playdeck.key)){var s=a.playdeck;if("getData"===s.method&&(r[s.key]=s.value.data),Object.keys(r).length===n.length){window.removeEventListener("message",o);var c=Array.isArray(e)?e.map((function(e){return r[e]})):r[e];t(c)}}})),n.forEach((function(e){return window.parent.postMessage({playdeck:{method:"getData",key:e}},"*")}))})):ha(va(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){return r===f.PLATFORM_INTERNAL?new Promise((function(r){var n=Array.isArray(e)?e:[e],o=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));n.forEach((function(e,t){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:o[t]}},"*")})),r()})):ha(va(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){return t===f.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return window.parent.postMessage({playdeck:{method:"setData",key:e,value:""}},"*")})),t()})):ha(va(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"share",value:function(){var e=this,t=this._getPromiseDecorator(v.SHARE);return t||(t=this._createPromiseDecorator(v.SHARE),window.addEventListener("message",(function t(r){var n=r.data,o=null==n?void 0:n.playdeck;o&&"customShare"===o.method&&(window.removeEventListener("message",t),e._resolvePromiseDecorator(v.SHARE))})),window.parent.postMessage({playdeck:{method:"customShare",value:Ea(this,Aa)}},"*")),t.promise}},{key:"paymentsPurchase",value:function(e,t){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();t&&t.externalId&&(n.externalId=t.externalId),n.externalId||(n.externalId=this._paymentsGenerateTransactionId(e));var o=this._getPromiseDecorator(v.PURCHASE);return o||(o=this._createPromiseDecorator(v.PURCHASE),window.addEventListener("message",(function e(t){var r=t.data,n=null==r?void 0:r.playdeck;n&&"requestPayment"===n.method&&(window.parent.postMessage({playdeck:{method:"openTelegramLink",value:n.value.url}},"*"),window.removeEventListener("message",e))})),window.addEventListener("message",(function t(n){var o=n.data,i=null==o?void 0:o.playdeck;if(i&&"invoiceClosed"===i.method)if("paid"===i.value.status){window.removeEventListener("message",t);var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(r),!0).forEach((function(t){_a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:e},i.value);r._paymentsPurchases.push(a),r._resolvePromiseDecorator(v.PURCHASE,a)}else"cancelled"!==i.value.status&&"failed"!==i.value.status||(window.removeEventListener("message",t),r._rejectPromiseDecorator(v.PURCHASE,i.value))})),window.parent.postMessage({playdeck:{method:"requestPayment",value:n}},"*")),o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=e.map((function(e){return{id:e.id,price:"".concat(e.amount," Stars"),priceCurrencyCode:"Stars",priceValue:e.amount}}));return Promise.resolve(t)}}],n&&da(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function Ta(e){return Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ta(e)}function ka(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Na(n.key),n)}}function Da(){return Da="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=La(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Da.apply(this,arguments)}function Ia(e,t){return Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ia(e,t)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function La(e){return La=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},La(e)}function ja(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ca(e,t,r){return(t=Na(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Na(e){var t=function(e,t){if("object"!=Ta(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ta(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ta(t)?t:String(t)}function Ga(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ma(e,t,"set"),r),r}function Ba(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ma(e,t,"get"))}function Ma(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Ha=new WeakMap,Fa=new WeakMap,xa=new WeakMap,Ua=new WeakMap;const Va=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ia(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=La(o);if(s){var r=La(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ta(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ra(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ca(Ra(e=c.call.apply(c,[this].concat(r))),"_defaultStorageType",f.PLATFORM_INTERNAL),Ca(Ra(e),"_isPlayerAuthorized",!0),ja(Ra(e),Ha,{writable:!0,value:void 0}),ja(Ra(e),Fa,{writable:!0,value:void 0}),ja(Ra(e),xa,{writable:!0,value:{onStart:function(){return e._setRewardedState(a.OPENED)},onSkip:function(){return e._setRewardedState(a.CLOSED)},onReward:function(){return e._setRewardedState(a.REWARDED)},onError:function(){return e._setRewardedState(a.FAILED)}}}),ja(Ra(e),Ua,{writable:!0,value:{onStart:function(){return e._setInterstitialState(i.OPENED)},onSkip:function(){return e._setInterstitialState(i.CLOSED)},onError:function(){return e._setInterstitialState(i.FAILED)}}}),e}return r=u,(n=[{key:"platformId",get:function(){return e.TELEGRAM}},{key:"platformLanguage",get:function(){return this._platformSdk?this._platformSdk.initDataUnsafe.user.language_code:Da(La(u.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!!Ba(this,Fa)}},{key:"isRewardedSupported",get:function(){return!!Ba(this,Fa)}},{key:"deviceType",get:function(){switch(Ba(this,Ha)){case"android":case"android_x":case"ios":return p.MOBILE;case"tdesktop":case"unigram":case"macos":return p.DESKTOP;default:return Da(La(u.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://telegram.org/js/telegram-web-app.js").then((function(){e._platformSdk=window.Telegram.WebApp;var t=e._platformSdk.initDataUnsafe.user;e._playerId=t.id,e._playerName=[t.first_name,t.last_name].filter(Boolean).join(" "),e._playerPhotos=[t.photo_url],Ga(e,Ha,e._platformSdk.platform),e._isInitialized=!0,e._options&&e._options.adsgramBlockId?_e("https://sad.adsgram.ai/js/sad.min.js").then((function(){Ga(e,Fa,window.Adsgram.init({blockId:e._options.adsgramBlockId}))})).finally((function(){e._resolvePromiseDecorator(v.INITIALIZE)})):e._resolvePromiseDecorator(v.INITIALIZE)}))),t.promise}},{key:"sendMessage",value:function(e){return e===d.GAME_READY?(this._platformSdk.ready(),Promise.resolve()):Da(La(u.prototype),"sendMessage",this).call(this,e)}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Da(La(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Da(La(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){Array.isArray(e)?n._platformSdk.CloudStorage.getItems(e,(function(n,i){if(n)o(n);else{var a=[];e.forEach((function(e){var t=i[e];if(r&&"string"==typeof t)try{t=JSON.parse(t)}catch(e){}a.push(t)})),t(a)}})):n._platformSdk.CloudStorage.getItem(e,(function(e,n){e&&o(e);var i=n;if(r&&"string"==typeof i)try{i=JSON.parse(i)}catch(e){}t(i)}))})):Da(La(u.prototype),"getDataFromStorage",this).call(this,e,t)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r){var o=Array.isArray(e)?e:[e],i=(Array.isArray(t)?t:[t]).map((function(e){return"string"!=typeof e?JSON.stringify(e):e}));o.forEach((function(e,t){return n._platformSdk.CloudStorage.setItem(e,i[t])})),r()})):Da(La(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t){(Array.isArray(e)?e:[e]).forEach((function(e){return r._platformSdk.CloudStorage.removeItem(e)})),t()})):Da(La(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;Ba(this,Fa)?(Ba(this,Fa).addEventListener("onStart",Ba(this,Ua).onStart),Ba(this,Fa).addEventListener("onSkip",Ba(this,Ua).onSkip),Ba(this,Fa).addEventListener("onError",Ba(this,Ua).onError),Ba(this,Fa).addEventListener("onBannerNotFound",Ba(this,Ua).onError),Ba(this,Fa).show().finally((function(){Ba(e,Fa).removeEventListener("onStart",Ba(e,Ua).onStart),Ba(e,Fa).removeEventListener("onSkip",Ba(e,Ua).onSkip),Ba(e,Fa).removeEventListener("onError",Ba(e,Ua).onError),Ba(e,Fa).removeEventListener("onBannerNotFound",Ba(e,Ua).onError)}))):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;Ba(this,Fa)?(Ba(this,Fa).addEventListener("onStart",Ba(this,xa).onStart),Ba(this,Fa).addEventListener("onSkip",Ba(this,xa).onSkip),Ba(this,Fa).addEventListener("onReward",Ba(this,xa).onReward),Ba(this,Fa).addEventListener("onError",Ba(this,xa).onError),Ba(this,Fa).addEventListener("onBannerNotFound",Ba(this,xa).onError),Ba(this,Fa).show().finally((function(){Ba(e,Fa).addEventListener("onStart",Ba(e,xa).onStart),Ba(e,Fa).addEventListener("onSkip",Ba(e,xa).onSkip),Ba(e,Fa).addEventListener("onReward",Ba(e,xa).onReward),Ba(e,Fa).addEventListener("onError",Ba(e,xa).onError),Ba(e,Fa).addEventListener("onBannerNotFound",Ba(e,xa).onError)}))):this._setRewardedState(a.FAILED)}},{key:"clipboardRead",value:function(){var e=this,t=this._getPromiseDecorator(v.CLIPBOARD_READ);return t||(t=this._createPromiseDecorator(v.CLIPBOARD_READ),this._platformSdk.readTextFromClipboard((function(t){t?e._resolvePromiseDecorator(v.CLIPBOARD_READ,t):e._rejectPromiseDecorator(v.CLIPBOARD_READ)}))),t.promise}}])&&ka(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);var Wa=["player"];function za(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Za(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?za(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Ka(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):za(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ya(e){return Ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ya(e)}function Ja(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ka(n.key),n)}}function Ka(e){var t=function(e,t){if("object"!=Ya(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ya(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ya(t)?t:String(t)}function qa(){return qa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},qa.apply(this,arguments)}function Xa(e,t){return Xa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xa(e,t)}function Qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $a(e){return $a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$a(e)}function es(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function ts(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var rs="userData",ns="6129580795478709",os=new WeakSet,is=new WeakSet;function as(){var e=this;return new Promise((function(t,r){e._platformStorageCachedData?t(e._platformStorageCachedData):e._platformSdk.api("user_data/retrieve","POST",{key:rs},(function(n){n.error&&"Key not found"!==n.error&&r(n);var o={};try{n.jsondata&&(o=JSON.parse(n.jsondata))}catch(e){}e._platformStorageCachedData=o,t(o)}))}))}function ss(e){if("ok"===e.status){this._isPlayerAuthorized=!0,this._defaultStorageType=f.PLATFORM_INTERNAL;var t=e.authResponse.details,r=t.pid,n=t.locale,o=t.nickname,i=t.first_name,a=t.last_name,s=t.avatars;r&&(this._playerId=r),this._platformLanguage=n,this._playerName=[i,a].filter((function(e){return!!e})).join(" ")||o,this._playerPhotos=[];var c=s.thumb_url,u=s.medium_url,l=s.large_url;c&&this._playerPhotos.push(c),u&&this._playerPhotos.push(u),l&&this._playerPhotos.push(l)}}const cs=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xa(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$a(o);if(s){var r=$a(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ya(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Qa(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return es(Qa(e=c.call.apply(c,[this].concat(r))),is),es(Qa(e),os),e}return r=u,(n=[{key:"platformId",get:function(){return e.Y8}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"isGetAchievementsListSupported",get:function(){return!0}},{key:"isAchievementsNativePopupSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.gameId?_e("https://cdn.y8.com/api/sdk.js").then((function(){be("ID").then((function(){e._platformSdk=window.ID,e._platformSdk.Event.subscribe("id.init",(function(){var t,r,n,o,i,a;(t={hostId:"ca-host-pub-".concat(ns),adsenseId:e._options.channelId?"ca-pub-".concat(ns):e._options.adsenseId,channelId:e._options.channelId},r=t.hostId,n=t.adsenseId,o=t.channelId,i=t.adFrequencyHint,a=void 0===i?"180s":i,new Promise((function(e){var t=document.createElement("script");t.setAttribute("data-ad-client",n),o?t.setAttribute("data-ad-channel",o):r&&t.setAttribute("data-ad-host",r),t.setAttribute("data-ad-frequency-hint",a),t.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",t.addEventListener("load",e),document.head.appendChild(t)}))).then((function(){e._showAd=function(e){window.adsbygoogle.push(e)},window.adsbygoogle.push({preloadAdBreaks:"on",sound:"on",onReady:function(){}})})),e._platformSdk.getLoginStatus((function(t){ts(e,is,ss).call(e,t),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))})),e._platformSdk.init({appId:e._options.gameId})}))})):this._rejectPromiseDecorator(v.INITIALIZE,E)),r.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.login((function(n){ts(e,is,ss).call(e,n),"ok"===n.status?(e._platformStorageCachedData=null,t()):r()}))}))}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||qa($a(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:qa($a(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){ts(n,os,as).call(n).then((function(n){var o=(Array.isArray(e)?e:[e]).map((function(e){var t=n[e];return r||"object"!==Ya(t)||null===t?null!=t?t:null:JSON.stringify(t)}));t(o)})).catch(o)})):qa($a(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){ts(n,os,as).call(n).then((function(i){var a=Za({},i);if(Array.isArray(e))for(var s=0;s<e.length;s++)a[e[s]]=t[s];else a[e]=t;n._platformSdk.api("user_data/submit","POST",{key:rs,value:JSON.stringify(a)},(function(e){"ok"===e.status?(n._platformStorageCachedData=a,r()):o(e)}))})).catch(o)})):qa($a(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){ts(r,os,as).call(r).then((function(o){var i=Za({},o);if(Array.isArray(e))for(var a=0;a<e.length;a++)delete i[e[a]];else delete i[e];r._platformSdk.api("user_data/submit","POST",{key:rs,value:JSON.stringify(i)},(function(e){"ok"===e.status?(r._platformStorageCachedData=i,t()):n(e)}))})).catch(n)})):qa($a(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._showAd?this._showAd({type:"start",name:"start-game",beforeAd:function(){e._setInterstitialState(i.OPENED)},afterAd:function(){e.interstitialState!==i.FAILED&&e._setInterstitialState(i.CLOSED)},adBreakDone:function(t){"viewed"!==t.breakStatus&&e._setInterstitialState(i.FAILED)}}):this._setInterstitialState(i.FAILED)}},{key:"showRewarded",value:function(){var e=this;this._showAd?this._showAd({type:"reward",name:"rewarded Ad",beforeAd:function(){e._setRewardedState(a.OPENED)},afterAd:function(){e.rewardedState!==a.FAILED&&e._setRewardedState(a.CLOSED)},beforeReward:function(e){e(0)},adDismissed:function(){e._setRewardedState(a.FAILED)},adViewed:function(){e._setRewardedState(a.REWARDED)},adBreakDone:function(t){"frequencyCapped"!==t.breakStatus&&"other"!==t.breakStatus||e._setRewardedState(a.FAILED)}}):this._setRewardedState(a.FAILED)}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;if(!this._isPlayerAuthorized)return Promise.reject();var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={table:e,points:t};this._platformSdk.GameAPI.Leaderboards.save(o,(function(e){var t=e.success,n=e.errormessage;t?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,n)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this;if(!this._isPlayerAuthorized)return Promise.reject();var r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var n={table:e,mode:"alltime"};this._platformSdk.GameAPI.Leaderboards.listCustom(n,(function(e){var r=e.scores,n=e.success,o=e.errormessage;if(n){var i=r.map((function(e){return{id:e.playerid,name:e.playername,score:e.points,rank:e.rank,photo:null}}));t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,i)}else t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,o)}))}return r.promise}},{key:"unlockAchievement",value:function(e){var t=this;return this._isPlayerAuthorized&&e.achievement&&e.achievementkey?new Promise((function(r){t._platformSdk.GameAPI.Achievements.save(e,(function(e){r(e)}))})):Promise.reject()}},{key:"getAchievementsList",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.GameAPI.Achievements.listCustom(e,(function(e){e.success?r(e.achievements.map((function(e){var t=e.player;return Za(Za({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Wa)),{},{playerid:t.playerid,playername:t.playername,lastupdated:t.lastupdated,date:t.date,rdate:t.rdate})}))):n(new Error(e.errorcode))}))}))}},{key:"showAchievementsNativePopup",value:function(e){return this._platformSdk.GameAPI.Achievements.list(e),Promise.resolve()}}])&&Ja(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function us(e){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},us(e)}function ls(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fs(n.key),n)}}function fs(e){var t=function(e,t){if("object"!=us(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=us(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==us(t)?t:String(t)}function ps(){return ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hs(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ps.apply(this,arguments)}function ds(e,t){return ds=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ds(e,t)}function hs(e){return hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hs(e)}const ys=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ds(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hs(o);if(s){var r=hs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===us(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return e.LAGGED}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isAchievementsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.devId&&this._options.publisherId?_e("https://lagged.com/api/rev-share/lagged.js").then((function(){be("LaggedAPI").then((function(){e._platformSdk=window.LaggedAPI,e._platformSdk.init(e._options.devId,e._options.publisherId),e._platformSdk.User.get((function(t){var r,n=null!==(r=null==t?void 0:t.user)&&void 0!==r?r:{},o=n.id,i=n.name,a=n.avatar;o>0&&(e._playerId=o,e._playerName=i,e._playerPhotos.push(a),e._isPlayerAuthorized=!0),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))})):this._rejectPromiseDecorator(v.INITIALIZE,w)),t.promise}},{key:"isStorageSupported",value:function(e){return e!==f.PLATFORM_INTERNAL&&ps(hs(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e!==f.PLATFORM_INTERNAL&&ps(hs(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"showInterstitial",value:function(){var e=this;this._setInterstitialState(i.OPENED),this._platformSdk.APIAds.show((function(){e._setInterstitialState(i.CLOSED)}))}},{key:"showRewarded",value:function(){var e=this;this._setRewardedState(a.OPENED),this._platformSdk.GEvents.reward((function(t,r){t?r():e._setRewardedState(a.FAILED)}),(function(t){t?(e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={score:t,board:e};this._platformSdk.Scores.save(o,(function(e){e.success?r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE):r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e.errormsg)}))}return n.promise}},{key:"unlockAchievement",value:function(e){var t=this;return e.achievement?new Promise((function(r,n){t._platformSdk.Achievements.save(Array.isArray(e.achievement)?e.achievement:[e.achievement],(function(e){e.success?r(e):n(e.errormsg)}))})):Promise.reject()}}])&&ls(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function ms(){ms=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Ss(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Ss(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function vs(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function _s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(r),!0).forEach((function(t){Ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ss(e){return Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ss(e)}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Es(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Is(n.key),n)}}function Ps(){return Ps="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Os(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ps.apply(this,arguments)}function ws(e,t){return ws=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ws(e,t)}function As(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Os(e){return Os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Os(e)}function Ts(e,t){ks(e,t),t.add(e)}function ks(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ds(e,t,r){return(t=Is(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Is(e){var t=function(e,t){if("object"!=Ss(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ss(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ss(t)?t:String(t)}function Rs(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Ls(e,t,"set"),r),r}function Ls(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function js(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var Cs=new WeakMap,Ns=new WeakSet,Gs=new WeakSet,Bs=new WeakSet,Ms=new WeakSet;function Hs(){var e=this;e._platformSdk.overlayViews.setCustomEventHandler((function(t){if("leaderboard"===t)Rs(e,Cs,!0);else if("close"===t){if(function(e,t){return t.get?t.get.call(e):t.value}(r=e,Ls(r,Cs,"get")))return void Rs(e,Cs,!1);e._overlay&&(document.body.removeChild(document.getElementById(e._overlay.iframeElement.id)),e._overlay.dismissAsync(),e._overlay=null)}var r}))}function Fs(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedInterstitialPromises[e])return this._preloadedInterstitialPromises[e];var r=null;return this._preloadedInterstitialPromises[e]=this._platformSdk.getInterstitialAdAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedInterstitialPromises[e]=null,Promise.reject()})),this._preloadedInterstitialPromises[e]}function xs(e){var t=this;if(!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&this._preloadedRewardedPromises[e])return this._preloadedRewardedPromises[e];var r=null;return this._preloadedRewardedPromises[e]=this._platformSdk.getRewardedVideoAsync(e).then((function(e){return r=e,e.loadAsync()})).then((function(){return r})).catch((function(){return t._preloadedRewardedPromises[e]=null,Promise.reject()})),this._preloadedRewardedPromises[e]}function Us(){return Vs.apply(this,arguments)}function Vs(){var e;return e=ms().mark((function e(){return ms().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._platformSdk.player.isSubscribedBotAsync();case 3:if(!e.sent){e.next=6;break}return e.abrupt("return",Promise.resolve());case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),"INVALID_OPERATION"!==(null===e.t0||void 0===e.t0?void 0:e.t0.code)){e.next=13;break}e.next=14;break;case 13:throw new Error(e.t0);case 14:return e.prev=15,e.next=18,this._platformSdk.player.canSubscribeBotAsync();case 18:if(!e.sent){e.next=21;break}return e.abrupt("return",this._platformSdk.player.subscribeBotAsync());case 21:e.next=28;break;case 23:if(e.prev=23,e.t1=e.catch(15),"INVALID_OPERATION"!==(null===e.t1||void 0===e.t1?void 0:e.t1.code)){e.next=27;break}return e.abrupt("return",Promise.resolve());case 27:throw new Error(e.t1);case 28:return e.abrupt("return",Promise.resolve());case 29:case"end":return e.stop()}}),e,this,[[0,8],[15,23]])})),Vs=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){vs(i,n,o,a,s,"next",e)}function s(e){vs(i,n,o,a,s,"throw",e)}a(void 0)}))},Vs.apply(this,arguments)}const Ws=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ws(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Os(o);if(c){var r=Os(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ss(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return As(e)}(this,e)});function l(){var e,t,r,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return Ts(As(e=u.call.apply(u,[this].concat(i))),Ms),Ts(As(e),Bs),Ts(As(e),Gs),Ts(As(e),Ns),Ds(As(e),"_contextId",null),Ds(As(e),"_supportedApis",[]),Ds(As(e),"_preloadedInterstitialPromises",{}),Ds(As(e),"_preloadedRewardedPromises",{}),Ds(As(e),"_defaultStorageType",f.PLATFORM_INTERNAL),Ds(As(e),"_isJoinCommunitySupported",!1),n={writable:!0,value:!1},ks(t=As(e),r=Cs),r.set(t,n),e}return r=l,n=[{key:"platformId",get:function(){return e.FACEBOOK}},{key:"platformLanguage",get:function(){return this._platformLanguage||Ps(Os(l.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"deviceType",get:function(){switch(this._platformSdk&&this._platformSdk.getPlatform()){case"IOS":case"ANDROID":case"MOBILE_WEB":return p.MOBILE;case"WEB":return p.DESKTOP;default:return Ps(Os(l.prototype),"deviceType",this)}}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return"native_popup"}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isInviteFriendsSupported",get:function(){return this._supportedApis.includes("inviteAsync")}},{key:"isJoinCommunitySupported",get:function(){return this._isJoinCommunitySupported}},{key:"isShareSupported",get:function(){return this._supportedApis.includes("shareAsync")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://connect.facebook.net/en_US/fbinstant.8.0.js").then((function(){return be("FBInstant")})).then((function(){return e._platformSdk=window.FBInstant,e._platformSdk.initializeAsync()})).then((function(){return e._isPlayerAuthorized=!0,e._playerId=e._platformSdk.player.getID(),e._contextId=e._platformSdk.context.getID(),e._platformLanguage=e._platformSdk.getLocale(),"string"==typeof e._platformLanguage&&(e._platformLanguage=e._platformLanguage.substring(0,2).toLowerCase()),e._supportedApis=e._platformSdk.getSupportedAPIs(),js(e,Ns,Hs).call(e),Promise.allSettled([e._platformSdk.community.canFollowOfficialPageAsync(),e._platformSdk.community.canJoinOfficialGroupAsync()]).then((function(t){var r,n,o=(n=2,function(e){if(Array.isArray(e))return e}(r=t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(r,n)||function(e,t){if(e){if("string"==typeof e)return bs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bs(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],s="fulfilled"===i.status&&i.value,c="fulfilled"===a.status&&a.value;e._isJoinCommunitySupported=!0===s&&!0===c}))})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(t){return e._rejectPromiseDecorator(v.INITIALIZE,t)}))),t.promise}},{key:"sendMessage",value:function(e){var t=this;return e===d.GAME_READY?(this._platformSdk.setLoadingProgress(100),this._options.subscribeForNotificationsOnStart&&setTimeout((function(){return js(t,Ms,Us).call(t)}),0),new Promise((function(e){t._platformSdk.startGameAsync().then(e)}))):Ps(Os(l.prototype),"sendMessage",this).call(this,e)}},{key:"authorizePlayer",value:function(){return Promise.resolve()}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL?this._supportedApis.includes("player.getDataAsync"):Ps(Os(l.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL?this._isPlayerAuthorized:Ps(Os(l.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){var i=Array.isArray(e)?e:[e];n._platformSdk.player.getDataAsync(i).then((function(e){var n=i.map((function(t){var n=e[t];return r||"object"!==Ss(n)||null===n?null!=n?n:null:JSON.stringify(n)}));t(n)})).catch(o)})):Ps(Os(l.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){var i={};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.player.setDataAsync(i).then(r).catch(o)})):Ps(Os(l.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){var o={};if(Array.isArray(e))for(var i=0;i<e.length;i++)o[e[i]]=null;else o[e]=null;r._platformSdk.player.setDataAsync(o).then(t).catch(n)})):Ps(Os(l.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showBanner",value:function(e,t){var r=this;this._platformSdk.loadBannerAdAsync(t,e).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideBannerAdAsync().then((function(){e._setBannerState(s.HIDDEN)})).catch((function(){e._setBannerState(s.FAILED)}))}},{key:"preloadInterstitial",value:function(e){js(this,Gs,Fs).call(this,e)}},{key:"showInterstitial",value:function(e){var t=this;js(this,Gs,Fs).call(this,e).then((function(e){return t._setInterstitialState(i.OPENED),e.showAsync()})).then((function(){t._setInterstitialState(i.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!1)})).finally((function(){js(t,Gs,Fs).call(t,e,!0)}))}},{key:"preloadRewarded",value:function(e){js(this,Bs,xs).call(this,e)}},{key:"showRewarded",value:function(e){var t=this;js(this,Bs,xs).call(this,e).then((function(e){return t._setRewardedState(a.OPENED),e.showAsync()})).then((function(){t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED)})).catch((function(){return t._advertisementShowErrorPopup(!0)})).finally((function(){js(t,Bs,xs).call(t,e,!0)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.globalLeaderboards.setScoreAsync(e,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsShowNativePopup",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);if(!r){r=this._createPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP);var n=function(){var e=document.createElement("div");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center",e.style.zIndex="9999",e.id="loading-overlay";var t=document.createElement("div");return t.style.fontSize="24px",t.style.color="#fff",t.innerText="Loading...",e.appendChild(t),e}();document.body.appendChild(n),this._platformSdk.globalLeaderboards.getTopEntriesAsync(e,20).then((function(e){var r=e.map((function(e){return{score:e.getScore(),sessionID:e.getPlayer().getSessionID()}})),o=t._platformSdk.overlayViews.createOverlayViewWithXMLString('\n    <View style="position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); display: flex; justify-content: center; align-items: center" onTapEvent="close">\n        <View style="position: relative; background-color: #2E3C75;color: #fff;padding: 20px;border-radius: 10px;box-shadow: 0 0 10px #2E3C75;font-size: 24px;text-align: center;min-width: 250px;max-width: 30%;max-height: 80%;overflow: auto;flex-direction: column;justify-content: center;align-items: center;">\n            <View style="display: flex; flex-direction: column; align-items: center; justify-content: center;" onTapEvent="leaderboard">\n                <For source="{{players}}" itemName="player">\n                    <View style="display: flex;align-items: center;justify-content: space-between;width: 100%;gap: 10px;">\n                      <Image src="{{FBInstant.players[{{player.sessionID}}].photo}}" style="width: 50px; height: 50px; border-radius: 50%" />\n                      <Text content="{{FBInstant.players[{{player.sessionID}}].name}}" style="flex: 1; text-align: start;" />\n                      <Text content="{{player.score}}" />\n                    </View>\n                </For>\n            </View>\n        </View>\n    </View>\n',"",{players:r},(function(e){e.showAsync(),t._overlay=e,n.remove(),t._resolvePromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP)}),(function(e,r){n.remove(),t._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,r)})).iframeElement;o.style.zIndex=9999,o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.height="100vh",o.style.width="100vw",o.style.border=0,o.id=o.name,document.body.appendChild(o)})).catch((function(e){n.remove(),t._rejectPromiseDecorator(v.LEADERBOARDS_SHOW_NATIVE_POPUP,e)}))}return r.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);r||(r={id:e});var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payments.purchaseAsync({productID:r.platformProductId}).then((function(r){var n=gs({id:e},r);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payments.consumePurchaseAsync(this._paymentsPurchases[r].purchaseToken).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payments.getCatalogAsync().then((function(r){var n=t.map((function(e){var t=r.find((function(t){return t.productID===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,imageURI:t.imageURI,price:t.price,priceCurrencyCode:t.priceCurrencyCode,priceValue:t.priceAmount}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payments.getPurchasesAsync().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=gs({id:r.find((function(t){return t.id===e.productID})).id},e);return delete t.productID,t})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.image||!t.text)return Promise.reject();if(!Ee(t.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.INVITE_FRIENDS);return r||(r=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.inviteAsync(t).then((function(){e._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(v.INVITE_FRIENDS,t)}))),r.promise}},{key:"joinCommunity",value:function(e){var t=this,r=this._getPromiseDecorator(v.JOIN_COMMUNITY);return r||(r=this._createPromiseDecorator(v.JOIN_COMMUNITY),e&&!0===e.isPage?this._platformSdk.community.followOfficialPageAsync().then((function(e){return t._resolvePromiseDecorator(v.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(v.JOIN_COMMUNITY,e)})):this._platformSdk.community.joinOfficialGroupAsync().then((function(e){return t._resolvePromiseDecorator(v.JOIN_COMMUNITY,e)})).catch((function(e){return t._rejectPromiseDecorator(v.JOIN_COMMUNITY,e)}))),r.promise}},{key:"share",value:function(e){var t=this;if(!e.image||!e.text)return Promise.reject();if(!Ee(e.image))return Promise.reject(new Error("Image is not base64"));var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.shareAsync(gs({intent:"REQUEST"},e)).then((function(){t._resolvePromiseDecorator(v.SHARE)})).catch((function(e){t._rejectPromiseDecorator(v.SHARE,e)}))),r.promise}}],n&&Es(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}($r);function zs(e){return zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zs(e)}function Zs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ys(n.key),n)}}function Ys(e){var t=function(e,t){if("object"!=zs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=zs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==zs(t)?t:String(t)}var Js,Ks=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*";window.parent&&window.parent.postMessage(e,t)}},{key:"addListener",value:function(e){window.addEventListener("message",e)}},{key:"removeListener",value:function(e){window.removeEventListener("message",e)}},{key:"generateMessageId",value:function(){return"".concat(Date.now(),"-").concat(Math.random())}}],r&&Zs(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(r),!0).forEach((function(t){ac(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qs(e){return Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qs(e)}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ec(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sc(n.key),n)}}function tc(e,t){return tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tc(e,t)}function rc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nc(e,t){uc(e,t),t.add(e)}function oc(){return oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ic(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},oc.apply(this,arguments)}function ic(e){return ic=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ic(e)}function ac(e,t,r){return(t=sc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sc(e){var t=function(e,t){if("object"!=Qs(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Qs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qs(t)?t:String(t)}function cc(e,t,r){uc(e,t),t.set(e,r)}function uc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function lc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function fc(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}var pc="banner",dc="get_data_from_storage",hc="get_server_time",yc="clipboard_read",mc="unlock_achievement",vc="get_achievements",_c="get_performance_resources",gc="isStorageInternalSupported",Sc="isStorageLocalSupported",bc=new WeakMap,Ec=new WeakMap,Pc=new WeakSet,wc=new WeakSet,Ac=function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tc(e,t)}(p,r);var n,o,c,u,l=(c=p,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ic(c);if(u){var r=ic(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Qs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rc(e)}(this,e)});function p(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return nc(rc(e=l.call.apply(l,[this].concat(r))),wc),nc(rc(e),Pc),cc(rc(e),bc,{get:Oc,set:void 0}),cc(rc(e),Ec,{writable:!0,value:new Ks}),ac(rc(e),"_supportedFeatures",[]),ac(rc(e),"_leaderboardsType",null),e}return n=p,(o=[{key:"platformId",get:function(){return e.QA_TOOL}},{key:"platformLanguage",get:function(){return this._supportedFeatures.includes("isGetLanguageSupported")&&fc(this,Ec).send({type:t.PLATFORM,action:"get_language",options:{language:this._platformLanguage}}),this._platformLanguage}},{key:"platformTld",get:function(){return this._platformTld}},{key:"deviceType",get:function(){return this._deviceType}},{key:"platformPayload",get:function(){return this._platformPayload}},{key:"isInterstitialSupported",get:function(){return this._supportedFeatures.includes("isInterstitialSupported")}},{key:"isRewardedSupported",get:function(){return this._supportedFeatures.includes("isRewardedSupported")}},{key:"isPlayerAuthorizationSupported",get:function(){return this._supportedFeatures.includes("isPlayerAuthorizationSupported")}},{key:"isPaymentsSupported",get:function(){return this._supportedFeatures.includes("isPaymentsSupported")}},{key:"isRemoteConfigSupported",get:function(){return this._supportedFeatures.includes("isRemoteConfigSupported")}},{key:"isInviteFriendsSupported",get:function(){return this._supportedFeatures.includes("isInviteFriendsSupported")}},{key:"isJoinCommunitySupported",get:function(){return this._supportedFeatures.includes("isJoinCommunitySupported")}},{key:"isShareSupported",get:function(){return this._supportedFeatures.includes("isShareSupported")}},{key:"isCreatePostSupported",get:function(){return this._supportedFeatures.includes("isCreatePostSupported")}},{key:"isAddToHomeScreenSupported",get:function(){return this._supportedFeatures.includes("isAddToHomeScreenSupported")}},{key:"isAddToFavoritesSupported",get:function(){return this._supportedFeatures.includes("isAddToFavoritesSupported")}},{key:"isRateSupported",get:function(){return this._supportedFeatures.includes("isRateSupported")}},{key:"leaderboardsType",get:function(){var e;return null!==(e=this._leaderboardsType)&&void 0!==e?e:h}},{key:"isClipboardSupported",get:function(){return this._supportedFeatures.includes("isClipboardSupported")}},{key:"isAchievementsSupported",get:function(){return this._supportedFeatures.includes("isAchievementsSupported")}},{key:"isGetAchievementsListSupported",get:function(){return this._supportedFeatures.includes("isGetAchievementsListSupported")}},{key:"isAchievementsNativePopupSupported",get:function(){return this._supportedFeatures.includes("isAchievementsNativePopupSupported")}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),this._defaultStorageType=f.PLATFORM_INTERNAL,fc(this,Ec).addListener((function(r){var n=r.data;if(null!=n&&n.type&&n.type===t.PLATFORM&&(n.action===v.INITIALIZE&&lc(e,Pc,Tc).call(e,n),n.action===_c)){var o,i=fc(e,Ec).generateMessageId(),a=(null==n||null===(o=n.options)||void 0===o?void 0:o.resources)||[];lc(e,wc,kc).call(e,i,a)}})),fc(this,Ec).send({type:t.PLATFORM,action:v.INITIALIZE})),r.promise}},{key:"authorizePlayer",value:function(e){var r=this,n=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);if(!n){n=this._createPromiseDecorator(v.AUTHORIZE_PLAYER);var o=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function e(n){var i,a=n.data;if((null==a?void 0:a.type)===t.PLAYER&&a.action===v.AUTHORIZE_PLAYER&&a.id===o){var s=a.player,c=a.auth;"success"===c.status?(r._playerId=s.userId,r._isPlayerAuthorized=s.isAuthorized,r._playerName=s.name,Array.isArray(s.photos)&&(r._playerPhotos=function(e){if(Array.isArray(e))return $s(e)}(i=s.photos)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||function(e,t){if(e){if("string"==typeof e)return $s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$s(e,t):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r._playerExtra=s,r._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)):r._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,c.error),fc(r,Ec).removeListener(e)}})),fc(this,Ec).send({type:t.PLAYER,action:v.AUTHORIZE_PLAYER,id:o,options:e})}return n.promise}},{key:"sendMessage",value:function(e){return[d.GAME_READY,d.IN_GAME_LOADING_STARTED,d.IN_GAME_LOADING_STOPPED,d.GAMEPLAY_STARTED,d.GAMEPLAY_STOPPED,d.PLAYER_GOT_ACHIEVEMENT,d.GAME_OVER].includes(e)?(fc(this,Ec).send({type:t.PLATFORM,action:e}),Promise.resolve()):oc(ic(p.prototype),"sendMessage",this).call(this,e)}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(r,n){var o,i=fc(e,Ec).generateMessageId(),a=function a(s){var c=s.data;if((null==c?void 0:c.type)===t.PLATFORM&&c.action===hc&&c.id===i){if(!c.time)return void n(new Error("Invalid server time"));clearTimeout(o),r(c.time),fc(e,Ec).removeListener(a)}};fc(e,Ec).addListener(a),fc(e,Ec).send({type:t.PLATFORM,action:hc,id:i}),o=setTimeout((function(){n(new Error("Server time request timeout")),fc(e,Ec).removeListener(a)}),5e3)}))}},{key:"isStorageSupported",value:function(e){return fc(this,Ec).send({type:t.STORAGE,action:"is_storage_supported",options:{storageType:e}}),!(e!==f.PLATFORM_INTERNAL||!this._supportedFeatures.includes(gc))||!(e!==f.LOCAL_STORAGE||!this._supportedFeatures.includes(Sc))}},{key:"isStorageAvailable",value:function(e){return fc(this,Ec).send({type:t.STORAGE,action:"is_storage_available",options:{storageType:e}}),!(e!==f.PLATFORM_INTERNAL||!this._supportedFeatures.includes(gc))||!(e!==f.LOCAL_STORAGE||!this._supportedFeatures.includes(Sc))}},{key:"getDataFromStorage",value:function(e,r,n){var o=this;if(r===f.PLATFORM_INTERNAL||r===f.LOCAL_STORAGE&&fc(this,bc)){var i=fc(this,Ec).generateMessageId();return new Promise((function(a){fc(o,Ec).addListener((function r(n){var s=n.data;(null==s?void 0:s.type)===t.STORAGE&&s.action===dc&&s.id===i&&(Array.isArray(e)?a(e.map((function(e){return s.storage[e]}))):a(s.storage[e]),fc(o,Ec).removeListener(r))})),fc(o,Ec).send({type:t.STORAGE,action:dc,id:i,options:{key:e,storageType:r,tryParseJson:n}})}))}return fc(this,Ec).send({type:t.STORAGE,action:dc,options:{key:e,storageType:r,tryParseJson:n}}),oc(ic(p.prototype),"getDataFromStorage",this).call(this,e,r,n)}},{key:"setDataToStorage",value:function(e,r,n){return fc(this,Ec).send({type:t.STORAGE,action:"set_data_to_storage",options:{key:e,value:r,storageType:n}}),n===f.PLATFORM_INTERNAL||n===f.LOCAL_STORAGE&&fc(this,bc)?Promise.resolve():oc(ic(p.prototype),"setDataToStorage",this).call(this,e,r,n)}},{key:"deleteDataFromStorage",value:function(e,r){return fc(this,Ec).send({type:t.STORAGE,action:"delete_data_from_storage",options:{key:e,storageType:r}}),r===f.PLATFORM_INTERNAL||r===f.LOCAL_STORAGE&&fc(this,bc)?Promise.resolve():oc(ic(p.prototype),"deleteDataFromStorage",this).call(this,e,r)}},{key:"showInterstitial",value:function(e){var r=this;fc(this,Ec).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setInterstitialState(i.LOADING);break;case"open":r._setInterstitialState(i.OPENED);break;case"failed":r._setInterstitialState(i.FAILED);break;case"close":r._setInterstitialState(i.CLOSED),fc(r,Ec).removeListener(e)}})),fc(this,Ec).send({type:t.ADVERTISEMENT,action:"interstitial",options:{placement:e}})}},{key:"showRewarded",value:function(e){var r=this;fc(this,Ec).addListener((function e(n){var o=n.data;if((null==o?void 0:o.type)===t.ADVERTISEMENT)switch(o.payload.status){case"start":r._setRewardedState(a.LOADING);break;case"open":r._setRewardedState(a.OPENED);break;case"failed":r._setRewardedState(a.FAILED);break;case"rewarded":r._setRewardedState(a.REWARDED);break;case"close":r._setRewardedState(a.CLOSED),fc(r,Ec).removeListener(e)}})),fc(this,Ec).send({type:t.ADVERTISEMENT,action:"reward",options:{placement:e}})}},{key:"showBanner",value:function(e,r){this._setBannerState(s.SHOWN),fc(this,Ec).send({type:t.ADVERTISEMENT,action:s.SHOWN,options:{type:pc,position:e,placement:r}})}},{key:"hideBanner",value:function(){this._setBannerState(s.HIDDEN),fc(this,Ec).send({type:t.ADVERTISEMENT,action:s.HIDDEN,options:{type:pc}})}},{key:"checkAdBlock",value:function(){return fc(this,Ec).send({type:"check_adblock",action:v.ADBLOCK_DETECT}),oc(ic(p.prototype),"checkAdBlock",this).call(this)}},{key:"inviteFriends",value:function(){var e=this._getPromiseDecorator(v.INVITE_FRIENDS);return e||(e=this._createPromiseDecorator(v.INVITE_FRIENDS),this._resolvePromiseDecorator(v.INVITE_FRIENDS),fc(this,Ec).send({type:t.SOCIAL,action:v.INVITE_FRIENDS})),e.promise}},{key:"joinCommunity",value:function(){var e=this._getPromiseDecorator(v.JOIN_COMMUNITY);return e||(e=this._createPromiseDecorator(v.JOIN_COMMUNITY),this._resolvePromiseDecorator(v.JOIN_COMMUNITY),fc(this,Ec).send({type:t.SOCIAL,action:v.JOIN_COMMUNITY})),e.promise}},{key:"share",value:function(){var e=this._getPromiseDecorator(v.SHARE);return e||(e=this._createPromiseDecorator(v.SHARE),this._resolvePromiseDecorator(v.SHARE),fc(this,Ec).send({type:t.SOCIAL,action:v.SHARE})),e.promise}},{key:"createPost",value:function(){var e=this._getPromiseDecorator(v.CREATE_POST);return e||(e=this._createPromiseDecorator(v.CREATE_POST),this._resolvePromiseDecorator(v.CREATE_POST),fc(this,Ec).send({type:t.SOCIAL,action:v.CREATE_POST})),e.promise}},{key:"addToHomeScreen",value:function(){var e=this._getPromiseDecorator(v.ADD_TO_HOME_SCREEN);return e||(e=this._createPromiseDecorator(v.ADD_TO_HOME_SCREEN),this._resolvePromiseDecorator(v.ADD_TO_HOME_SCREEN),fc(this,Ec).send({type:t.SOCIAL,action:v.ADD_TO_HOME_SCREEN})),e.promise}},{key:"addToFavorites",value:function(){var e=this._getPromiseDecorator(v.ADD_TO_FAVORITES);return e||(e=this._createPromiseDecorator(v.ADD_TO_FAVORITES),this._resolvePromiseDecorator(v.ADD_TO_FAVORITES),fc(this,Ec).send({type:t.SOCIAL,action:v.ADD_TO_FAVORITES})),e.promise}},{key:"rate",value:function(){var e=this._getPromiseDecorator(v.RATE);return e||(e=this._createPromiseDecorator(v.RATE),this._resolvePromiseDecorator(v.RATE),fc(this,Ec).send({type:t.SOCIAL,action:v.RATE})),e.promise}},{key:"paymentsPurchase",value:function(e){var r=this,n=this._paymentsGetProductPlatformData(e);if(!n)return Promise.reject();var o=this._getPromiseDecorator(v.PURCHASE);if(!o){o=this._createPromiseDecorator(v.PURCHASE);var i=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function n(o){var a=o.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===v.PURCHASE&&a.id===i){var s;if(!a.purchase||"object"!==Qs(a.purchase))return r._rejectPromiseDecorator(v.PURCHASE,new Error("Invalid purchase")),void fc(r,Ec).removeListener(n);if(null!==(s=a.purchase)&&void 0!==s&&s.status){var c=Xs({id:e},a.purchase.purchaseData);delete c.commonId,r._paymentsPurchases.push(c),r._resolvePromiseDecorator(v.PURCHASE,c)}else{var u;r._rejectPromiseDecorator(v.PURCHASE,(null===(u=a.purchase)||void 0===u?void 0:u.error)||new Error("Unknown purchase error"))}fc(r,Ec).removeListener(n)}})),fc(this,Ec).send({type:t.PAYMENTS,action:v.PURCHASE,id:i,options:{product:n}})}return o.promise}},{key:"paymentsConsumePurchase",value:function(e){var r=this,n=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(n<0)return Promise.reject();var o=this._getPromiseDecorator(v.CONSUME_PURCHASE);if(!o){o=this._createPromiseDecorator(v.CONSUME_PURCHASE);var i=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function o(a){var s=a.data;if((null==s?void 0:s.type)===t.PAYMENTS&&s.action===v.CONSUME_PURCHASE&&s.id===i){var c;if(!s.purchase||"object"!==Qs(s.purchase))return r._rejectPromiseDecorator(v.CONSUME_PURCHASE,new Error("Invalid purchase")),void fc(r,Ec).removeListener(o);if(null!==(c=s.purchase)&&void 0!==c&&c.status){var u=Xs({id:e},s.purchase);r._paymentsPurchases.splice(n,1),r._resolvePromiseDecorator(v.CONSUME_PURCHASE,u)}else{var l;r._rejectPromiseDecorator(v.CONSUME_PURCHASE,(null===(l=s.purchase)||void 0===l?void 0:l.error)||new Error("Unknown consume purchase error"))}fc(r,Ec).removeListener(o)}})),fc(this,Ec).send({type:t.PAYMENTS,action:v.CONSUME_PURCHASE,id:i,options:{product:this._paymentsPurchases[n]}})}return o.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_CATALOG);if(!r){r=this._createPromiseDecorator(v.GET_CATALOG);var n=this._paymentsGetProductsPlatformData(),o=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function r(i){var a=i.data;if((null==a?void 0:a.type)===t.PAYMENTS&&a.action===v.GET_CATALOG&&a.id===o){var s=n.map((function(e){return{id:e.id,price:"".concat(e.amount," Gam"),priceCurrencyCode:"Gam",priceCurrencyImage:"https://games.playgama.com/assets/gold-fennec-coin-large.webp",priceValue:e.amount}}));fc(e,Ec).removeListener(r),e._resolvePromiseDecorator(v.GET_CATALOG,s)}})),fc(this,Ec).send({type:t.PAYMENTS,action:v.GET_CATALOG,id:o})}return r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_PURCHASES);if(!r){r=this._createPromiseDecorator(v.GET_PURCHASES);var n=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.PAYMENTS&&i.action===v.GET_PURCHASES&&i.id===n){var a=e._paymentsGetProductsPlatformData();e._paymentsPurchases=i.purchases.map((function(e){return Xs({id:a.find((function(t){return t.id===e.id})).id},e.purchaseData)})),fc(e,Ec).removeListener(r),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)}})),fc(this,Ec).send({type:t.PAYMENTS,action:v.GET_PURCHASES,id:n})}return r.promise}},{key:"getRemoteConfig",value:function(){var e=this,r=this._getPromiseDecorator(v.GET_REMOTE_CONFIG);if(!r){r=this._createPromiseDecorator(v.GET_REMOTE_CONFIG);var n=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function r(o){var i=o.data;(null==i?void 0:i.type)===t.REMOTE_CONFIG&&i.action===v.GET_REMOTE_CONFIG&&i.id===n&&(e._resolvePromiseDecorator(v.GET_REMOTE_CONFIG,i.result),fc(e,Ec).removeListener(r))})),fc(this,Ec).send({type:t.REMOTE_CONFIG,action:v.GET_REMOTE_CONFIG,id:n})}return r.promise}},{key:"clipboardWrite",value:function(e){var r=this,n=this._getPromiseDecorator(v.CLIPBOARD_WRITE);if(!n){n=this._createPromiseDecorator(v.CLIPBOARD_WRITE);var o=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.CLIPBOARD&&i.action===v.CLIPBOARD_WRITE&&i.id===o&&(r._resolvePromiseDecorator(v.CLIPBOARD_WRITE,!0),fc(r,Ec).removeListener(e))})),fc(this,Ec).send({type:t.CLIPBOARD,action:v.CLIPBOARD_WRITE,id:o,options:{text:e}})}return n.promise}},{key:"clipboardRead",value:function(){var e=this,r=this._getPromiseDecorator(yc);if(!r){r=this._createPromiseDecorator(yc);var n=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function r(o){var i=o.data;if((null==i?void 0:i.type)===t.CLIPBOARD&&i.action===yc&&i.id===n){var a=i.text;e._resolvePromiseDecorator(yc,a),fc(e,Ec).removeListener(r)}})),fc(this,Ec).send({type:t.CLIPBOARD,action:yc,id:n,options:{}})}return r.promise}},{key:"leaderboardsSetScore",value:function(e,r){if(this.leaderboardsType===h)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o={id:e,score:r};fc(this,Ec).send({type:t.LEADERBOARDS,action:v.LEADERBOARDS_SET_SCORE,options:o}),this._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var r=this;if(this.leaderboardsType===h||this.leaderboardsType===m)return Promise.reject(new Error("Leaderboards are not available"));var n=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);var o=fc(this,Ec).generateMessageId();fc(this,Ec).addListener((function e(n){var i=n.data;(null==i?void 0:i.type)===t.LEADERBOARDS&&i.action===v.LEADERBOARDS_GET_ENTRIES&&i.id===o?(r._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,i.entries),fc(r,Ec).removeListener(e)):r._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES)})),fc(this,Ec).send({type:t.LEADERBOARDS,action:v.LEADERBOARDS_GET_ENTRIES,id:o,options:{id:e}})}return n.promise}},{key:"unlockAchievement",value:function(e){var r=this;return new Promise((function(n){var o=fc(r,Ec).generateMessageId();fc(r,Ec).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===mc&&a.id===o&&(n(a.result),fc(r,Ec).removeListener(e))})),fc(r,Ec).send({type:t.ACHIEVEMENTS,action:mc,id:o,options:e})}))}},{key:"getAchievementsList",value:function(e){var r=this;return new Promise((function(n){var o=fc(r,Ec).generateMessageId();fc(r,Ec).addListener((function e(i){var a=i.data;(null==a?void 0:a.type)===t.ACHIEVEMENTS&&a.action===vc&&a.id===o&&(n(a.result),fc(r,Ec).removeListener(e))})),fc(r,Ec).send({type:t.ACHIEVEMENTS,action:vc,id:o,options:e})}))}},{key:"showAchievementsNativePopup",value:function(){return fc(this,Ec).send({type:t.ACHIEVEMENTS,action:"show_achievements_native_popup"}),Promise.resolve()}},{key:"_paymentsGetProductsPlatformData",value:function(){return this._options.payments?this._options.payments.map((function(e){return Xs({id:e.id},e.playgama)})):[]}},{key:"_paymentsGetProductPlatformData",value:function(e){var t=this._options.payments;if(!t)return null;var r=t.find((function(t){return t.id===e}));return r?Xs({id:r.id},r.playgama):null}}])&&ec(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),p}($r);function Oc(){return this._supportedFeatures.includes("isStorageRemoteLocalSupported")}function Tc(e){var t,r,n,o,i;this._supportedFeatures=e.supportedFeatures||[],this._isBannerSupported=this._supportedFeatures.includes("isBannerSupported");var a=e.config,s=void 0===a?{}:a;this._deviceType=null!==(t=s.deviceType)&&void 0!==t?t:oc(ic(Js.prototype),"deviceType",this),this._platformLanguage=null!==(r=s.platformLanguage)&&void 0!==r?r:oc(ic(Js.prototype),"platformLanguage",this),this._platformTld=null!==(n=s.platformTld)&&void 0!==n?n:oc(ic(Js.prototype),"platformTld",this),this._platformPayload=null!==(o=s.platformPayload)&&void 0!==o?o:oc(ic(Js.prototype),"platformPayload",this),this._leaderboardsType=null!==(i=s.leaderboardsType)&&void 0!==i?i:h,this._paymentsPurchases=e.purchases||[],this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE),fc(this,Ec).send({type:"liveness",action:"ping",options:{version:"1.26.0-preview.1"}})}function kc(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(r)?r:[],o=performance.getEntriesByType("resource")||[],i=n.length>0?n:["name","initiatorType"],a=o.map((function(e){var t={};return i.forEach((function(r){r in e&&(t[r]=e[r])})),t}));return fc(this,Ec).send({type:t.PLATFORM,action:_c,id:e,options:{resources:a}}),Promise.resolve(o)}Js=Ac;const Dc=Ac;function Ic(e){return Ic="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ic(e)}function Rc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Lc(n.key),n)}}function Lc(e){var t=function(e,t){if("object"!=Ic(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ic(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ic(t)?t:String(t)}function jc(){return jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nc(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},jc.apply(this,arguments)}function Cc(e,t){return Cc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Cc(e,t)}function Nc(e){return Nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nc(e)}const Gc=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cc(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Nc(o);if(s){var r=Nc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ic(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return e.POKI}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"isClipboardSupported",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://game-cdn.poki.com/scripts/v2/poki-sdk.js").then((function(){be("PokiSDK","init").then((function(){e._platformSdk=window.PokiSDK,e._platformSdk.init().then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))}))),t.promise}},{key:"sendMessage",value:function(e){switch(e){case d.GAME_READY:return this._platformSdk.gameLoadingFinished(),Promise.resolve();case d.GAMEPLAY_STARTED:return this._platformSdk.gameplayStart(),Promise.resolve();case d.GAMEPLAY_STOPPED:return this._platformSdk.gameplayStop(),Promise.resolve();default:return jc(Nc(u.prototype),"sendMessage",this).call(this,e)}}},{key:"showInterstitial",value:function(){var e=this,t=!1;this._platformSdk.commercialBreak((function(){t=!0,e._setInterstitialState(i.OPENED)})).then((function(){t?e._setInterstitialState(i.CLOSED):e._setInterstitialState(i.FAILED)})).catch((function(t){e._setInterstitialState(i.FAILED,t)}))}},{key:"showRewarded",value:function(){var e=this,t=!1;this._platformSdk.rewardedBreak((function(){t=!0,e._setRewardedState(a.OPENED)})).then((function(r){t?(r&&e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(t){e._setRewardedState(a.FAILED,t)}))}}])&&Rc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function Bc(e){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bc(e)}function Mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=xc(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xc(n.key),n)}}function xc(e){var t=function(e,t){if("object"!=Bc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Bc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Bc(t)?t:String(t)}function Uc(e,t){return Uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Uc(e,t)}function Vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wc(e){return Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Wc(e)}function zc(e,t){Yc(e,t),t.add(e)}function Zc(e,t,r){Yc(e,t),t.set(e,r)}function Yc(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jc(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Xc(e,t,"set"),r),r}function Kc(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function qc(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Xc(e,t,"get"))}function Xc(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var Qc=new WeakMap,$c=new WeakMap,eu=new WeakSet,tu=new WeakSet,ru=new WeakSet;function nu(){var e=this;return qc(this,Qc)?new Promise((function(t){qc(e,Qc).requestOutOfPageAd("interstitial").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!1).then((function(){return t()}));case"ready":e._setInterstitialState(i.OPENED),r.show()}r.addEventListener("ready",(function(){e._setInterstitialState(i.OPENED),r.show()})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!1).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setInterstitialState(i.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!1)}function ou(){var e=this;return qc(this,Qc)?new Promise((function(t){qc(e,Qc).requestOutOfPageAd("rewarded").then((function(r){switch(r.state){case"empty":return void e._advertisementShowErrorPopup(!0).then((function(){return t()}));case"ready":e._setRewardedState(a.OPENED),r.show()}r.addEventListener("ready",(function(){e._setRewardedState(a.OPENED),r.show()})),r.addEventListener("rewarded",(function(){e._setRewardedState(a.REWARDED)})),r.addEventListener("empty",(function(){e._advertisementShowErrorPopup(!0).then((function(){return t()}))})),r.addEventListener("closed",(function(){e._setRewardedState(a.CLOSED),t()}))}))})):this._advertisementShowErrorPopup(!0)}function iu(e){e?(this._isPlayerAuthorized=!0,this._playerId=e.playerId,this._playerName=e.playerDisplayName,this._playerExtra=e,Jc(this,$c,"personal"===e.userAccountType.toLowerCase())):this._playerApplyGuestData()}const au=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uc(e,t)}(l,t);var r,n,o,c,u=(o=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Wc(o);if(c){var r=Wc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Bc(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vc(e)}(this,e)});function l(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zc(Vc(e=u.call.apply(u,[this].concat(r))),ru),zc(Vc(e),tu),zc(Vc(e),eu),Zc(Vc(e),Qc,{writable:!0,value:null}),Zc(Vc(e),$c,{writable:!0,value:!1}),e}return r=l,(n=[{key:"platformId",get:function(){return e.MSN}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isShareSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isBannerSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return qc(this,$c)}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);if(!t){var r;t=this._createPromiseDecorator(v.INITIALIZE),_e("https://assets.msn.com/staticsb/statics/latest/msstart-games-sdk/msstart-v1.0.0-rc.20.min.js").then((function(){return be("$msstart")})).then((function(){e._platformSdk=window.$msstart,e._platformSdk.getSignedInUserAsync().then((function(t){Kc(e,ru,iu).call(e,t)})).catch((function(){Kc(e,ru,iu).call(e,null)})).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}));var n=null===(r=this._options)||void 0===r||null===(r=r.advertisement)||void 0===r?void 0:r.backfillId;n&&_e("https://playgama.com/ads/msn.v0.1.js").then((function(){return be("pgAds")})).then((function(){window.pgAds.init(n).then((function(){Jc(e,Qc,window.pgAds);var t=e._options.gameId;qc(e,Qc).updateTargeting({gameId:t})}))}))}return t.promise}},{key:"authorizePlayer",value:function(){var e=this;return this._isPlayerAuthorized?Promise.resolve():new Promise((function(t,r){e._platformSdk.signInAsync().then((function(r){Kc(e,ru,iu).call(e,r),t()})).catch((function(t){Kc(e,ru,iu).call(e,null),r(t)}))}))}},{key:"share",value:function(e){var t=this;return new Promise((function(r,n){t._platformSdk.shareAsync(e).then(r).catch(n)}))}},{key:"leaderboardsSetScore",value:function(e,t){var r=this;return new Promise((function(e,n){r._platformSdk.submitGameResultsAsync(t).then(e).catch(n)}))}},{key:"showBanner",value:function(e){var t,r=this;t="top"===e?"top:728x90":"bottom:320x50",this._platformSdk.showDisplayAdsAsync([t]).then((function(){r._setBannerState(s.SHOWN)})).catch((function(){r._setBannerState(s.FAILED)}))}},{key:"hideBanner",value:function(){var e=this;this._platformSdk.hideDisplayAdsAsync().then((function(){e._setBannerState(s.HIDDEN)}))}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.loadAdsAsync(!1).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setInterstitialState(i.OPENED),t.showAdsCompletedAsync})).then((function(){return e._setInterstitialState(i.CLOSED)})).catch((function(){return Kc(e,eu,nu).call(e)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.loadAdsAsync(!0).then((function(t){return e._platformSdk.showAdsAsync(t.instanceId)})).then((function(t){return e._setRewardedState(a.OPENED),t.showAdsCompletedAsync})).then((function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)})).catch((function(){return Kc(e,tu,ou).call(e)}))}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.iap.purchaseAsync({productId:r.platformProductId}).then((function(r){if("IAP_PURCHASE_FAILURE"!==r.code){var n=Hc(Hc({id:e},r.receipt),{},{receiptSignature:r.receiptSignature});delete n.productId,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)}else t._rejectPromiseDecorator(v.PURCHASE,r.description)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.iap.consumeAsync({productId:this._paymentsPurchases[r].id}).then((function(n){if("IAP_CONSUME_FAILURE"!==n.code){t._paymentsPurchases.splice(r,1);var o=Hc(Hc({id:e},n.consumptionReceipt),{},{consumptionSignature:n.consumptionSignature});delete o.productId,t._resolvePromiseDecorator(v.CONSUME_PURCHASE,o)}else t._rejectPromiseDecorator(v.CONSUME_PURCHASE,n.description)})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.iap.getAllAddOnsAsync({productId:this._options.gameId}).then((function(r){if("IAP_GET_ALL_ADD_ONS_FAILURE"!==r.code){var n=t.map((function(e){var t=r.find((function(t){return t.productId===e.platformProductId}));return{id:e.id,title:t.title,description:t.description,publisherName:t.publisherName,inAppOfferToken:t.inAppOfferToken,isConsumable:t.isConsumable,price:"".concat(t.price.listPrice," ").concat(t.price.currencyCode," "),priceCurrencyCode:t.price.currencyCode,priceValue:t.price.listPrice}}));e._resolvePromiseDecorator(v.GET_CATALOG,n)}else e._rejectPromiseDecorator(v.GET_CATALOG,r.description)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.iap.getAllPurchasesAsync({productId:this._options.gameId}).then((function(t){if("IAP_GET_ALL_PURCHASES_FAILURE"!==t.code){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.receipts.map((function(e){var n=Hc(Hc({id:r.find((function(t){return t.id===e.productId})).id},e),{},{receiptSignature:t.receiptSignature});return delete n.productId,n})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)}else e._rejectPromiseDecorator(v.GET_PURCHASES,t.description)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}}])&&Fc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),l}($r);function su(e){return su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(e)}function cu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cu(Object(r),!0).forEach((function(t){mu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vu(n.key),n)}}function fu(){return fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hu(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},fu.apply(this,arguments)}function pu(e,t){return pu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pu(e,t)}function du(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hu(e){return hu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},hu(e)}function yu(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function mu(e,t,r){return(t=vu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vu(e){var t=function(e,t){if("object"!=su(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=su(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==su(t)?t:String(t)}function _u(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var gu=new WeakSet,Su=new WeakSet,bu=new WeakSet,Eu=new WeakSet,Pu=new WeakSet,wu=new WeakSet,Au=new WeakSet,Ou=new WeakSet,Tu=new WeakSet,ku=new WeakSet,Du=new WeakSet,Iu=new WeakSet,Ru=new WeakSet;function Lu(e,t){window.system&&window.system.postMessage(JSON.stringify({action:e,data:t}))}function ju(){if(window.system){var e=this;window.system.onmessage=function(t){try{var r=JSON.parse(t),n=r.action,o=r.data;n===v.INITIALIZE?_u(e,bu,Cu).call(e,o):n===v.AUTHORIZE_PLAYER?_u(e,Eu,Nu).call(e,o):n===v.SET_INTERSTITIAL_STATE?_u(e,Pu,Gu).call(e,o):n===v.SET_REWARDED_STATE?_u(e,wu,Bu).call(e,o):n===v.GET_CATALOG?_u(e,Au,Mu).call(e,o):n===v.PURCHASE?_u(e,Ou,Hu).call(e,o):n===v.CONSUME_PURCHASE?_u(e,Tu,Fu).call(e,o):n===v.GET_PURCHASES?_u(e,ku,xu).call(e,o):n===v.GET_STORAGE_DATA?_u(e,Du,Uu).call(e,o):n===v.SET_STORAGE_DATA?_u(e,Iu,Vu).call(e,o):n===v.DELETE_STORAGE_DATA&&_u(e,Ru,Wu).call(e,o)}catch(e){console.error("Error parsing Huawei message:",e)}}}}function Cu(e){e.success?(this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE,e)):this._rejectPromiseDecorator(v.INITIALIZE,new Error(e))}function Nu(e){if(!e.success)return this._playerApplyGuestData(),void this._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,new Error(e));this._playerId=e.playerId,this._playerName=e.playerName,this._isPlayerAuthorized=!0,this._resolvePromiseDecorator(v.AUTHORIZE_PLAYER)}function Gu(e){Object.values(i).includes(e.state)&&this._setInterstitialState(e.state,e.state===i.FAILED?new Error(e):void 0)}function Bu(e){Object.values(a).includes(e.state)&&this._setRewardedState(e.state,e.state===a.FAILED?new Error(e):void 0)}function Mu(e){if(e.success){var t=this._paymentsGetProductsPlatformData().map((function(t){var r=e.data.find((function(e){return e.productId===t.id}));return{id:t.id,title:r.productName,description:r.productDesc,price:r.price,priceCurrencyCode:r.currency,priceValue:1e-6*r.microsPrice,subSpecialPeriodCycles:r.subSpecialPeriodCycles,subProductLevel:r.subProductLevel,priceType:r.priceType}}));this._resolvePromiseDecorator(v.GET_CATALOG,t)}else this._rejectPromiseDecorator(v.GET_CATALOG,new Error(e))}function Hu(e){if(e.success){var t=e.data,r=uu({id:e.id},t);delete r.productId,this._paymentsPurchases.push(r),this._resolvePromiseDecorator(v.PURCHASE,r)}else this._rejectPromiseDecorator(v.PURCHASE,new Error(e))}function Fu(e){if(e.success){var t=this._paymentsPurchases.findIndex((function(t){return t.purchaseToken===e.purchaseToken}));t>=0&&this._paymentsPurchases.splice(t,1),this._resolvePromiseDecorator(v.CONSUME_PURCHASE,e)}else this._rejectPromiseDecorator(v.CONSUME_PURCHASE,new Error(e))}function xu(e){if(e.success){var t=this._paymentsGetProductsPlatformData();this._paymentsPurchases=e.data.map((function(e){var r=JSON.parse(e),n=uu({id:t.find((function(e){return e.id===r.productId})).id},r);return delete n.productId,n})),this._resolvePromiseDecorator(v.GET_PURCHASES,this._paymentsPurchases)}else this._rejectPromiseDecorator(v.GET_PURCHASES,new Error(e))}function Uu(e){e.success?this._resolvePromiseDecorator(v.GET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(v.GET_STORAGE_DATA,new Error(e))}function Vu(e){e.success?this._resolvePromiseDecorator(v.SET_STORAGE_DATA,e.data):this._rejectPromiseDecorator(v.SET_STORAGE_DATA,new Error(e))}function Wu(e){e.success?this._resolvePromiseDecorator(v.DELETE_STORAGE_DATA,e.data):this._rejectPromiseDecorator(v.DELETE_STORAGE_DATA,new Error(e))}const zu=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pu(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=hu(o);if(i){var r=hu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===su(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return du(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yu(du(e=a.call.apply(a,[this].concat(r))),Ru),yu(du(e),Iu),yu(du(e),Du),yu(du(e),ku),yu(du(e),Tu),yu(du(e),Ou),yu(du(e),Au),yu(du(e),wu),yu(du(e),Pu),yu(du(e),Eu),yu(du(e),bu),yu(du(e),Su),yu(du(e),gu),mu(du(e),"_defaultStorageType",f.PLATFORM_INTERNAL),e}return r=s,(n=[{key:"platformId",get:function(){return e.HUAWEI}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isExternalLinksAllowed",get:function(){return!0}},{key:"initialize",value:function(){if(this._isInitialized)return Promise.resolve();var e=this._getPromiseDecorator(v.INITIALIZE);return e||(e=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.appId?(this._appId=this._options.appId,_u(this,Su,ju).call(this),_u(this,gu,Lu).call(this,v.INITIALIZE,this._appId)):this._rejectPromiseDecorator(v.INITIALIZE,A)),e.promise}},{key:"authorizePlayer",value:function(){var e=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return e||(e=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),_u(this,gu,Lu).call(this,v.AUTHORIZE_PLAYER)),e.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||fu(hu(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||fu(hu(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"setDataToStorage",value:function(e,t,r){if(r!==f.PLATFORM_INTERNAL)return fu(hu(s.prototype),"setDataToStorage",this).call(this,e,t,r);var n=this._getPromiseDecorator(v.SET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(v.SET_STORAGE_DATA),_u(this,gu,Lu).call(this,v.SET_STORAGE_DATA,{key:e,value:t})),n.promise}},{key:"getDataFromStorage",value:function(e,t){if(t!==f.PLATFORM_INTERNAL)return fu(hu(s.prototype),"getDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(v.GET_STORAGE_DATA);return r||(r=this._createPromiseDecorator(v.GET_STORAGE_DATA),_u(this,gu,Lu).call(this,v.GET_STORAGE_DATA,e)),r.promise}},{key:"deleteDataFromStorage",value:function(e,t){if(t!==f.PLATFORM_INTERNAL)return fu(hu(s.prototype),"deleteDataFromStorage",this).call(this,e,t);var r=this._getPromiseDecorator(v.DELETE_STORAGE_DATA);return r||(r=this._createPromiseDecorator(v.DELETE_STORAGE_DATA),_u(this,gu,Lu).call(this,v.DELETE_STORAGE_DATA,e)),r.promise}},{key:"showInterstitial",value:function(e){_u(this,gu,Lu).call(this,v.SHOW_INTERSTITIAL,e)}},{key:"showRewarded",value:function(e){_u(this,gu,Lu).call(this,v.SHOW_REWARDED,e)}},{key:"paymentsPurchase",value:function(e){if(!this._paymentsGetProductPlatformData(e))return Promise.reject();var t=this._getPromiseDecorator(v.PURCHASE);return t||(t=this._createPromiseDecorator(v.PURCHASE),_u(this,gu,Lu).call(this,v.PURCHASE,e)),t.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(t<0)return Promise.reject();var r=this._getPromiseDecorator(v.CONSUME_PURCHASE);return r||(r=this._createPromiseDecorator(v.CONSUME_PURCHASE),_u(this,gu,Lu).call(this,v.CONSUME_PURCHASE,this._paymentsPurchases[t].purchaseToken)),r.promise}},{key:"paymentsGetCatalog",value:function(){var e=this._paymentsGetProductsPlatformData();if(!e)return Promise.reject();var t=this._getPromiseDecorator(v.GET_CATALOG);return t||(t=this._createPromiseDecorator(v.GET_CATALOG),_u(this,gu,Lu).call(this,v.GET_CATALOG,e.map((function(e){return e.id})))),t.promise}},{key:"paymentsGetPurchases",value:function(){var e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),_u(this,gu,Lu).call(this,v.GET_PURCHASES)),e.promise}}])&&lu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}($r);function Zu(e){return Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zu(e)}function Yu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ju(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=$u(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ku(){Ku=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==Zu(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Zu(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function qu(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Xu(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){qu(i,n,o,a,s,"next",e)}function s(e){qu(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Qu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$u(n.key),n)}}function $u(e){var t=function(e,t){if("object"!=Zu(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Zu(t)?t:String(t)}function el(){return el="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},el.apply(this,arguments)}function tl(e,t){return tl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tl(e,t)}function rl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nl(e){return nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nl(e)}var ol=new WeakSet;function il(){var e=this,t={loading:a.LOADING,opened:a.OPENED,closed:a.CLOSED,failed:a.FAILED,rewarded:a.REWARDED},r={loading:i.LOADING,opened:i.OPENED,closed:i.CLOSED,failed:i.FAILED},n={loading:s.LOADING,shown:s.SHOWN,hidden:s.HIDDEN,failed:s.FAILED};this._platformSdk.advertisement.on("REWARDED_STATE_CHANGED",(function(r){var n=t[r];n&&(e._setRewardedState(n),n===a.REWARDED&&e._setRewardedState(a.CLOSED))})),this._platformSdk.advertisement.on("INTERSTITIAL_STATE_CHANGED",(function(t){var n=r[t];n&&e._setInterstitialState(n)})),this._platformSdk.advertisement.on("BANNER_STATE_CHANGED",(function(t){var r=n[t];r&&e._setBannerState(r)}))}const al=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tl(e,t)}(u,t);var r,n,o,i,a,s,c=(a=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nl(a);if(s){var r=nl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Zu(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rl(e)}(this,e)});function u(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(t=rl(e=c.call.apply(c,[this].concat(o))),r=ol),r.add(t),e}return r=u,n=[{key:"platformId",get:function(){return e.BITQUEST}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"isBannerSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return y}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://app.bitquest.games/bqsdk.min.js").then((function(){be("bq").then((function(){e._platformSdk=window.bq,e._platformSdk.initialize().then((function(){e._platformSdk.platform.sendMessage("game_ready");var t=e._platformSdk.player,r=t.id,n=void 0===r?null:r,o=t.name,i=void 0===o?"":o;e._playerId=n,e._playerName=i,e._isPlayerAuthorized=!0,e._defaultStorageType=f.PLATFORM_INTERNAL,e._playerExtra=t,function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(e,ol,il).call(e),e.showPreRoll(),e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(v.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||el(nl(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||el(nl(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return n._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return this._platformSdk.storage.get(e,"platform_internal").then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return el(nl(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=Xu(Ku().mark((function e(t,r,n){return Ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==f.PLATFORM_INTERNAL){e.next=12;break}if(!Array.isArray(t)){e.next=9;break}if(Array.isArray(r)){e.next=4;break}throw new Error("Value must be an array if key is an array");case 4:if(t.length===r.length){e.next=6;break}throw new Error("Key and value arrays must have the same length");case 6:return e.next=8,this._platformSdk.storage.set(t,r,"platform_internal");case 8:case 11:return e.abrupt("return");case 9:return e.next=11,this._platformSdk.storage.set(t,r,"platform_internal");case 12:return e.next=14,el(nl(u.prototype),"setDataToStorage",this).call(this,t,r,n);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Xu(Ku().mark((function e(t,r){var n;return Ku().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==f.PLATFORM_INTERNAL){e.next=13;break}if(!Array.isArray(t)){e.next=10;break}n=0;case 3:if(!(n<t.length)){e.next=9;break}return e.next=6,this._platformSdk.storage.delete(t[n],"platform_internal");case 6:n++,e.next=3;break;case 9:return e.abrupt("return");case 10:return e.next=12,this._platformSdk.storage.delete(t,"platform_internal");case 12:return e.abrupt("return");case 13:return e.next=15,el(nl(u.prototype),"deleteDataFromStorage",this).call(this,t,r);case 15:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"showRewarded",value:function(){this._platformSdk.advertisement.showRewarded()}},{key:"showInterstitial",value:function(){this._platformSdk.advertisement.showInterstitial()}},{key:"showPreRoll",value:function(){this._platformSdk.advertisement.showPreRoll()}},{key:"showBanner",value:function(){this._platformSdk.advertisement.showBanner()}},{key:"hideBanner",value:function(){this._platformSdk.advertisement.hideBanner()}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._getPromiseDecorator(v.PURCHASE);return r||(r=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.payment.purchase(e).then((function(r){var n=Ju({id:e},r.purchaseData);delete n.productID,t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),r.promise}},{key:"paymentsGetCatalog",value:function(){var e,t=this,r=this._paymentsGetProductsPlatformData();if(!r||!Array.isArray(r)||0===r.length)return Promise.reject(new Error("No platform products available"));if(!this._isInitialized||null===(e=this._platformSdk)||void 0===e||!e.payment)return Promise.reject(new Error("SDK not initialized or payment not available"));var n=this._getPromiseDecorator(v.GET_CATALOG);return n||(n=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.payment.getCatalog().then((function(e){if(!Array.isArray(e))throw new Error("Catalog response is not an array");var n=r.map((function(t){var r=e.find((function(e){return e.purchaseId===t.id}));return r?{id:t.id,name:r.name,description:r.description,price:r.priceValue,priceCurrencyCode:r.currencyCode,priceValue:r.price}:null})).filter(Boolean);t._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(e){t._rejectPromiseDecorator(v.GET_CATALOG,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),this._platformSdk.payment.consumePurchase(e).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.payment.getPurchases().then((function(t){var r=null==t?void 0:t.purchases,n=e._paymentsGetProductsPlatformData();e._paymentsPurchases=r.map((function(e){var t=n.find((function(t){return t.id===e.purchaseId}));if(!t)return null;var r=Ju({id:t.id},e);return delete r.purchaseId,r})).filter(Boolean),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"leaderboardsSetScore",value:function(e,t){var r=this,n=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!n){n=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var o="number"==typeof t?t:parseInt(t,10);this._platformSdk.leaderboard.setScore(e,o).then((function(){r._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){r._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return n.promise}},{key:"leaderboardsGetEntries",value:function(e){var t=this,r=this._getPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES);return r||(r=this._createPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES),this._platformSdk.leaderboard.getEntries(e).then((function(e){var r=Array.isArray(e)?e:e.entries||e.data||[];t._resolvePromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,r)})).catch((function(e){t._rejectPromiseDecorator(v.LEADERBOARDS_GET_ENTRIES,e)}))),r.promise}},{key:"getServerTime",value:function(){var e=this;return new Promise((function(t){t(e._platformSdk.platform.getServerTime())}))}}],n&&Qu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function sl(e){return sl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sl(e)}function cl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dl(n.key),n)}}function ul(e,t){return ul=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ul(e,t)}function ll(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fl(e){return fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},fl(e)}function pl(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function dl(e){var t=function(e,t){if("object"!=sl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=sl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==sl(t)?t:String(t)}function hl(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var yl=new WeakSet,ml=new WeakSet,vl=new WeakSet;function _l(){var e=this;this._platformSdk.ads.on("rewarded:start",(function(){e._setRewardedState(a.OPENED)})),this._platformSdk.ads.on("rewarded:close",(function(t){t||e._setRewardedState(a.FAILED)})),this._platformSdk.ads.on("rewarded:reward",(function(){e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)}))}function gl(){var e=this;this._platformSdk.ads.on("fullscreen:start",(function(){e._setInterstitialState(i.OPENED)})),this._platformSdk.ads.on("fullscreen:close",(function(){e._setInterstitialState(i.CLOSED)}))}function Sl(){var e=this;this._platformSdk.ads.on("sticky:render",(function(){e._setBannerState(s.SHOWN)})),this._platformSdk.ads.on("sticky:close",(function(){e._setBannerState(s.HIDDEN)}))}const bl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ul(e,t)}(c,t);var r,n,o,i,s=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fl(o);if(i){var r=fl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===sl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ll(e)}(this,e)});function c(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return pl(ll(e=s.call.apply(s,[this].concat(o))),vl),pl(ll(e),ml),pl(ll(e),yl),t=ll(e),!0,(r=dl(r="_isBannerSupported"))in t?Object.defineProperty(t,r,{value:true,enumerable:!0,configurable:!0,writable:!0}):t[r]=true,e}return r=c,(n=[{key:"platformId",get:function(){return e.GAMEPUSH}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);if(!t)if(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.projectId&&this._options.publicToken){var r="https://gamepush.com/sdk/game-score.js?projectId=".concat(this._options.projectId,"&publicToken=").concat(this._options.publicToken);_e(r).then((function(){be("GamePush").then((function(){var t;e._platformSdk=window.GamePush;var r=null===(t=e._platformSdk)||void 0===t?void 0:t.player;if(r){var n=r.id,o=void 0===n?null:n,i=r.name,a=void 0===i?"":i,s=r.avatar,c=void 0===s?"":s;e._isPlayerAuthorized=!0,e._playerId=o,e._playerName=a,c&&e._playerPhotos.push(c)}else e._playerApplyGuestData();e._isInitialized=!0,hl(e,ml,gl).call(e),hl(e,yl,_l).call(e),hl(e,vl,Sl).call(e),e._resolvePromiseDecorator(v.INITIALIZE)}))}))}else this._rejectPromiseDecorator(v.INITIALIZE,O);return t.promise}},{key:"showInterstitial",value:function(){this._platformSdk.ads.showFullscreen()}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.ads.showRewardedVideo().catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"showBanner",value:function(){this._platformSdk.ads.showSticky()}},{key:"hideBanner",value:function(){this._platformSdk.ads.closeSticky()}},{key:"checkAdBlock",value:function(){var e=this;return new Promise((function(t){e._platformSdk.ads.isAdblockEnabled().then((function(e){t(e)}))}))}}])&&cl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),c}($r);function El(e){return El="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(e)}function Pl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(r),!0).forEach((function(t){Dl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Al(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Il(n.key),n)}}function Ol(e,t){return Ol=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ol(e,t)}function Tl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kl(e){return kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kl(e)}function Dl(e,t,r){return(t=Il(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Il(e){var t=function(e,t){if("object"!=El(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=El(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==El(t)?t:String(t)}const Rl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ol(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kl(o);if(i){var r=kl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===El(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Tl(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Dl(Tl(e=a.call.apply(a,[this].concat(r))),"_appId",null),Dl(Tl(e),"_accessToken",null),e}return r=s,(n=[{key:"platformId",get:function(){return e.DISCORD}},{key:"isPlayerAuthorizationSupported",get:function(){return!0}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t,r=this._getPromiseDecorator(v.INITIALIZE);return r||(r=this._createPromiseDecorator(v.INITIALIZE),null!==(t=this._options)&&void 0!==t&&t.appId?(this._appId=this._options.appId,_e("/cdn/discord/discord-v2.0.0.min.js").then((function(){be("discord","DiscordSDK").then((function(){return e._platformSdk=new window.discord.DiscordSDK(e._appId),e._platformSdk.ready()})).then((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)}))}))):this._rejectPromiseDecorator(v.INITIALIZE,k)),r.promise}},{key:"authorizePlayer",value:function(e){var t=this,r=(null==e?void 0:e.scope)||["identify"],n=this._getPromiseDecorator(v.AUTHORIZE_PLAYER);return n||(n=this._createPromiseDecorator(v.AUTHORIZE_PLAYER),this._platformSdk.commands.authorize({client_id:this._appId,response_type:"code",state:"",prompt:"none",scope:r}).then((function(e){var t=e.code;return fetch("".concat("/api","/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})})).then((function(e){return e.json()})).then((function(e){return t._accessToken=e.access_token,t._playerExtra={token:e.token,accessToken:t._accessToken,channelId:t._platformSdk.channelId},t._platformSdk.commands.authenticate({access_token:t._accessToken})})).then((function(e){if(null===e)throw t._playerApplyGuestData(),new Error("Authorization failed");return t._isPlayerAuthorized=!0,t._resolvePromiseDecorator(v.AUTHORIZE_PLAYER),fetch("/users/@me",{method:"GET",headers:{Authorization:"Bearer ".concat(t._accessToken),"Content-Type":"application/json"}})})).then((function(e){return e.json()})).then((function(e){t._playerId=e.id,t._playerName=e.username,e.avatar&&t._playerPhotos.push("https://cdn.discordapp.com/avatars/".concat(e.id,"/").concat(e.avatar,".png")),t._playerExtra=wl(wl({},t._playerExtra),e)})).catch((function(e){t._playerApplyGuestData(),t._accessToken=null,t._rejectPromiseDecorator(v.AUTHORIZE_PLAYER,e)}))),n.promise}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e);if(!r)return Promise.reject();var n=this._getPromiseDecorator(v.PURCHASE);return n||(n=this._createPromiseDecorator(v.PURCHASE),this._platformSdk.commands.startPurchase({sku_id:r.platformProductId}).then((function(r){if(!r)throw new Error("Purchase failed");var n=wl({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))),n.promise}},{key:"paymentsConsumePurchase",value:function(e){var t=this,r=this._paymentsPurchases.findIndex((function(t){return t.id===e}));if(r<0)return Promise.reject();var n=this._getPromiseDecorator(v.CONSUME_PURCHASE);return n||(n=this._createPromiseDecorator(v.CONSUME_PURCHASE),fetch("/applications/".concat(this._appId,"/entitlements/").concat(this._paymentsPurchases[r].purchaseToken,"/consume"),{method:"POST",headers:{Authorization:"Bearer ".concat(this._accessToken),"Content-Type":"application/json"},body:JSON.stringify({})}).then((function(){t._paymentsPurchases.splice(r,1),t._resolvePromiseDecorator(v.CONSUME_PURCHASE,{id:e})})).catch((function(e){t._rejectPromiseDecorator(v.CONSUME_PURCHASE,e)}))),n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t)return Promise.reject();var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),this._platformSdk.commands.getSkus().then((function(r){var n=r.skus,o=t.map((function(e){var t,r,o=n.find((function(t){return t.id===e.platformProductId})),i=(r=window.discord.PriceUtils.formatPrice(o.price).replace(/[^\d.,-]/g,"")).includes(".")&&r.includes(",")&&r.indexOf(",")<r.indexOf(".")?parseFloat(r.replace(/,/g,"")):r.includes(".")&&r.includes(",")&&r.indexOf(",")>r.indexOf(".")?parseFloat(r.replace(/\./g,"").replace(",",".")):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")===r.length-4?parseInt(r.replace(/,/,""),10):r.includes(",")&&-1!==r.lastIndexOf(",")&&r.lastIndexOf(",")!==r.length-3?parseFloat(r.replace(",",".")):r.includes(".")&&-1!==r.lastIndexOf(".")&&r.lastIndexOf(".")===r.length-4?parseInt(r.replace(/\./,""),10):r.includes(".")?parseFloat(r):parseInt(r,10),a=null===(t=o.price)||void 0===t||null===(t=t.currency)||void 0===t?void 0:t.toUpperCase(),s="".concat(i," ").concat(a);return{id:e.id,title:o.name,price:s,priceValue:i,priceCurrencyCode:a}}));e._resolvePromiseDecorator(v.GET_CATALOG,o)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),this._platformSdk.commands.getEntitlements().then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.entitlements.map((function(e){return wl({id:r.find((function(t){return t.id===e.id})).id},e)})),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}},{key:"inviteFriends",value:function(){var e=this,t=this._getPromiseDecorator(v.INVITE_FRIENDS);return t||(t=this._createPromiseDecorator(v.INVITE_FRIENDS),this._platformSdk.commands.openInviteDialog().then((function(){e._resolvePromiseDecorator(v.INVITE_FRIENDS)})).catch((function(t){e._rejectPromiseDecorator(v.INVITE_FRIENDS,t)}))),t.promise}},{key:"share",value:function(e){var t=this;if(!e.mediaUrl)return Promise.reject();var r=this._getPromiseDecorator(v.SHARE);return r||(r=this._createPromiseDecorator(v.SHARE),this._platformSdk.commands.openShareMomentDialog({mediaUrl:e.mediaUrl}).then((function(){t._resolvePromiseDecorator(v.SHARE)})).catch((function(e){t._rejectPromiseDecorator(v.SHARE,e)}))),r.promise}}])&&Al(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}($r);function Ll(e){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ll(e)}function jl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=Gl(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nl(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Gl(n.key),n)}}function Gl(e){var t=function(e,t){if("object"!=Ll(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ll(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ll(t)?t:String(t)}function Bl(){return Bl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fl(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Bl.apply(this,arguments)}function Ml(e,t){return Ml=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ml(e,t)}function Hl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fl(e){return Fl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Fl(e)}function xl(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function Ul(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Wl(e,t,"set"),r),r}function Vl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Wl(e,t,"get"))}function Wl(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var zl=new WeakMap,Zl=new WeakMap,Yl=new WeakMap;const Jl=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ml(e,t)}(s,t);var r,n,o,i,a=(o=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Fl(o);if(i){var r=Fl(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ll(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Hl(e)}(this,e)});function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return xl(Hl(e=a.call.apply(a,[this].concat(r))),zl,{writable:!0,value:void 0}),xl(Hl(e),Zl,{writable:!0,value:!0}),xl(Hl(e),Yl,{writable:!0,value:!1}),e}return r=s,(n=[{key:"platformId",get:function(){return e.YOUTUBE}},{key:"platformLanguage",get:function(){return Vl(this,zl)?Vl(this,zl):Bl(Fl(s.prototype),"platformLanguage",this)}},{key:"isPlatformAudioEnabled",get:function(){return Vl(this,Zl)}},{key:"isPlatformPaused",get:function(){return Vl(this,Yl)}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"leaderboardsType",get:function(){return m}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://www.youtube.com/game_api/v1").then((function(){be("ytgame").then((function(){e._platformSdk=window.ytgame,e._defaultStorageType=f.PLATFORM_INTERNAL,Ul(e,Zl,e._platformSdk.system.isAudioEnabled());var t=e._platformSdk.system.getLanguage().then((function(t){Ul(e,zl,t.length>2?t.slice(0,2):t)}));e._platformStorageCachedData={};var r=e._platformSdk.game.loadData().then((function(t){"string"==typeof t&&""!==t&&(e._platformStorageCachedData=JSON.parse(t))}));e._platformSdk.system.onAudioEnabledChange((function(t){Ul(e,Zl,t),e._setAudioState(t)})),e._platformSdk.system.onPause((function(){Ul(e,Yl,!0),e._setPauseState(Vl(e,Yl))})),e._platformSdk.system.onResume((function(){Ul(e,Yl,!1),e._setPauseState(Vl(e,Yl))})),Promise.all([t,r]).finally((function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE),e._platformSdk.game.firstFrameReady()}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Bl(Fl(s.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Bl(Fl(s.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,o){n._platformSdk.game.loadData().then((function(o){if("string"==typeof o&&""!==o&&(n._platformStorageCachedData=JSON.parse(o)),Array.isArray(e)){for(var i=[],a=0;a<e.length;a++){var s=void 0===n._platformStorageCachedData[e[a]]?null:n._platformStorageCachedData[e[a]];if("string"==typeof s&&r)try{s=JSON.parse(s)}catch(e){}i.push(s)}t(i)}else{var c=void 0===n._platformStorageCachedData[e]?null:n._platformStorageCachedData[e];if("string"==typeof c&&r)try{c=JSON.parse(c)}catch(e){}t(c)}})).catch((function(){o()}))})):Bl(Fl(s.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;return r===f.PLATFORM_INTERNAL?new Promise((function(r,o){var i=null!==n._platformStorageCachedData?Cl({},n._platformStorageCachedData):{};if(Array.isArray(e))for(var a=0;a<e.length;a++)i[e[a]]=t[a];else i[e]=t;n._platformSdk.game.saveData(JSON.stringify(i)).then((function(){n._platformStorageCachedData=i,r()})).catch((function(e){o(e)}))})):Bl(Fl(s.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;return t===f.PLATFORM_INTERNAL?new Promise((function(t,n){var o=null!==r._platformStorageCachedData?Cl({},r._platformStorageCachedData):{};if(Array.isArray(e))for(var i=0;i<e.length;i++)delete o[e[i]];else delete o[e];r._platformSdk.game.saveData(JSON.stringify(o)).then((function(){r._platformStorageCachedData=o,t()})).catch((function(e){n(e)}))})):Bl(Fl(s.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"sendMessage",value:function(e){return e===d.GAME_READY?(this._platformSdk.game.gameReady(),Promise.resolve()):Bl(Fl(s.prototype),"sendMessage",this).call(this,e)}},{key:"leaderboardsSetScore",value:function(e,t,r){var n=this;if(!r)return Promise.reject();var o=this._getPromiseDecorator(v.LEADERBOARDS_SET_SCORE);if(!o){o=this._createPromiseDecorator(v.LEADERBOARDS_SET_SCORE);var i="string"==typeof t?parseInt(t,10):t;this._platformSdk.engagement.sendScore({value:i}).then((function(){n._resolvePromiseDecorator(v.LEADERBOARDS_SET_SCORE)})).catch((function(e){n._rejectPromiseDecorator(v.LEADERBOARDS_SET_SCORE,e)}))}return o.promise}}])&&Nl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),s}($r);function Kl(e){return Kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(e)}function ql(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=ef(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ef(n.key),n)}}function ef(e){var t=function(e,t){if("object"!=Kl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Kl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Kl(t)?t:String(t)}function tf(e,t){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tf(e,t)}function rf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nf(e)}function of(e,t){sf(e,t),t.add(e)}function af(e,t,r){sf(e,t),t.set(e,r)}function sf(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cf(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,lf(e,t,"get"))}function uf(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,lf(e,t,"set"),r),r}function lf(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function ff(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var pf=new WeakMap,df=new WeakMap,hf=new WeakMap,yf=new WeakMap,mf=new WeakMap,vf=new WeakMap,_f=new WeakMap,gf=new WeakSet,Sf=new WeakSet;function bf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("ins");return r.id=e,r.setAttribute("data-adspot-key",e),r.setAttribute("data-source",cf(this,pf)),Object.entries(t).forEach((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Ql(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ql(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];return r.setAttribute(i,String(a))})),r}function Ef(e){var t=this;this._platformSdk.setConfiguration(Xl(Xl({},e),{},{reqType:"prod",logLevel:1,adRequestTimeout:6e3,adRenderingTimeout:5e3})),this._platformSdk.onAdPrepared=function(e){e===cf(t,df)?t._setBannerState(s.SHOWN):e===cf(t,yf)?t._setInterstitialState(i.OPENED):e===cf(t,vf)&&t._setRewardedState(a.OPENED)},this._platformSdk.onAdFailedToLoad=function(e,r){var n;if(console.error(JSON.stringify(r)),e===cf(t,df))null===(n=cf(t,hf))||void 0===n||n.remove(),uf(t,hf,null),t._setBannerState(s.FAILED);else if(e===cf(t,yf)){var o;null===(o=cf(t,mf))||void 0===o||o.remove(),uf(t,mf,null),t._setInterstitialState(i.FAILED)}else if(e===cf(t,vf)){var c;null===(c=cf(t,_f))||void 0===c||c.remove(),uf(t,_f,null),t._setRewardedState(a.FAILED)}},this._platformSdk.onAdClosed=function(e,r,n){var o;if(e===cf(t,yf))t._setInterstitialState(i.CLOSED),null===(o=cf(t,mf))||void 0===o||o.remove(),uf(t,mf,null);else if(e===cf(t,vf)){var s;n&&r&&t._setRewardedState(a.REWARDED),t._setRewardedState(a.CLOSED),null===(s=cf(t,_f))||void 0===s||s.remove(),uf(t,_f,null)}}}const Pf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tf(e,t)}(f,t);var r,n,o,i,a=(o=f,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nf(o);if(i){var r=nf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Kl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rf(e)}(this,e)});function f(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return of(rf(e=a.call.apply(a,[this].concat(r))),Sf),of(rf(e),gf),af(rf(e),pf,{writable:!0,value:null}),af(rf(e),df,{writable:!0,value:null}),af(rf(e),hf,{writable:!0,value:null}),af(rf(e),yf,{writable:!0,value:null}),af(rf(e),mf,{writable:!0,value:null}),af(rf(e),vf,{writable:!0,value:null}),af(rf(e),_f,{writable:!0,value:null}),e}return r=f,(n=[{key:"platformId",get:function(){return e.JIO_GAMES}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"leaderboardsType",get:function(){return m}},{key:"isExternalLinksAllowed",get:function(){return!1}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),this._options&&this._options.packageName?_e("https://jioadsweb.akamaized.net/jioads/websdk/default/stable/v2/jioAds.js").then((function(){be("JioAds").then((function(){var t=e;e._platformSdk=window.JioAds,e._platformSdk.onInitialised=function(){e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)},window.onUserPropertiesResponse=function(e){ff(t,Sf,Ef).call(t,e)},uf(e,pf,e._options.packageName),window.DroidHandler?(window.DroidHandler.getUserProfile(),window.DroidHandler.postMessage(JSON.stringify({key:"getUserProperties"}))):window.onUserPropertiesResponse({detail:{uid:"",ifa:""}}),window.onUserProfileResponse=function(e){var r=JSON.parse(e);t.playerId=r.gamer_id||null,t.playerName=r.gamer_name||null,r.gamer_avatar_url&&t.playerPhotos.push(r.gamer_avatar_url),t._isPlayerAuthorized=!0}}))})):this._rejectPromiseDecorator(v.INITIALIZE,D)),t.promise}},{key:"showBanner",value:function(e,t){if(!cf(this,hf)){uf(this,df,t),uf(this,hf,ge(e));var r=ff(this,gf,bf).call(this,t,{"data-container-id":c});cf(this,hf).appendChild(r)}}},{key:"hideBanner",value:function(){var e;null===(e=cf(this,hf))||void 0===e||e.remove(),uf(this,hf,null),this._setBannerState(s.HIDDEN)}},{key:"showInterstitial",value:function(e){if(!cf(this,mf)){uf(this,yf,e),uf(this,mf,Se(u));var t=ff(this,gf,bf).call(this,e,{"data-container-id":u});cf(this,mf).appendChild(t)}}},{key:"showRewarded",value:function(e){if(!cf(this,_f)){uf(this,vf,e),uf(this,_f,Se(l));var t=ff(this,gf,bf).call(this,e,{"data-container-id":l});cf(this,_f).appendChild(t)}}},{key:"leaderboardsSetScore",value:function(e,t,r){if(!r||!window.DroidHandler)return Promise.reject();var n="string"==typeof t?parseInt(t,10):t;return window.DroidHandler.postScore(n),Promise.resolve()}}])&&$l(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),f}($r);function wf(e){return wf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wf(e)}function Af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Of(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=kf(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Tf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kf(n.key),n)}}function kf(e){var t=function(e,t){if("object"!=wf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wf(t)?t:String(t)}function Df(){return Df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Df.apply(this,arguments)}function If(e,t){return If=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},If(e,t)}function Rf(e){return Rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Rf(e)}const Lf=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&If(e,t)}(u,t);var r,n,o,s,c=(o=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rf(o);if(s){var r=Rf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===wf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),c.apply(this,arguments)}return r=u,(n=[{key:"platformId",get:function(){return e.PORTAL}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"platformLanguage",get:function(){return this._platformSdk.getLocale()||Df(Rf(u.prototype),"platformLanguage",this)}},{key:"isInterstitialSupported",get:function(){return!0}},{key:"isRewardedSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(t=this._createPromiseDecorator(v.INITIALIZE),_e("https://storage.googleapis.com/social-networth/scripts/sdk.umd.js").then((function(){be("PortalSDK").then((function(){e._platformSdk=window.PortalSDK,e._platformSdk.initialize().then((function(){e._platformSdk.initializeOverlay(),e._defaultStorageType=f.PLATFORM_INTERNAL,e._isInitialized=!0,e._resolvePromiseDecorator(v.INITIALIZE)})).catch((function(t){e._rejectPromiseDecorator(v.INITIALIZE,t)}))}))}))),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Df(Rf(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Df(Rf(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){var n=this;if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){var o=e.map((function(e){return Promise.resolve(n._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.getValue(e)).then((function(e){var t=e;if(r&&"string"==typeof e)try{t=JSON.parse(e)}catch(e){}return t}))}return Df(Rf(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:function(e,t,r){var n=this;if(r===f.PLATFORM_INTERNAL){if(Array.isArray(e)){if(!Array.isArray(t))return Promise.reject(new Error("Value must be an array if key is an array"));if(e.length!==t.length)return Promise.reject(new Error("Key and value arrays must have the same length"));var o=e.map((function(e,r){return Promise.resolve(n._platformSdk.setValue(e,t[r]))}));return Promise.all(o)}return Promise.resolve(this._platformSdk.setValue(e,t))}return Df(Rf(u.prototype),"setDataToStorage",this).call(this,e,t,r)}},{key:"deleteDataFromStorage",value:function(e,t){var r=this;if(t===f.PLATFORM_INTERNAL){if(Array.isArray(e)){var n=e.map((function(e){return Promise.resolve(r._platformSdk.removeValue(e))}));return Promise.all(n)}return Promise.resolve(this._platformSdk.removeValue(e))}return Df(Rf(u.prototype),"deleteDataFromStorage",this).call(this,e,t)}},{key:"showInterstitial",value:function(){var e=this;this._platformSdk.requestAd().then((function(){e._setInterstitialState(i.OPENED),e._setInterstitialState(i.CLOSED)})).catch((function(){e._setInterstitialState(i.FAILED)}))}},{key:"showRewarded",value:function(){var e=this;this._platformSdk.requestRewardAd().then((function(t){t?(e._setRewardedState(a.OPENED),e._setRewardedState(a.REWARDED),e._setRewardedState(a.CLOSED)):e._setRewardedState(a.FAILED)})).catch((function(){e._setRewardedState(a.FAILED)}))}},{key:"sendMessage",value:function(e){return e===d.GAME_READY?(this._platformSdk.gameReady(),Promise.resolve()):Df(Rf(u.prototype),"sendMessage",this).call(this,e)}},{key:"paymentsPurchase",value:function(e){var t=this,r=this._paymentsGetProductPlatformData(e),n=this._getPromiseDecorator(v.PURCHASE);if(!n){n=this._createPromiseDecorator(v.PURCHASE);var o=r.id;Promise.resolve(this._platformSdk.getShopItems()).then((function(e){var r=e.find((function(e){return e&&e.id===o}));if(!r)throw new Error("Shop item not found in catalog");return t._platformSdk.openPurchaseConfirmModal(r)})).then((function(r){if(!r||"success"!==r.status)throw new Error("Purchase failed");var n=Of({id:e},r);t._paymentsPurchases.push(n),t._resolvePromiseDecorator(v.PURCHASE,n)})).catch((function(e){t._rejectPromiseDecorator(v.PURCHASE,e)}))}return n.promise}},{key:"paymentsGetCatalog",value:function(){var e=this,t=this._paymentsGetProductsPlatformData();if(!t||!Array.isArray(t)||0===t.length)return Promise.reject(new Error("No platform products available"));var r=this._getPromiseDecorator(v.GET_CATALOG);return r||(r=this._createPromiseDecorator(v.GET_CATALOG),Promise.resolve(this._platformSdk.getShopItems()).then((function(r){if(!Array.isArray(r))throw new Error("Catalog response is not an array");var n=t.map((function(e){var t=e.id,n=r.find((function(e){return e&&e.id===t}));return n?{id:e.id,name:n.name,price:"".concat(n.price," Gems"),priceCurrencyCode:"Gems",priceValue:n.price}:null})).filter(Boolean);e._resolvePromiseDecorator(v.GET_CATALOG,n)})).catch((function(t){e._rejectPromiseDecorator(v.GET_CATALOG,t)}))),r.promise}},{key:"paymentsGetPurchases",value:function(){var e=this,t=this._getPromiseDecorator(v.GET_PURCHASES);return t||(t=this._createPromiseDecorator(v.GET_PURCHASES),Promise.resolve(this._platformSdk.getPurchasedShopItems()).then((function(t){var r=e._paymentsGetProductsPlatformData();e._paymentsPurchases=t.map((function(e){var t=e.id,n=r.find((function(e){return e.id===t}));return n?Of({id:n.id},e):null})).filter(Boolean),e._resolvePromiseDecorator(v.GET_PURCHASES,e._paymentsPurchases)})).catch((function(t){e._rejectPromiseDecorator(v.GET_PURCHASES,t)}))),t.promise}}])&&Tf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function jf(e){return jf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(e)}function Cf(){Cf=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),s=new I(n||[]);return o(a,"_invoke",{value:O(e,r,s)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",m={};function v(){}function _(){}function g(){}var S={};u(S,a,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(R([])));E&&E!==r&&n.call(E,a)&&(S=E);var P=g.prototype=v.prototype=Object.create(S);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function r(o,i,a,s){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==jf(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function O(t,r,n){var o=p;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var c=T(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?y:d,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=y,n.method="throw",n.arg=u.arg)}}}function T(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,T(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(jf(t)+" is not iterable")}return _.prototype=g,o(P,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:_,configurable:!0}),_.displayName=u(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},t.awrap=function(e){return{__await:e}},w(A.prototype),u(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new A(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(P),u(P,c,"Generator"),u(P,a,(function(){return this})),u(P,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function Nf(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function Gf(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Nf(i,n,o,a,s,"next",e)}function s(e){Nf(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Bf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Mf(n.key),n)}}function Mf(e){var t=function(e,t){if("object"!=jf(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=jf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==jf(t)?t:String(t)}function Hf(){return Hf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Uf(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Hf.apply(this,arguments)}function Ff(e,t){return Ff=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ff(e,t)}function xf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Uf(e){return Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Uf(e)}function Vf(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function Wf(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}var zf=new WeakSet,Zf=new WeakSet,Yf=new WeakSet,Jf=new WeakSet,Kf=new WeakSet,qf=new WeakSet,Xf=new WeakSet,Qf=new WeakSet,$f=new WeakSet,ep=new WeakSet;function tp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.parent.postMessage({type:e,data:t},"*")}function rp(e){this._isPlayerAuthorized=e.isPlayerAuthorized,this._isPlayerAuthorized&&(this._playerId=e.playerId,this._playerName=e.playerName,e.playerPhoto&&this._playerPhotos.push(e.playerPhoto)),this._isInitialized=!0,this._resolvePromiseDecorator(v.INITIALIZE)}function np(e){var t,r;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.GET_STORAGE_DATA,null!==(r=e.data.data)&&void 0!==r?r:null):this._rejectPromiseDecorator(v.GET_STORAGE_DATA)}function op(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.SET_STORAGE_DATA):this._rejectPromiseDecorator(v.SET_STORAGE_DATA)}function ip(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.DELETE_STORAGE_DATA):this._rejectPromiseDecorator(v.DELETE_STORAGE_DATA)}function ap(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.PURCHASE,e.data):this._rejectPromiseDecorator(v.PURCHASE,e.data)}function sp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.GET_CATALOG,e.data):this._rejectPromiseDecorator(v.GET_CATALOG,e.data)}function cp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.GET_PURCHASES,e.data):this._rejectPromiseDecorator(v.GET_PURCHASES,e.data)}function up(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.CREATE_POST):this._rejectPromiseDecorator(v.CREATE_POST)}function lp(e){var t;null!==(t=e.data)&&void 0!==t&&t.success?this._resolvePromiseDecorator(v.JOIN_COMMUNITY):this._rejectPromiseDecorator(v.JOIN_COMMUNITY)}const fp=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ff(e,t)}(u,t);var r,n,o,i,a,s,c=(a=u,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Uf(a);if(s){var r=Uf(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===jf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xf(e)}(this,e)});function u(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Vf(xf(e=c.call.apply(c,[this].concat(r))),ep),Vf(xf(e),$f),Vf(xf(e),Qf),Vf(xf(e),Xf),Vf(xf(e),qf),Vf(xf(e),Kf),Vf(xf(e),Jf),Vf(xf(e),Yf),Vf(xf(e),Zf),Vf(xf(e),zf),e}return r=u,n=[{key:"platformId",get:function(){return e.REDDIT}},{key:"isPaymentsSupported",get:function(){return!0}},{key:"isJoinCommunitySupported",get:function(){return!0}},{key:"isCreatePostSupported",get:function(){return!0}},{key:"initialize",value:function(){var e=this;if(this._isInitialized)return Promise.resolve();var t=this._getPromiseDecorator(v.INITIALIZE);return t||(window.addEventListener("message",(function(t){if("devvit-message"===t.data.type){var r=t.data.data.message;r.type===v.INITIALIZE?Wf(e,Zf,rp).call(e,r):r.type===v.GET_STORAGE_DATA?Wf(e,Yf,np).call(e,r):r.type===v.SET_STORAGE_DATA?Wf(e,Jf,op).call(e,r):r.type===v.DELETE_STORAGE_DATA?Wf(e,Kf,ip).call(e,r):r.type===v.GET_CATALOG?Wf(e,Xf,sp).call(e,r):r.type===v.PURCHASE?Wf(e,qf,ap).call(e,r):r.type===v.GET_PURCHASES?Wf(e,Qf,cp).call(e,r):r.type===v.CREATE_POST?Wf(e,$f,up).call(e,r):r.type===v.JOIN_COMMUNITY&&Wf(e,ep,lp).call(e)}})),t=this._createPromiseDecorator(v.INITIALIZE),Wf(this,zf,tp).call(this,v.INITIALIZE)),t.promise}},{key:"isStorageSupported",value:function(e){return e===f.PLATFORM_INTERNAL||Hf(Uf(u.prototype),"isStorageSupported",this).call(this,e)}},{key:"isStorageAvailable",value:function(e){return e===f.PLATFORM_INTERNAL||Hf(Uf(u.prototype),"isStorageAvailable",this).call(this,e)}},{key:"getDataFromStorage",value:function(e,t,r){if(t===f.PLATFORM_INTERNAL){var n=this._getPromiseDecorator(v.GET_STORAGE_DATA);return n||(n=this._createPromiseDecorator(v.GET_STORAGE_DATA),Wf(this,zf,tp).call(this,v.GET_STORAGE_DATA,{key:e})),n.promise}return Hf(Uf(u.prototype),"getDataFromStorage",this).call(this,e,t,r)}},{key:"setDataToStorage",value:(i=Gf(Cf().mark((function e(t,r,n){var o;return Cf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n!==f.PLATFORM_INTERNAL){e.next=4;break}return(o=this._getPromiseDecorator(v.SET_STORAGE_DATA))||(o=this._createPromiseDecorator(v.SET_STORAGE_DATA),Wf(this,zf,tp).call(this,v.SET_STORAGE_DATA,{key:t,value:r})),e.abrupt("return",o.promise);case 4:return e.abrupt("return",Hf(Uf(u.prototype),"setDataToStorage",this).call(this,t,r,n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})},{key:"deleteDataFromStorage",value:(o=Gf(Cf().mark((function e(t,r){var n;return Cf().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==f.PLATFORM_INTERNAL){e.next=4;break}return(n=this._getPromiseDecorator(v.DELETE_STORAGE_DATA))||(n=this._createPromiseDecorator(v.DELETE_STORAGE_DATA),Wf(this,zf,tp).call(this,v.DELETE_STORAGE_DATA,{key:t})),e.abrupt("return",n.promise);case 4:return e.abrupt("return",Hf(Uf(u.prototype),"deleteDataFromStorage",this).call(this,t,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"paymentsPurchase",value:function(e){var t=this._getPromiseDecorator(v.PURCHASE);return t||(t=this._createPromiseDecorator(v.PURCHASE),Wf(this,zf,tp).call(this,v.PURCHASE,{id:e})),t.promise}},{key:"paymentsGetCatalog",value:function(){if(!this._paymentsGetProductsPlatformData())return Promise.reject();var e=this._getPromiseDecorator(v.GET_CATALOG);return e||(e=this._createPromiseDecorator(v.GET_CATALOG),Wf(this,zf,tp).call(this,v.GET_CATALOG)),e.promise}},{key:"paymentsGetPurchases",value:function(){var e=this._getPromiseDecorator(v.GET_PURCHASES);return e||(e=this._createPromiseDecorator(v.GET_PURCHASES),Wf(this,zf,tp).call(this,v.GET_PURCHASES)),e.promise}},{key:"createPost",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPromiseDecorator(v.CREATE_POST);return t||(t=this._createPromiseDecorator(v.CREATE_POST),Wf(this,zf,tp).call(this,v.CREATE_POST,{options:e})),t.promise}}],n&&Bf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),u}($r);function pp(e){return pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pp(e)}function dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(r),!0).forEach((function(t){var n,o,i;n=e,o=t,i=r[t],(o=mp(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function yp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mp(n.key),n)}}function mp(e){var t=function(e,t){if("object"!=pp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=pp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pp(t)?t:String(t)}function vp(e,t){gp(e,t),t.add(e)}function _p(e,t,r){gp(e,t),t.set(e,r)}function gp(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Sp(e,t,r){return function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,Pp(e,t,"set"),r),r}function bp(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function Ep(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Pp(e,t,"get"))}function Pp(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}var wp=new WeakMap,Ap=new WeakMap,Op=new WeakMap,Tp=new WeakMap,kp=new WeakMap,Dp=new WeakSet,Ip=new WeakSet,Rp=new WeakSet;function Lp(t){var r,n=e.MOCK,o=new URL(window.location.href);if(t.forciblySetPlatformId)n=bp(this,Ip,jp).call(this,t.forciblySetPlatformId.toLowerCase());else{var i=["y","a","n","d","e","x",".","n","e","t"].join("");o.searchParams.has("platform_id")?n=bp(this,Ip,jp).call(this,o.searchParams.get("platform_id").toLowerCase()):o.hostname.includes(i)||o.hash.includes("yandex")?n=e.YANDEX:o.hostname.includes("crazygames.")||o.hostname.includes("1001juegos.com")?n=e.CRAZY_GAMES:o.hostname.includes("gamedistribution.com")?n=e.GAME_DISTRIBUTION:o.hostname.includes("lagged.")?n=e.LAGGED:o.searchParams.has("api_id")&&o.searchParams.has("viewer_id")&&o.searchParams.has("auth_key")||o.searchParams.has("vk_app_id")?n=e.VK:o.searchParams.has("app_id")&&o.searchParams.has("player_id")&&o.searchParams.has("game_sid")&&o.searchParams.has("auth_key")?n=e.ABSOLUTE_GAMES:o.searchParams.has("playdeck")?n=e.PLAYDECK:o.hash.includes("tgWebAppData")?n=e.TELEGRAM:o.hostname.includes("y8")?n=e.Y8:o.hostname.includes("fbsbx")?n=e.FACEBOOK:o.hostname.includes("poki-gdn")||o.hostname.includes("poki-user-content")?n=e.POKI:o.hostname.includes("msn.")||o.hostname.includes("msnfun.")||o.hostname.includes("start.gg")?n=e.MSN:o.hash.includes("customUrl_")||document.referrer.includes("bitquest")?n=e.BITQUEST:o.hostname.includes("eponesh.")?n=e.GAMEPUSH:o.hostname.includes("discordsays.com")?n=e.DISCORD:o.hostname.includes("usercontent.goog")?n=e.YOUTUBE:o.hostname.includes("portalapp.")?n=e.PORTAL:o.hostname.includes("devvit.")&&(n=e.REDDIT)}var a=t;switch(null!==(r=a.platforms)&&void 0!==r&&r[n]&&(a=Ae(a,a.platforms[n])),delete a.platforms,n){case e.VK:Sp(this,Op,new yn(a));break;case e.YANDEX:Sp(this,Op,new Bn(a));break;case e.CRAZY_GAMES:Sp(this,Op,new So(a));break;case e.ABSOLUTE_GAMES:Sp(this,Op,new Lo(a));break;case e.GAME_DISTRIBUTION:Sp(this,Op,new Vo(a));break;case e.OK:Sp(this,Op,new zi(a));break;case e.PLAYGAMA:Sp(this,Op,new la(a));break;case e.PLAYDECK:Sp(this,Op,new Oa(a));break;case e.TELEGRAM:Sp(this,Op,new Va(a));break;case e.Y8:Sp(this,Op,new cs(a));break;case e.LAGGED:Sp(this,Op,new ys(a));break;case e.FACEBOOK:Sp(this,Op,new Ws(a));break;case e.POKI:Sp(this,Op,new Gc(a));break;case e.QA_TOOL:Sp(this,Op,new Dc(a));break;case e.MSN:Sp(this,Op,new au(a));break;case e.HUAWEI:Sp(this,Op,new zu(a));break;case e.BITQUEST:Sp(this,Op,new al(a));break;case e.GAMEPUSH:Sp(this,Op,new bl(a));break;case e.DISCORD:Sp(this,Op,new Rl(a));break;case e.YOUTUBE:Sp(this,Op,new Jl(a));break;case e.JIO_GAMES:Sp(this,Op,new Pf(a));break;case e.PORTAL:Sp(this,Op,new Lf(a));break;case e.REDDIT:Sp(this,Op,new fp(a));break;default:Sp(this,Op,new $r(a))}}function jp(t){for(var r=Object.values(e),n=0;n<r.length;n++)if(t===r[n])return t;return e.MOCK}function Cp(e){return Ep(this,wp)||console.error(_),Ep(this,Tp)[e]}const Np=function(){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),vp(this,Rp),vp(this,Ip),vp(this,Dp),_p(this,wp,{writable:!0,value:!1}),_p(this,Ap,{writable:!0,value:null}),_p(this,Op,{writable:!0,value:null}),_p(this,Tp,{writable:!0,value:{}}),_p(this,kp,{writable:!0,value:"javascript"})}var c,u;return c=r,(u=[{key:"version",get:function(){return"1.26.0-preview.1"}},{key:"isInitialized",get:function(){return Ep(this,wp)}},{key:"options",get:function(){return Ep(this,Op).options}},{key:"platform",get:function(){return bp(this,Rp,Cp).call(this,t.PLATFORM)}},{key:"player",get:function(){return bp(this,Rp,Cp).call(this,t.PLAYER)}},{key:"game",get:function(){return bp(this,Rp,Cp).call(this,t.GAME)}},{key:"storage",get:function(){return bp(this,Rp,Cp).call(this,t.STORAGE)}},{key:"advertisement",get:function(){return bp(this,Rp,Cp).call(this,t.ADVERTISEMENT)}},{key:"social",get:function(){return bp(this,Rp,Cp).call(this,t.SOCIAL)}},{key:"device",get:function(){return bp(this,Rp,Cp).call(this,t.DEVICE)}},{key:"leaderboard",get:function(){return bp(this,Rp,Cp).call(this,t.LEADERBOARDS)}},{key:"leaderboards",get:function(){return bp(this,Rp,Cp).call(this,t.LEADERBOARDS)}},{key:"payments",get:function(){return bp(this,Rp,Cp).call(this,t.PAYMENTS)}},{key:"achievements",get:function(){return bp(this,Rp,Cp).call(this,t.ACHIEVEMENTS)}},{key:"remoteConfig",get:function(){return bp(this,Rp,Cp).call(this,t.REMOTE_CONFIG)}},{key:"clipboard",get:function(){return bp(this,Rp,Cp).call(this,t.CLIPBOARD)}},{key:"engine",get:function(){return Ep(this,kp)},set:function(e){Sp(this,kp,e)}},{key:"PLATFORM_ID",get:function(){return e}},{key:"PLATFORM_MESSAGE",get:function(){return d}},{key:"MODULE_NAME",get:function(){return t}},{key:"EVENT_NAME",get:function(){return n}},{key:"INTERSTITIAL_STATE",get:function(){return i}},{key:"REWARDED_STATE",get:function(){return a}},{key:"BANNER_STATE",get:function(){return s}},{key:"STORAGE_TYPE",get:function(){return f}},{key:"VISIBILITY_STATE",get:function(){return o}},{key:"DEVICE_TYPE",get:function(){return p}},{key:"initialize",value:function(e){var r=this;if(Ep(this,wp))return Promise.resolve();if(!Ep(this,Ap)){Sp(this,Ap,new F);var n,o="./playgama-bridge-config.json";e&&e.configFilePath&&(o=e.configFilePath),fetch(o).then((function(e){return e.json()})).then((function(e){n=hp({},e)})).catch((function(t){console.error("Config parsing error.",t),n=hp({},e)})).finally((function(){bp(r,Dp,Lp).call(r,n),Ep(r,Op).engine=r.engine,Ep(r,Tp)[t.PLATFORM]=new se(Ep(r,Op)),Ep(r,Tp)[t.PLAYER]=new de(Ep(r,Op)),Ep(r,Tp)[t.GAME]=new Ce(Ep(r,Op)),Ep(r,Tp)[t.STORAGE]=new Fe(Ep(r,Op)),Ep(r,Tp)[t.ADVERTISEMENT]=new Jt(Ep(r,Op)),Ep(r,Tp)[t.SOCIAL]=new er(Ep(r,Op)),Ep(r,Tp)[t.DEVICE]=new ar(Ep(r,Op)),Ep(r,Tp)[t.LEADERBOARDS]=new gr(Ep(r,Op)),Ep(r,Tp)[t.PAYMENTS]=new Ar(Ep(r,Op)),Ep(r,Tp)[t.REMOTE_CONFIG]=new Rr(Ep(r,Op)),Ep(r,Tp)[t.CLIPBOARD]=new Br(Ep(r,Op)),Ep(r,Tp)[t.ACHIEVEMENTS]=new Vr(Ep(r,Op)),Ep(r,Op).initialize().then((function(){var e,n;if(Sp(r,wp,!0),console.info("%c PlaygamaBridge v".concat(r.version," initialized. "),"background: #01A5DA; color: white"),Ep(r,Ap)&&(Ep(r,Ap).resolve(),Sp(r,Ap,null)),null!==(e=Ep(r,Op).options)&&void 0!==e&&null!==(e=e.advertisement)&&void 0!==e&&null!==(e=e.interstitial)&&void 0!==e&&e.preloadOnStart){var o=Ep(r,Op).options.advertisement.interstitial.preloadOnStart;Ep(r,Tp)[t.ADVERTISEMENT].preloadInterstitial(o)}if(null!==(n=Ep(r,Op).options)&&void 0!==n&&null!==(n=n.advertisement)&&void 0!==n&&null!==(n=n.rewarded)&&void 0!==n&&n.preloadOnStart){var i=Ep(r,Op).options.advertisement.rewarded.preloadOnStart;Ep(r,Tp)[t.ADVERTISEMENT].preloadRewarded(i)}})).finally((function(){setTimeout((function(){return Ep(r,Tp)[t.GAME].setLoadingProgress(100,!0)}),700)}))}))}return Ep(this,Ap).promise}}])&&yp(c.prototype,u),Object.defineProperty(c,"prototype",{writable:!1}),r}();window.bridge=new Np,window.playgamaBridge=window.bridge})()})();